var App,AppConfig,AppInit;App=function(){function e(){return["textAngular","angularjs.bootstrap.tagsinput.template","angularjs.bootstrap.tagsinput"]}return e}(),AppConfig=function(){function e(){ErrorHandling.Message("Loading timeout","Initialization takes longer than expected...").ShowAfter(3500),$.material.init()}return e}(),AppInit=function(){function e(e,t){e.inverted="true"===localStorage.inverted,t.toolbar=[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["html","justifyLeft","justifyCenter","justifyRight","indent","outdent","insertImage","insertLink"]]}return e}(),angular.module("app",new App).config([AppConfig]).run(["$rootScope","taOptions",AppInit]),angular.module("app").run(["$templateCache",function(e){e.put("templates/Layout.html",'<div class="page"><div class="toolbar-top"><div ng-click="gotoStarred()" class="btn btn-default mdi-2x mdi-action-stars {{ filterFavourites ? (\'btn-material-\' + user.theme) : \'\' }}"></div><div ng-click="gotoBookmarks()" class="btn btn-default mdi-2x mdi-action-turned-in {{ filterBookmarks ? (\'btn-material-\' + user.theme) : \'\' }}"></div><div ng-click="gotoSearch()" class="btn btn-default mdi-2x mdi-action-pageview"></div><div ng-click="createNewNote()" class="btn btn-default mdi-2x mdi-content-add"></div></div><div class="toolbar-bottom"><div ng-click="invertColors()" class="btn btn-default mdi-2x mdi-communication-invert-colors-on"></div><div ng-click="gotoUserProfile()" class="btn btn-default mdi-2x mdi-action-account-box {{ showUserProfile ? (\'btn-material-\' + user.theme) : \'\' }}"></div></div><div ng-if="!showUserProfile" class="content"><div class="banner"><h1>Ultimate Notepad</h1><h2>Take your studies offline</h2></div><subject-tabs selected="currentSubject" items="user.subjects" theme="user.theme"></subject-tabs><note-list items="allNotes" subject="currentSubject" selected="currentNote" filter-favourites="filterFavourites" filter-bookmarks="filterBookmarks" show-user-notes="user.enabled"></note-list><note-preview items="allNotes" item="currentNote"></note-preview></div><div ng-if="showUserProfile" class="content"><user-profile user="user"></user-profile></div></div>'),e.put("templates/NoteList.html",'<div class="list-group"><div ng-if="!items.filter(itemsFilter).length" class="list-group-item no-items"><div class="row-action-primary"></div><!-- i.mdi-editor-mode-edit.mdi-lg(ng-if="item.flags.edit")--><div class="row-content"><div class="list-group-item-heading">Sorry, no items here</div></div></div><div ng-repeat="item in items | filter: itemsFilter | orderBy: \'[-flags.edit,-flags.starred,starredOrderValue,createdDate]\'" ng-click="select(item)" ng-class="{ \'selected\': item === selected }" class="list-group-item"><div class="row-action-primary"><i ng-if="item.flags.owned &amp;&amp; !item.flags.edit" class="mdi-action-settings mdi-lg"></i><i ng-if="!item.flags.done &amp;&amp; !item.flags.owned" class="mdi-content-forward mdi-lg"></i><i ng-if="item.flags.done" class="mdi-navigation-check mdi-lg"></i><i ng-if="item.flags.edit" class="mdi-editor-mode-edit mdi-lg"></i></div><div class="row-content"><div class="list-group-item-heading"><i ng-if="item.flags.starred" class="mdi-action-grade"></i><i ng-if="item.flags.readLater" class="mdi-action-turned-in"></i>{{ item.title }}</div><div class="list-group-item-text">{{ item.subject }} | {{ item.subjectType }}</div></div></div></div>'),e.put("templates/NotePreview.html",'<div ng-if="item" ng-class="{ \'edit-mode\': item.flags.edit }" class="note-preview-content"><h3 ng-if="!item.flags.edit" class="note-title"><i ng-class="{ \'active\': !!item.starredDate }" ng-click="toggleStarred(item)" class="starred-title-icon mdi-action-grade"> </i>&nbsp;{{ item.title }}		<i ng-click="print()" class="print-note-icon mdi-action-print"> </i></h3><p ng-if="!item.flags.edit">{{ item.subject }} | {{ item.subjectType }}</p><p ng-bind-html="item.content" ng-if="!item.flags.edit"></p><form ng-if="item.flags.edit" class="form-horizontal"><br/><div class="form-group"><label for="title" autofocus="autofocus" class="col-lg-2 control-label">Title</label><div class="col-lg-10"><input id="title" type="text" ng-model="item.title" class="form-control"/></div></div><div class="form-group"><label for="subject" class="col-lg-2 control-label">Subject</label><div class="col-lg-10"><input id="subject" type="text" ng-model="item.subject" class="form-control"/></div></div><div class="form-group"><label for="subjectType" class="col-lg-2 control-label">Subject type</label><div class="col-lg-10"><input id="subjectType" type="text" ng-model="item.subjectType" class="form-control"/></div></div><div class="form-group"><label class="col-lg-2 control-label">Content</label><div class="col-lg-10"><text-angular id="content" ng-model="item.content"></text-angular></div></div></form><div ng-if="!item.flags.owned" ng-click="toggleDone(item)" class="btn btn-primary btn-raised right">Mark as {{ item.flags.done ? \'Undone\' : \'Done\' }}</div><div ng-if="!item.flags.owned" ng-click="toggleReadLater(item)" class="btn btn-success btn-raised right"> <i ng-if="item.flags.readLater" class="mdi-action-turned-in"></i>{{ item.flags.readLater ? \'Bookmarked\' : \'Read Later\' }}</div><div ng-if="!item.flags.owned" data-toggle="modal" data-target="#request-dialog" class="btn btn-warning btn-raised">Request Update</div><div id="request-dialog" class="modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" data-dismiss="modal" aria-hidden="true" class="close">&times;</button><h4 class="modal-title">Request update</h4></div><div class="modal-body"><form><div class="form-group"><label for="requestMessage" class="col-lg-2 control-label">Message</label><div class="col-lg-10"><textarea id="requestMessage" rows="3" ng-model="requestMessage" autofocus="autofocus" class="form-control"></textarea><span class="help-block">Message will be sent to the author and his group administrator.</span></div></div></form></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-default">Abort</button><button type="button" class="btn btn-primary">Send</button></div></div></div></div><div ng-if="item.flags.owned" data-toggle="modal" data-target="#remove-dialog" class="btn btn-danger btn-raised right">Remove</div><div id="remove-dialog" class="modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" data-dismiss="modal" aria-hidden="true" class="close">&times;</button><h4 class="modal-title">Are you sure? Current note will be lost forever...</h4></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-default">Abort</button><button type="button" ng-click="removeCurrentItem()" class="btn btn-danger">Delete</button></div></div></div></div><div ng-if="item.flags.owned" ng-click="toggleEditMode(item)" class="btn btn-success btn-raised right">{{ item.flags.edit ? \'Save\' : \'Edit\' }}</div><div ng-if="item.flags.owned &amp;&amp; !item.flags.edit" ng-click="togglePublished(item)" class="btn btn-warning btn-raised">{{ item.flags.published ? \'Unpublish\' : \'Publish\' }}</div></div>'),e.put("templates/SubjectTabs.html",'<div class="navbar navbar-material-{{ theme }}"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div aria-expanded="false" style="height: 1px;" class="navbar-collapse"><ul class="nav navbar-nav navbar-left"><li ng-class="{ \'active\': selected.name === \'All\' }" ng-click="select({name:\'All\', showAll:true})"><a href="#All">All</a></li><li ng-repeat="item in items" ng-click="select(item)" ng-class="{ \'active\': item === selected }"><a href="#{{item.name}}">{{item.name}}</a></li></ul><ul class="nav navbar-nav navbar-right"><li><a data-toggle="modal" data-target="#quick-add-subject-dialog" class="add-subject"><i class="mdi-content-add"></i></a></li></ul></div><div id="quick-add-subject-dialog" class="modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" data-dismiss="modal" aria-hidden="true" class="close">&times;</button><h4 class="modal-title">New subject</h4></div><div class="modal-body"><form id="quick-add-subject-form" ng-submit="addSubject()"><div class="form-group"><label for="newSubjectName" class="col-lg-2 control-label">Name</label><div class="col-lg-10"><input id="newSubjectName" type="textr" ng-model="newSubjectName" required="required" class="form-control"/></div></div></form><br/></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-default">Abort</button><input type="submit" form="quick-add-subject-form" value="Add to my subjects" class="btn btn-primary"/></div></div></div></div></div>'),e.put("templates/UserProfile.html",'<form class="horizontal-form user-profile"><br/><div class="row form-group"><label for="title" class="col-lg-2 control-label">Username</label><div class="col-lg-10"><input id="title" type="text" ng-model="user.username" class="form-control"/></div></div><div class="row form-group"><label for="group" class="col-lg-2 control-label">My group</label><div class="col-lg-10"><input id="group" type="text" ng-model="user.group" class="form-control"/></div></div><div ng-if="subjectsTags" class="row form-group"><label class="col-lg-2 control-label">My subjects</label><div class="col-lg-10"><tagsinput tagsinput-id="subjectsTags.tagsinputId" init-tags="subjectsTags.initTags" maxtags="subjectsTags.maxTags" maxlength="subjectsTags.maxLength" onchanged="onSubjectsChange(data)"></tagsinput></div></div><hr/><div class="row form-group"><label for="fontFamily" class="col-lg-2 control-label">Font family</label><div class="col-lg-10"><select id="fontFamily" ng-model="user.fontFamily" ng-options="i as x for (x,i) in fontFamilyOptions" class="select form-control"></select></div></div><div class="row form-group"><label class="col-lg-2 control-label">Theme</label><div class="col-lg-10 theme-selector"><div ng-repeat="color in colors" ng-class="{ &quot;active&quot;: color === user.theme }" ng-click="selectTheme(color)" class="btn btn-xs btn-default"><i class="mdi-av-stop mdi-material-{{ color }}"></i></div></div></div></form>')}]);var Alert,ErrorHandling;Alert=function(){function e(e,t){this.title=e,this.message=t}return e.prototype.ShowAfter=function(e){return setTimeout(function(e){return function(){return $(".main").find(".loading").length?sweetAlert({type:"warning",title:e.title,text:e.message}):void 0}}(this),e)},e}(),ErrorHandling={Message:function(e,t){return new Alert(e,t)}};var Layout,defaultFontFamily,defaultSubjects,fakeUser,fontFamilyOptions;defaultSubjects=[{name:"ELE"},{name:"SEM2"},{name:"ZPR"},{name:"TBO"}],fontFamilyOptions=[{name:"Muli",value:"Muli, sans-serif"},{name:"Open Sans",value:"Open Sans, sans-serif"},{name:"Helvetica",value:"Helvetica Neue, Helvetica, Noto Sans, Arial, sans-serif"},{name:"Philosopher",value:"Philosopher, serif"},{name:"Palatino",value:"Palatino, Palatino Linotype, Palatino LT STD, Book Antiqua, Georgia, serif"},{name:"Candara",value:"Candara, sans-serif"}],defaultFontFamily=0,fakeUser=function(){return{username:"John Doe",group:"2015_online_db",enabled:!0,theme:localStorage.theme||"primary"}},Layout=function(){function e(e){return{restrict:"E",replace:!0,templateUrl:"templates/Layout.html",link:function(t,a){var n,o;return t.invertColors=function(){return t.inverted=!t.inverted,localStorage.inverted=t.inverted},t.allNotes=JSON.parse(localStorage.allNotes||"0")||[e.fakeNote(),e.fakeNote(),e.fakeNote(),e.fakeNote(),e.fakeNote(),e.fakeNote(),e.fakeNote(),e.fakeNote()],t.$watch("allNotes",function(){return localStorage.allNotes=angular.toJson(t.allNotes)},!0),t.createNewNote=function(){var e;return e={title:"Untitled",subject:"???",subjectType:"???",createdDate:new Date,flags:{owned:!0,published:!1,edit:!0}},t.allNotes.push(e),t.currentNote=e},t.gotoStarred=function(){return t.filterBookmarks=!1,t.showUserProfile=!1,t.filterFavourites=!t.filterFavourites,t.filterFavourites?history.pushState({},"Favourites","/#Favourites"):history.pushState({},"Index","/")},t.gotoBookmarks=function(){return t.filterFavourites=!1,t.showUserProfile=!1,t.filterBookmarks=!t.filterBookmarks,t.filterBookmarks?history.pushState({},"Bookmarks","/#Bookmarks"):history.pushState({},"Index","/")},t.gotoUserProfile=function(){return t.filterBookmarks=!1,t.filterFavourites=!1,t.showUserProfile=!t.showUserProfile,t.showUserProfile?history.pushState({},"User Profile","/#Profile"):history.pushState({},"Index","/")},n=null!=(o=location.href.match(/#([^#]+)$/))?o[1]:void 0,"Profile"===n&&(t.showUserProfile=!0),"Favourites"===n&&(t.filterFavourites=!0),"Bookmarks"===n&&(t.filterBookmarks=!0),t.user=fakeUser(),t.$watch("user.subject",function(){return localStorage.subjects=angular.toJson(t.user.subjects)}),t.user.subjects=localStorage.subjects?JSON.parse(localStorage.subjects):defaultSubjects,t.$watch("user.fontFamily",function(){return null!=t.user.fontFamily?(localStorage.fontFamily=t.user.fontFamily,document.styleSheets[0].addRule("body, h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4","font-family: "+fontFamilyOptions[t.user.fontFamily].value+" !important;")):void 0}),t.user.fontFamily=localStorage.fontFamily?JSON.parse(localStorage.fontFamily):2}}}return e}(),angular.module("app").directive("layout",["noteFactoryService",Layout]);var SubjectTabs,setSubjectFromHash;setSubjectFromHash=function(e){var t,a,n,o;return o=e.items.slice(1),a=location.href.match(/#([^#]+)$/),t=null!=a?a[1]:void 0,n=o.filter(function(e){return e.name===t})[0],e.selected=n||{name:"All",showAll:!0}},SubjectTabs=function(){function e(){return{restrict:"E",transclude:!0,templateUrl:"templates/SubjectTabs.html",scope:{selected:"=",items:"=",theme:"="},link:function(e){return e.select=function(t){return e.selected=t},e.addSubject=function(){var t;return e.newSubjectName.match(/^[a-z]+$/i)?(t=e.newSubjectName.toUpperCase(),e.items.push({name:t}),e.newSubjectName=void 0,setTimeout(function(){return $("#quick-add-subject-dialog").modal("toggle")})):void 0},setSubjectFromHash(e)}}}return e}(),angular.module("app").directive("subjectTabs",[SubjectTabs]);var NoteContentGenerator,getParagraph,randomIndex,words;words=["awesome","Lorem","ipsum","very","hard","lots of","work","weekend","notes","programming"],randomIndex=function(){return Math.floor(9.9*Math.random())},getParagraph=function(){var e,t;return function(){for(t=[],e=1;125>=e;e++)t.push(e);return t}.apply(this).map(function(){return words[randomIndex()]}).join(" ").replace(/work/,"<strong>work</strong>").replace(/programming/,'<span style="color: blue;">programming</span>')},NoteContentGenerator=function(){function e(){}return e.prototype.genericFakeContent=function(){return"<h4>Lorem ipsum...</h4>"+("<p>"+getParagraph()+"<p>")+("<p>"+getParagraph()+"<p>")},e.prototype.staticFakeContentWithImage=function(){return'<p><img src="http://a1.dspncdn.com/media/692x/63/35/39/63353989682cef2f15bc6bb87a333527.jpg"><br></p> <p>Found at:&nbsp;<a href="http://www.visual-journal.net/" target=""><u>visual-journal.net</u></a></p>'},e.prototype.staticFakeContent=function(){return'<h1>HTTP 2.0<br></h1> <h3>Lack of multiplexing (HTTP 1.1)</h3> <p>A single slow response blocks     all requests behind it.&nbsp;<span style="background-color: transparent;">Parallel requests requires     buffering on the server.&nbsp;</span><span style="background-color: transparent;">Failed response may terminate     TCP connection, forcing the client to request subsequent resources again.&nbsp;</span><span style="background-color: transparent;">Pipelining requires tunneling     (HTTPS) as best practice.&nbsp;</span><span style="background-color: transparent;">Clients that want to maximize     throughput open multiple TCP streams (it costs).</span></p> <p>  </p> <p></p> <p></p> <p><span style="background-color: transparent;"></span></p> <ul> <li><span style="background-color: transparent;">6 connections per host is a      trade-off (overhead vs transfer)</span><br></li> </ul> <p></p> <p></p> <p></p> <p></p> <hr> <h3>Domain sharding</h3> <ul> <li>More overhead and DNS lookups</li> <li><span style="background-color: transparent;">But we use them if 6      connections is not enough</span><br></li> <li><span style="background-color: transparent;">It actually hurts user      experience if many of the connections never escape TCP slow-start</span></li> <ul> <li><span style="background-color: transparent;">Affects high-latency clients       the most (e.g. Mobile devices using 3G and 4G)</span></li> </ul> </ul> <p></p> <hr> <h3>Protocol overhead</h3> <ul> <li><span style="background-color: transparent;">Headers are not compressed (and cookies)</span></li> <li><span style="background-color: transparent;">Chatty behavior of web apps can lead to HTTP overheadt hat exceeds payload</span></li> <li><span style="background-color: transparent;">Large enough to mitigate networking overhead</span><br></li> </ul> <p><br></p> <p></p> <p></p> <blockquote><p><span style="background-color: transparent;">Ideal size of a CSS or a JavaScript bundle:&nbsp;</span><span style="background-color: transparent;"><b><u>30-50KB</u></b>&nbsp;</span><span style="background-color: transparent;">(compressed)</span></p></blockquote> <p><span style="background-color: transparent;"><span id="selectionBoundary_1434409052409_06158166378736496" class="rangySelectionBoundary"></span></span></p>'},e}(),angular.module("app").service("noteContentGeneratorService",[NoteContentGenerator]);var Note,NoteFactory,randomIndex,subjects,types;subjects=["JPA","TBO","TSA","IAB","ELE","KOR","ZPR","SEM2"],types=["Project","Lecture","Exam","Exercises"],randomIndex=function(){return Math.floor(9.9*Math.random())},Note=function(){function e(e){var t,a;for(t in e)a=e[t],this[t]=a}return e}(),NoteFactory=function(){function e(e){this.noteContentGeneratorService=e}var t,a;return t=0,e.prototype.fakeNote=function(){return new Note({id:++t,title:this.getFakeTitle(),subject:subjects[randomIndex()%8],subjectType:types[randomIndex()%4],content:this.getFakeContent(),createdDate:new Date,flags:{readLater:!1,done:!1,owned:randomIndex()%2===0,starred:!1},author:a})},e.prototype.getFakeTitle=function(){return 1===t?"High Performance Browser Networking":[1,2,3,4,5].map(function(){return words[randomIndex()]}).join(" ")},e.prototype.getFakeContent=function(){return 1===t?this.noteContentGeneratorService.staticFakeContent():2===t?this.noteContentGeneratorService.staticFakeContentWithImage():this.noteContentGeneratorService.genericFakeContent()},a={username:"John Doe",group:"2015_online_db",notesCounter:21,awardsCounter:2,enabled:!0},e}(),angular.module("app").service("noteFactoryService",["noteContentGeneratorService",NoteFactory]);var NoteList;NoteList=function(){function e(){return{restrict:"E",transclude:!0,templateUrl:"templates/NoteList.html",scope:{items:"=",selected:"=",subject:"=",filterFavourites:"=",filterBookmarks:"=",showUserNotes:"="},link:function(e){return e.select=function(t){return e.selected=t},e.itemsFilter=function(t){return t.flags.edit?!0:e.filterFavourites&&!t.flags.starred?!1:e.filterBookmarks&&!t.flags.readLater?!1:!e.showUserNotes&&t.flags.owned?!1:null==e.subject||e.subject.showAll?!0:t.subject===e.subject.name}}}}return e}(),angular.module("app").directive("noteList",[NoteList]);var NotePreview;NotePreview=function(){function e(){return{restrict:"E",transclude:!0,templateUrl:"templates/NotePreview.html",scope:{items:"=",item:"="},link:function(e){return e.requestMessage="Seem that this note is outdated...",e.toggleDone=function(e){return e.flags.done=!e.flags.done},e.toggleStarred=function(e){return e.starredDate=e.starredDate?void 0:new Date,e.starredOrderValue=e.starredDate?Number.MAX_SAFE_INTEGER-e.starredDate:void 0,e.flags.starred=null!=e.starredDate},e.togglePublished=function(e){return e.flags.published=!e.flags.published},e.toggleReadLater=function(e){return e.flags.readLater=!e.flags.readLater},e.removeCurrentItem=function(){var t,a;return t=e.items.indexOf(e.item),e.items.splice(t,1),a=t<e.items.length?t:t-1,e.item=e.items[a],setTimeout(function(){return $("#remove-dialog").modal("toggle")})},e.toggleEditMode=function(e){return e.flags.edit=!e.flags.edit},e.print=function(){return window.print()}}}}return e}(),angular.module("app").directive("notePreview",[NotePreview]);var UserProfile,allColors;allColors=[],allColors.refresh=function(){},$(function(){return setTimeout(function(){return $.when($.get("/vendor/bootstrap-material-design/dist/css/material.min.css")).done(function(e){[].splice.apply(allColors,[0,0].concat(function(){var t;return t=e.match(/.mdi-material-[a-z\-0-9]+,/g).map(function(e){return e.match(/.mdi-material-([a-z\-0-9]+),/)[1]}),t.filter(function(e,a){return a===t.lastIndexOf(e)})}()));try{return allColors.refresh()}catch(t){}})},200)}),UserProfile=function(){function e(){return{restrict:"E",transclude:!0,templateUrl:"templates/UserProfile.html",scope:{user:"="},link:function(e){var t,a;return a=e.user.subjects.map(function(e){return e.name}),e.subjectsTags={tagsinputId:"$$$",initTags:a,maxTags:10,maxLength:15},e.onSubjectsChange=function(t){return e.user.subjects=t.tags.map(function(e){return{name:e}}),localStorage.subjects=JSON.stringify(e.user.subjects)},e.colors=["teal","red","green","blue"],allColors.refresh=function(){return e.$apply()},e.colors=allColors,t={},fontFamilyOptions.forEach(function(e,a){return t[e.name]=a}),e.fontFamilyOptions=t,setTimeout(function(){return $(".select").dropdown({optionClass:"withripple",callback:function(){var t;return t=$(".dropdownjs"),t.find(".fakeinput").val(fontFamilyOptions[e.user.fontFamily].name),t.find("li").removeClass("selected"),t.find("[value='number:"+e.user.fontFamily+"']").addClass("selected")}})}),e.selectTheme=function(t){return localStorage.theme=e.user.theme=t}}}}return e}(),angular.module("app").directive("userProfile",[UserProfile]),setTimeout(function(){var e;return e=document.createElement("script"),e.setAttribute("src","/dest/app/utils/loadLeftovers.js"),e.setAttribute("async",""),document.body.appendChild(e)},parseInt(localStorage.leftoversTimeout||"500")),localStorage.leftoversTimeout="0";