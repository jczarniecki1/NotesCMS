if(function(t,e,n){"use strict";function o(t,e,o){if(p.matchesSelector(t,e.selector)&&(t._id===n&&(t._id=f++),-1==e.firedElems.indexOf(t._id))){if(e.options.onceOnly){if(0!==e.firedElems.length)return;e.me.unbindEventWithSelectorAndCallback.call(e.target,e.selector,e.callback)}e.firedElems.push(t._id),o.push({callback:e.callback,elem:t})}}function a(t,e,n){for(var r,i=0;r=t[i];i++)o(r,e,n),r.childNodes.length>0&&a(r.childNodes,e,n)}function r(t){for(var e,n=0;e=t[n];n++)e.callback.call(e.elem)}function i(t,e){t.forEach(function(t){var n=t.addedNodes,i=t.target,s=[];null!==n&&n.length>0?a(n,e,s):"attributes"===t.type&&o(i,e,s),r(s)})}function s(t,e){t.forEach(function(t){var n=t.removedNodes,o=(t.target,[]);null!==n&&n.length>0&&a(n,e,o),r(o)})}function l(t){var e={attributes:!1,childList:!0,subtree:!0};return t.fireOnAttributesModification&&(e.attributes=!0),e}function c(t){var e={childList:!0,subtree:!0};return e}function u(t,e){var n={};for(var o in t)n[o]=t[o];for(var o in e)n[o]=e[o];return n}function d(t){t.arrive=y.bindEvent,p.addMethod(t,"unbindArrive",y.unbindEvent),p.addMethod(t,"unbindArrive",y.unbindEventWithSelectorOrCallback),p.addMethod(t,"unbindArrive",y.unbindEventWithSelectorAndCallback),t.leave=b.bindEvent,p.addMethod(t,"unbindLeave",b.unbindEvent),p.addMethod(t,"unbindLeave",b.unbindEventWithSelectorOrCallback),p.addMethod(t,"unbindLeave",b.unbindEventWithSelectorAndCallback)}if(t.MutationObserver&&"undefined"!=typeof HTMLElement){var f=0,p=function(){var t=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(e,n){return e instanceof HTMLElement&&t.call(e,n)},addMethod:function(t,e,n){var o=t[e];t[e]=function(){return n.length==arguments.length?n.apply(this,arguments):"function"==typeof o?o.apply(this,arguments):void 0}}}}(),h=function(){var t=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return t.prototype.addEvent=function(t,e,n,o){var a={target:t,selector:e,options:n,callback:o,firedElems:[]};return this._beforeAdding&&this._beforeAdding(a),this._eventsBucket.push(a),a},t.prototype.removeEvent=function(t){for(var e,n=this._eventsBucket.length-1;e=this._eventsBucket[n];n--)t(e)&&(this._beforeRemoving&&this._beforeRemoving(e),this._eventsBucket.splice(n,1))},t.prototype.beforeAdding=function(t){this._beforeAdding=t},t.prototype.beforeRemoving=function(t){this._beforeRemoving=t},t}(),g=function(e,n,o){function a(t){return"number"!=typeof t.length&&(t=[t]),t}var r=new h,i=this;return r.beforeAdding(function(n){{var a,r=n.target;n.selector,n.callback}(r===t.document||r===t)&&(r=document.getElementsByTagName("html")[0]),a=new MutationObserver(function(t){o.call(this,t,n)});var s=e(n.options);a.observe(r,s),n.observer=a,n.me=i}),r.beforeRemoving(function(t){t.observer.disconnect()}),this.bindEvent=function(t,e,o){"undefined"==typeof o?(o=e,e=n):e=u(n,e);for(var i=a(this),s=0;s<i.length;s++)r.addEvent(i[s],t,e,o)},this.unbindEvent=function(){var t=a(this);r.removeEvent(function(e){for(var n=0;n<t.length;n++)if(e.target===t[n])return!0;return!1})},this.unbindEventWithSelectorOrCallback=function(t){var e,n=a(this),o=t;e="function"==typeof t?function(t){for(var e=0;e<n.length;e++)if(t.target===n[e]&&t.callback===o)return!0;return!1}:function(e){for(var o=0;o<n.length;o++)if(e.target===n[o]&&e.selector===t)return!0;return!1},r.removeEvent(e)},this.unbindEventWithSelectorAndCallback=function(t,e){var n=a(this);r.removeEvent(function(o){for(var a=0;a<n.length;a++)if(o.target===n[a]&&o.selector===t&&o.callback===e)return!0;return!1})},this},m={fireOnAttributesModification:!1,onceOnly:!1},v={},y=new g(l,m,i),b=new g(c,v,s);e&&d(e.fn),d(HTMLElement.prototype),d(NodeList.prototype),d(HTMLCollection.prototype),d(HTMLDocument.prototype),d(Window.prototype)}}(this,"undefined"==typeof jQuery?null:jQuery,void 0),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,o=this;t(this).one("bsTransitionEnd",function(){n=!0});var a=function(){n||t(o).trigger(t.support.transition.end)};return setTimeout(a,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),a=n.data("bs.alert");a||n.data("bs.alert",a=new o(this)),"string"==typeof e&&a[e].call(n)})}var n='[data-dismiss="alert"]',o=function(e){t(e).on("click",n,this.close)};o.VERSION="3.3.5",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function n(){i.detach().trigger("closed.bs.alert").remove()}var a=t(this),r=a.attr("data-target");r||(r=a.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var i=t(r);e&&e.preventDefault(),i.length||(i=a.closest(".alert")),i.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",n).emulateTransitionEnd(o.TRANSITION_DURATION):n())};var a=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=a,this},t(document).on("click.bs.alert.data-api",n,o.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),a=o.data("bs.button"),r="object"==typeof e&&e;a||o.data("bs.button",a=new n(this,r)),"toggle"==e?a.toggle():e&&a.setState(e)})}var n=function(e,o){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,o),this.isLoading=!1};n.VERSION="3.3.5",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",o=this.$element,a=o.is("input")?"val":"html",r=o.data();e+="Text",null==r.resetText&&o.data("resetText",o[a]()),setTimeout(t.proxy(function(){o[a](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,o.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var o=t(n.target);o.hasClass("btn")||(o=o.closest(".btn")),e.call(o,"toggle"),t(n.target).is('input[type="radio"]')||t(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),a=o.data("bs.carousel"),r=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e),i="string"==typeof e?e:r.slide;a||o.data("bs.carousel",a=new n(this,r)),"number"==typeof e?a.to(e):i?a[i]():r.interval&&a.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),o="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(o&&!this.options.wrap)return e;var a="prev"==t?-1:1,r=(n+a)%this.$items.length;return this.$items.eq(r)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,o){var a=this.$element.find(".item.active"),r=o||this.getItemForDirection(e,a),i=this.interval,s="next"==e?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var c=r[0],u=t.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,i&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(r)]);d&&d.addClass("active")}var f=t.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,a.addClass(s),r.addClass(s),a.one("bsTransitionEnd",function(){r.removeClass([e,s].join(" ")).addClass("active"),a.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(f)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(a.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(f)),i&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var a=function(n){var o,a=t(this),r=t(a.attr("data-target")||(o=a.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var i=t.extend({},r.data(),a.data()),s=a.attr("data-slide-to");s&&(i.interval=!1),e.call(r,i),s&&r.data("bs.carousel").to(s),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,o=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(o)}function n(e){return this.each(function(){var n=t(this),a=n.data("bs.collapse"),r=t.extend({},o.DEFAULTS,n.data(),"object"==typeof e&&e);!a&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),a||n.data("bs.collapse",a=new o(this,r)),"string"==typeof e&&a[e]()})}var o=function(e,n){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="3.3.5",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,a=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(a&&a.length&&(e=a.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){a&&a.length&&(n.call(a,"hide"),e||a.data("bs.collapse",null));var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[i](this.$element[0][l])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(o.TRANSITION_DURATION):a.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,o){var a=t(o);this.addAriaAndCollapsedClass(e(a),a)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var a=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=a,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var a=t(this);a.attr("data-target")||o.preventDefault();var r=e(a),i=r.data("bs.collapse"),s=i?"toggle":a.data();n.call(r,s)})}(jQuery),+function(t){"use strict";function e(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var o=n&&t(n);return o&&o.length?o:e.parent()}function n(n){n&&3===n.which||(t(a).remove(),t(r).each(function(){var o=t(this),a=e(o),r={relatedTarget:this};a.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(a[0],n.target)||(a.trigger(n=t.Event("hide.bs.dropdown",r)),n.isDefaultPrevented()||(o.attr("aria-expanded","false"),a.removeClass("open").trigger("hidden.bs.dropdown",r))))}))}function o(e){return this.each(function(){var n=t(this),o=n.data("bs.dropdown");o||n.data("bs.dropdown",o=new i(this)),"string"==typeof e&&o[e].call(n)})}var a=".dropdown-backdrop",r='[data-toggle="dropdown"]',i=function(e){t(e).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.5",i.prototype.toggle=function(o){var a=t(this);if(!a.is(".disabled, :disabled")){var r=e(a),i=r.hasClass("open");if(n(),!i){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",n);var s={relatedTarget:this};if(r.trigger(o=t.Event("show.bs.dropdown",s)),o.isDefaultPrevented())return;a.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},i.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var o=t(this);if(n.preventDefault(),n.stopPropagation(),!o.is(".disabled, :disabled")){var a=e(o),i=a.hasClass("open");if(!i&&27!=n.which||i&&27==n.which)return 27==n.which&&a.find(r).trigger("focus"),o.trigger("click");var s=" li:not(.disabled):visible a",l=a.find(".dropdown-menu"+s);if(l.length){var c=l.index(n.target);38==n.which&&c>0&&c--,40==n.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=i,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,i.prototype.toggle).on("keydown.bs.dropdown.data-api",r,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,o){return this.each(function(){var a=t(this),r=a.data("bs.modal"),i=t.extend({},n.DEFAULTS,a.data(),"object"==typeof e&&e);r||a.data("bs.modal",r=new n(this,i)),"string"==typeof e?r[e](o):i.show&&r.show(o)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var o=this,a=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var a=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),a&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});a?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):o.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var o=this,a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&a;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+a).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var i=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):i()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var o=t(this),a=o.attr("href"),r=t(o.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),i=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(a)&&a},r.data(),o.data());o.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(r,i,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),a=o.data("bs.tooltip"),r="object"==typeof e&&e;(a||!/destroy|hide/.test(e))&&(a||o.data("bs.tooltip",a=new n(this,r)),"string"==typeof e&&a[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,o){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var a=this.options.trigger.split(" "),r=a.length;r--;){var i=a[r];if("click"==i)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=i){var s="hover"==i?"mouseenter":"focusin",l="hover"==i?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,o){n[t]!=o&&(e[t]=o)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var a=this,r=this.tip(),i=this.getUID(this.type);this.setContent(),r.attr("id",i),this.$element.attr("aria-describedby",i),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(s);c&&(s=s.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=r[0].offsetWidth,f=r[0].offsetHeight;if(c){var p=s,h=this.getPosition(this.$viewport);s="bottom"==s&&u.bottom+f>h.bottom?"top":"top"==s&&u.top-f<h.top?"bottom":"right"==s&&u.right+d>h.width?"left":"left"==s&&u.left-d<h.left?"right":s,r.removeClass(p).addClass(s)}var g=this.getCalculatedOffset(s,u,d,f);this.applyPlacement(g,s);var m=function(){var t=a.hoverState;a.$element.trigger("shown.bs."+a.type),a.hoverState=null,"out"==t&&a.leave(a)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(e,n){var o=this.tip(),a=o[0].offsetWidth,r=o[0].offsetHeight,i=parseInt(o.css("margin-top"),10),s=parseInt(o.css("margin-left"),10);isNaN(i)&&(i=0),isNaN(s)&&(s=0),e.top+=i,e.left+=s,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,c=o[0].offsetHeight;"top"==n&&c!=r&&(e.top=e.top+r-c);var u=this.getViewportAdjustedDelta(n,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var d=/top|bottom/.test(n),f=d?2*u.left-a+l:2*u.top-r+c,p=d?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(f,o[0][p],d)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function o(){"in"!=a.hoverState&&r.detach(),a.$element.removeAttr("aria-describedby").trigger("hidden.bs."+a.type),e&&e()}var a=this,r=t(this.$tip),i=t.Event("hide.bs."+this.type);return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],o="BODY"==n.tagName,a=n.getBoundingClientRect();null==a.width&&(a=t.extend({},a,{width:a.right-a.left,height:a.bottom-a.top}));var r=o?{top:0,left:0}:e.offset(),i={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},a,i,s,r)},n.prototype.getCalculatedOffset=function(t,e,n,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-n}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,o){var a={top:0,left:0};if(!this.$viewport)return a;var r=this.options.viewport&&this.options.viewport.padding||0,i=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-r-i.scroll,l=e.top+r-i.scroll+o;s<i.top?a.top=i.top-s:l>i.top+i.height&&(a.top=i.top+i.height-l)}else{var c=e.left-r,u=e.left+r+n;c<i.left?a.left=i.left-c:u>i.right&&(a.left=i.left+i.width-u)}return a},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n);

},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),a=o.data("bs.popover"),r="object"==typeof e&&e;(a||!/destroy|hide/.test(e))&&(a||o.data("bs.popover",a=new n(this,r)),"string"==typeof e&&a[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.5",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),+function(t){"use strict";function e(n,o){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var o=t(this),a=o.data("bs.scrollspy"),r="object"==typeof n&&n;a||o.data("bs.scrollspy",a=new e(this,r)),"string"==typeof n&&a[n]()})}e.VERSION="3.3.5",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),a=e.data("target")||e.attr("href"),r=/^#./.test(a)&&t(a);return r&&r.length&&r.is(":visible")&&[[r[n]().top+o,a]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),o=this.options.offset+n-this.$scrollElement.height(),a=this.offsets,r=this.targets,i=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=o)return i!=(t=r[r.length-1])&&this.activate(t);if(i&&e<a[0])return this.activeTarget=null,this.clear();for(t=a.length;t--;)i!=r[t]&&e>=a[t]&&(void 0===a[t+1]||e<a[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(n).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),a=o.data("bs.tab");a||o.data("bs.tab",a=new n(this)),"string"==typeof e&&a[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var a=n.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),i=t.Event("show.bs.tab",{relatedTarget:a[0]});if(a.trigger(r),e.trigger(i),!i.isDefaultPrevented()&&!r.isDefaultPrevented()){var s=t(o);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){a.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:a[0]})})}}},n.prototype.activate=function(e,o,a){function r(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),a&&a()}var i=o.find("> .active"),s=a&&t.support.transition&&(i.length&&i.hasClass("fade")||!!o.find("> .fade").length);i.length&&s?i.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),i.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var a=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),a=o.data("bs.affix"),r="object"==typeof e&&e;a||o.data("bs.affix",a=new n(this,r)),"string"==typeof e&&a[e]()})}var n=function(e,o){this.options=t.extend({},n.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.5",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,o){var a=this.$target.scrollTop(),r=this.$element.offset(),i=this.$target.height();if(null!=n&&"top"==this.affixed)return n>a?"top":!1;if("bottom"==this.affixed)return null!=n?a+this.unpin<=r.top?!1:"bottom":t-o>=a+i?!1:"bottom";var s=null==this.affixed,l=s?a:r.top,c=s?i:e;return null!=n&&n>=a?"top":null!=o&&l+c>=t-o?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,a=o.top,r=o.bottom,i=Math.max(t(document).height(),t(document.body).height());"object"!=typeof o&&(r=a=o),"function"==typeof a&&(a=o.top(this.$element)),"function"==typeof r&&(r=o.bottom(this.$element));var s=this.getState(i,e,a,r);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:i-e-r})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),o=n.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(n,o)})})}(jQuery),function(t){function e(t){return"undefined"==typeof t.which?!0:"number"==typeof t.which&&t.which>0?!t.ctrlKey&&!t.metaKey&&!t.altKey&&8!=t.which&&9!=t.which:!1}t.expr[":"].notmdproc=function(e){return t(e).data("mdproc")?!1:!0},t.material={options:{input:!0,ripples:!0,checkbox:!0,togglebutton:!0,radio:!0,arrive:!0,autofill:!1,withRipples:[".btn:not(.btn-link)",".card-image",".navbar a:not(.withoutripple)",".dropdown-menu a",".nav-tabs a:not(.withoutripple)",".withripple"].join(","),inputElements:"input.form-control, textarea.form-control, select.form-control",checkboxElements:".checkbox > label > input[type=checkbox]",togglebuttonElements:".togglebutton > label > input[type=checkbox]",radioElements:".radio > label > input[type=radio]"},checkbox:function(e){t(e?e:this.options.checkboxElements).filter(":notmdproc").data("mdproc",!0).after("<span class=checkbox-material><span class=check></span></span>")},togglebutton:function(e){t(e?e:this.options.togglebuttonElements).filter(":notmdproc").data("mdproc",!0).after("<span class=toggle></span>")},radio:function(e){t(e?e:this.options.radioElements).filter(":notmdproc").data("mdproc",!0).after("<span class=circle></span><span class=check></span>")},input:function(n){t(n?n:this.options.inputElements).filter(":notmdproc").data("mdproc",!0).each(function(){var e=t(this);if(t(this).attr("data-hint")||e.hasClass("floating-label")){if(e.wrap("<div class=form-control-wrapper></div>"),e.after("<span class=material-input></span>"),e.hasClass("floating-label")){var n=e.attr("placeholder");e.attr("placeholder",null).removeClass("floating-label"),e.after("<div class=floating-label>"+n+"</div>")}if(e.attr("data-hint")&&e.after("<div class=hint>"+e.attr("data-hint")+"</div>"),(null===e.val()||"undefined"==e.val()||""===e.val())&&e.addClass("empty"),e.parent().next().is("[type=file]")){e.parent().addClass("fileinput");var o=e.parent().next().detach();e.after(o)}}}),t(document).on("change",".checkbox input[type=checkbox]",function(){t(this).blur()}).on("keydown paste",".form-control",function(n){e(n)&&t(this).removeClass("empty")}).on("keyup change",".form-control",function(){var e=t(this);""===e.val()&&"undefined"!=typeof e[0].checkValidity&&e[0].checkValidity()?e.addClass("empty"):e.removeClass("empty")}).on("focus",".form-control-wrapper.fileinput",function(){t(this).find("input").addClass("focus")}).on("blur",".form-control-wrapper.fileinput",function(){t(this).find("input").removeClass("focus")}).on("change",".form-control-wrapper.fileinput [type=file]",function(){var e="";t.each(t(this)[0].files,function(t,n){e+=n.name+", "}),e=e.substring(0,e.length-2),e?t(this).prev().removeClass("empty"):t(this).prev().addClass("empty"),t(this).prev().val(e)})},ripples:function(e){t(e?e:this.options.withRipples).ripples()},autofill:function(){var e=setInterval(function(){t("input[type!=checkbox]").each(function(){t(this).val()&&t(this).val()!==t(this).attr("value")&&t(this).trigger("change")})},100);setTimeout(function(){clearInterval(e)},1e4);var n;t(document).on("focus","input",function(){var e=t(this).parents("form").find("input").not("[type=file]");n=setInterval(function(){e.each(function(){t(this).val()!==t(this).attr("value")&&t(this).trigger("change")})},100)}).on("blur","input",function(){clearInterval(n)})},init:function(){t.fn.ripples&&this.options.ripples&&this.ripples(),this.options.input&&this.input(),this.options.checkbox&&this.checkbox(),this.options.togglebutton&&this.togglebutton(),this.options.radio&&this.radio(),this.options.autofill&&this.autofill(),document.arrive&&this.options.arrive&&(t.fn.ripples&&this.options.ripples&&t(document).arrive(this.options.withRipples,function(){t.material.ripples(t(this))}),this.options.input&&t(document).arrive(this.options.inputElements,function(){t.material.input(t(this))}),this.options.checkbox&&t(document).arrive(this.options.checkboxElements,function(){t.material.checkbox(t(this))}),this.options.radio&&t(document).arrive(this.options.radioElements,function(){t.material.radio(t(this))}),this.options.togglebutton&&t(document).arrive(this.options.togglebuttonElements,function(){t.material.togglebutton(t(this))}))}}}(jQuery),function(t,e,n,o){"use strict";function a(e,n){i=this,this.element=t(e),this.options=t.extend({},s,n),this._defaults=s,this._name=r,this.init()}var r="ripples",i=null,s={};a.prototype.init=function(){var n=this.element;n.on("mousedown touchstart",function(o){if(!i.isTouch()||"mousedown"!==o.type){n.find(".ripple-wrapper").length||n.append('<div class="ripple-wrapper"></div>');var a=n.children(".ripple-wrapper"),r=i.getRelY(a,o),s=i.getRelX(a,o);if(r||s){var l=i.getRipplesColor(n),c=t("<div></div>");c.addClass("ripple").css({left:s,top:r,"background-color":l}),a.append(c),function(){return e.getComputedStyle(c[0]).opacity}(),i.rippleOn(n,c),setTimeout(function(){i.rippleEnd(c)},500),n.on("mouseup mouseleave touchend",function(){c.data("mousedown","off"),"off"===c.data("animating")&&i.rippleOut(c)})}}})},a.prototype.getNewSize=function(t,e){return Math.max(t.outerWidth(),t.outerHeight())/e.outerWidth()*2.5},a.prototype.getRelX=function(t,e){var n=t.offset();return i.isTouch()?(e=e.originalEvent,1!==e.touches.length?e.touches[0].pageX-n.left:!1):e.pageX-n.left},a.prototype.getRelY=function(t,e){var n=t.offset();return i.isTouch()?(e=e.originalEvent,1!==e.touches.length?e.touches[0].pageY-n.top:!1):e.pageY-n.top},a.prototype.getRipplesColor=function(t){var n=t.data("ripple-color")?t.data("ripple-color"):e.getComputedStyle(t[0]).color;return n},a.prototype.hasTransitionSupport=function(){var t=n.body||n.documentElement,e=t.style,a=e.transition!==o||e.WebkitTransition!==o||e.MozTransition!==o||e.MsTransition!==o||e.OTransition!==o;return a},a.prototype.isTouch=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},a.prototype.rippleEnd=function(t){t.data("animating","off"),"off"===t.data("mousedown")&&i.rippleOut(t)},a.prototype.rippleOut=function(t){t.off(),i.hasTransitionSupport()?t.addClass("ripple-out"):t.animate({opacity:0},100,function(){t.trigger("transitionend")}),t.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){t.remove()})},a.prototype.rippleOn=function(t,e){var n=i.getNewSize(t,e);i.hasTransitionSupport()?e.css({"-ms-transform":"scale("+n+")","-moz-transform":"scale("+n+")","-webkit-transform":"scale("+n+")",transform:"scale("+n+")"}).addClass("ripple-on").data("animating","on").data("mousedown","on"):e.animate({width:2*Math.max(t.outerWidth(),t.outerHeight()),height:2*Math.max(t.outerWidth(),t.outerHeight()),"margin-left":-1*Math.max(t.outerWidth(),t.outerHeight()),"margin-top":-1*Math.max(t.outerWidth(),t.outerHeight()),opacity:.2},500,function(){e.trigger("transitionend")})},t.fn.ripples=function(e){return this.each(function(){t.data(this,"plugin_"+r)||t.data(this,"plugin_"+r,new a(this,e))})}}(jQuery,window,document),!function(t,e,n){"use strict";!function o(t,e,n){function a(i,s){if(!e[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(r)return r(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=e[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return a(n?n:e)},u,u.exports,o,t,e,n)}return e[i].exports}for(var r="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(o){var a,r,i,s,l=function(t){return t&&t.__esModule?t:{"default":t}},c=o("./modules/handle-dom"),u=o("./modules/utils"),d=o("./modules/handle-swal-dom"),f=o("./modules/handle-click"),p=o("./modules/handle-key"),h=l(p),g=o("./modules/default-params"),m=l(g),v=o("./modules/set-params"),y=l(v);i=s=function(){function o(t){var e=i;return e[t]===n?m["default"][t]:e[t]}var i=arguments[0];if(c.addClass(e.body,"stop-scrolling"),d.resetInput(),i===n)return u.logStr("SweetAlert expects at least 1 attribute!"),!1;var s=u.extend({},m["default"]);switch(typeof i){case"string":s.title=i,s.text=arguments[1]||"",s.type=arguments[2]||"";break;case"object":if(i.title===n)return u.logStr('Missing "title" argument!'),!1;s.title=i.title;for(var l in m["default"])s[l]=o(l);s.confirmButtonText=s.showCancelButton?"Confirm":m["default"].confirmButtonText,s.confirmButtonText=o("confirmButtonText"),s.doneFunction=arguments[1]||null;break;default:return u.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof i),!1}y["default"](s),d.fixVerticalPosition(),d.openModal(arguments[1]);for(var p=d.getModal(),g=p.querySelectorAll("button"),v=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],b=function(t){return f.handleButton(t,s,p)},w=0;w<g.length;w++)for(var C=0;C<v.length;C++){var E=v[C];g[w][E]=b}d.getOverlay().onclick=b,a=t.onkeydown;var T=function(t){return h["default"](t,s,p)};t.onkeydown=T,t.onfocus=function(){setTimeout(function(){r!==n&&(r.focus(),r=n)},0)}},i.setDefaults=s.setDefaults=function(t){if(!t)throw new Error("userParams is required");if("object"!=typeof t)throw new Error("userParams has to be a object");u.extend(m["default"],t)},i.close=s.close=function(){var o=d.getModal();c.fadeOut(d.getOverlay(),5),c.fadeOut(o,5),c.removeClass(o,"showSweetAlert"),c.addClass(o,"hideSweetAlert"),c.removeClass(o,"visible");var i=o.querySelector(".sa-icon.sa-success");c.removeClass(i,"animate"),c.removeClass(i.querySelector(".sa-tip"),"animateSuccessTip"),c.removeClass(i.querySelector(".sa-long"),"animateSuccessLong");var s=o.querySelector(".sa-icon.sa-error");c.removeClass(s,"animateErrorIcon"),c.removeClass(s.querySelector(".sa-x-mark"),"animateXMark");var l=o.querySelector(".sa-icon.sa-warning");return c.removeClass(l,"pulseWarning"),c.removeClass(l.querySelector(".sa-body"),"pulseWarningIns"),c.removeClass(l.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var t=o.getAttribute("data-custom-class");c.removeClass(o,t)},300),c.removeClass(e.body,"stop-scrolling"),t.onkeydown=a,t.previousActiveElement&&t.previousActiveElement.focus(),r=n,clearTimeout(o.timeout),!0},i.showInputError=s.showInputError=function(t){var e=d.getModal(),n=e.querySelector(".sa-input-error");c.addClass(n,"show");var o=e.querySelector(".sa-error-container");c.addClass(o,"show"),o.querySelector("p").innerHTML=t,e.querySelector("input").focus()},i.resetInputError=s.resetInputError=function(t){if(t&&13===t.keyCode)return!1;var e=d.getModal(),n=e.querySelector(".sa-input-error");c.removeClass(n,"show");var o=e.querySelector(".sa-error-container");c.removeClass(o,"show")},"undefined"!=typeof t?t.sweetAlert=t.swal=i:u.logStr("SweetAlert is a frontend module!")},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var o={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#AEDEF4",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:""};n["default"]=o,e.exports=n["default"]},{}],3:[function(e,n,o){Object.defineProperty(o,"__esModule",{value:!0});var a=e("./utils"),r=(e("./handle-swal-dom"),e("./handle-dom")),i=function(e,n,o){function i(t){h&&n.confirmButtonColor&&(p.style.backgroundColor=t)}var c,u,d,f=e||t.event,p=f.target||f.srcElement,h=-1!==p.className.indexOf("confirm"),g=-1!==p.className.indexOf("sweet-overlay"),m=r.hasClass(o,"visible"),v=n.doneFunction&&"true"===o.getAttribute("data-has-done-function");switch(h&&n.confirmButtonColor&&(c=n.confirmButtonColor,u=a.colorLuminance(c,-.04),d=a.colorLuminance(c,-.14)),f.type){case"mouseover":i(u);break;case"mouseout":i(c);break;case"mousedown":i(d);break;case"mouseup":i(u);break;case"focus":var y=o.querySelector("button.confirm"),b=o.querySelector("button.cancel");h?b.style.boxShadow="none":y.style.boxShadow="none";break;case"click":var w=o===p,C=r.isDescendant(o,p);if(!w&&!C&&m&&!n.allowOutsideClick)break;h&&v&&m?s(o,n):v&&m||g?l(o,n):r.isDescendant(o,p)&&"BUTTON"===p.tagName&&sweetAlert.close()}},s=function(t,e){var n=!0;r.hasClass(t,"show-input")&&(n=t.querySelector("input").value,n||(n="")),e.doneFunction(n),e.closeOnConfirm&&sweetAlert.close()},l=function(t,e){var n=String(e.doneFunction).replace(/\s/g,""),o="function("===n.substring(0,9)&&")"!==n.substring(9,10);o&&e.doneFunction(!1),e.closeOnCancel&&sweetAlert.close()};o["default"]={handleButton:i,handleConfirm:s,handleCancel:l},n.exports=o["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(n,o,a){Object.defineProperty(a,"__esModule",{value:!0});var r=function(t,e){return new RegExp(" "+e+" ").test(" "+t.className+" ")},i=function(t,e){r(t,e)||(t.className+=" "+e)},s=function(t,e){var n=" "+t.className.replace(/[\t\r\n]/g," ")+" ";if(r(t,e)){for(;n.indexOf(" "+e+" ")>=0;)n=n.replace(" "+e+" "," ");t.className=n.replace(/^\s+|\s+$/g,"")}},l=function(t){var n=e.createElement("div");return n.appendChild(e.createTextNode(t)),n.innerHTML},c=function(t){t.style.opacity="",t.style.display="block"},u=function(t){if(t&&!t.length)return c(t);for(var e=0;e<t.length;++e)c(t[e])},d=function(t){t.style.opacity="",t.style.display="none"},f=function(t){if(t&&!t.length)return d(t);for(var e=0;e<t.length;++e)d(t[e])},p=function(t,e){for(var n=e.parentNode;null!==n;){if(n===t)return!0;n=n.parentNode}return!1},h=function(t){t.style.left="-9999px",t.style.display="block";var e,n=t.clientHeight;return e="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(t).getPropertyValue("padding-top"),10):parseInt(t.currentStyle.padding),t.style.left="",t.style.display="none","-"+parseInt((n+e)/2)+"px"},g=function(t,e){if(+t.style.opacity<1){e=e||16,t.style.opacity=0,t.style.display="block";var n=+new Date,o=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){t.style.opacity=+t.style.opacity+(new Date-n)/100,n=+new Date,+t.style.opacity<1&&setTimeout(o,e)});o()}t.style.display="block"},m=function(t,e){e=e||16,t.style.opacity=1;var n=+new Date,o=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){t.style.opacity=+t.style.opacity-(new Date-n)/100,n=+new Date,+t.style.opacity>0?setTimeout(o,e):t.style.display="none"});o()},v=function(n){if("function"==typeof MouseEvent){var o=new MouseEvent("click",{view:t,bubbles:!1,cancelable:!0});n.dispatchEvent(o)}else if(e.createEvent){var a=e.createEvent("MouseEvents");a.initEvent("click",!1,!1),n.dispatchEvent(a)}else e.createEventObject?n.fireEvent("onclick"):"function"==typeof n.onclick&&n.onclick()},y=function(e){"function"==typeof e.stopPropagation?(e.stopPropagation(),e.preventDefault()):t.event&&t.event.hasOwnProperty("cancelBubble")&&(t.event.cancelBubble=!0)};a.hasClass=r,a.addClass=i,a.removeClass=s,a.escapeHtml=l,a._show=c,a.show=u,a._hide=d,a.hide=f,a.isDescendant=p,a.getTopMargin=h,a.fadeIn=g,a.fadeOut=m,a.fireClick=v,a.stopEventPropagation=y},{}],5:[function(e,o,a){Object.defineProperty(a,"__esModule",{value:!0});var r=e("./handle-dom"),i=e("./handle-swal-dom"),s=function(e,o,a){var s=e||t.event,l=s.keyCode||s.which,c=a.querySelector("button.confirm"),u=a.querySelector("button.cancel"),d=a.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(l)){for(var f=s.target||s.srcElement,p=-1,h=0;h<d.length;h++)if(f===d[h]){p=h;break}9===l?(f=-1===p?c:p===d.length-1?d[0]:d[p+1],r.stopEventPropagation(s),f.focus(),o.confirmButtonColor&&i.setFocusStyle(f,o.confirmButtonColor)):13===l?("INPUT"===f.tagName&&(f=c,c.focus()),f=-1===p?c:n):27===l&&o.allowEscapeKey===!0?(f=u,r.fireClick(f,s)):f=n}};a["default"]=s,o.exports=a["default"]},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(n,o,a){var r=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(a,"__esModule",{value:!0});var i=n("./utils"),s=n("./handle-dom"),l=n("./default-params"),c=r(l),u=n("./injected-html"),d=r(u),f=".sweet-alert",p=".sweet-overlay",h=function(){var t=e.createElement("div");for(t.innerHTML=d["default"];t.firstChild;)e.body.appendChild(t.firstChild)},g=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=e.querySelector(f);return t||(h(),t=g()),t}),m=function(){var t=g();return t?t.querySelector("input"):void 0},v=function(){return e.querySelector(p)},y=function(t,e){var n=i.hexToRgb(e);t.style.boxShadow="0 0 2px rgba("+n+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},b=function(n){var o=g();s.fadeIn(v(),10),s.show(o),s.addClass(o,"showSweetAlert"),s.removeClass(o,"hideSweetAlert"),t.previousActiveElement=e.activeElement;var a=o.querySelector("button.confirm");a.focus(),setTimeout(function(){s.addClass(o,"visible")},500);var r=o.getAttribute("data-timer");if("null"!==r&&""!==r){var i=n;o.timeout=setTimeout(function(){var t=(i||null)&&"true"===o.getAttribute("data-has-done-function");t?i(null):sweetAlert.close()},r)}},w=function(){var t=g(),e=m();s.removeClass(t,"show-input"),e.value=c["default"].inputValue,e.setAttribute("type",c["default"].inputType),e.setAttribute("placeholder",c["default"].inputPlaceholder),C()},C=function(t){if(t&&13===t.keyCode)return!1;var e=g(),n=e.querySelector(".sa-input-error");s.removeClass(n,"show");var o=e.querySelector(".sa-error-container");s.removeClass(o,"show")},E=function(){var t=g();t.style.marginTop=s.getTopMargin(g())};a.sweetAlertInitialize=h,a.getModal=g,a.getOverlay=v,a.getInput=m,a.setFocusStyle=y,a.openModal=b,a.resetInput=w,a.resetInputError=C,a.fixVerticalPosition=E},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var o='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <button class="confirm" tabIndex="1">OK</button>\n    </div></div>';n["default"]=o,e.exports=n["default"]},{}],8:[function(t,e,o){Object.defineProperty(o,"__esModule",{value:!0});var a=t("./utils"),r=t("./handle-swal-dom"),i=t("./handle-dom"),s=["error","warning","info","success","input","prompt"],l=function(t){var e=r.getModal(),o=e.querySelector("h2"),l=e.querySelector("p"),c=e.querySelector("button.cancel"),u=e.querySelector("button.confirm");if(o.innerHTML=t.html?t.title:i.escapeHtml(t.title).split("\n").join("<br>"),l.innerHTML=t.html?t.text:i.escapeHtml(t.text||"").split("\n").join("<br>"),t.text&&i.show(l),t.customClass)i.addClass(e,t.customClass),e.setAttribute("data-custom-class",t.customClass);else{var d=e.getAttribute("data-custom-class");i.removeClass(e,d),e.setAttribute("data-custom-class","")}if(i.hide(e.querySelectorAll(".sa-icon")),t.type&&!a.isIE8()){var f=function(){for(var o=!1,a=0;a<s.length;a++)if(t.type===s[a]){o=!0;break}if(!o)return logStr("Unknown alert type: "+t.type),{v:!1};var l=["success","error","warning","info"],c=n;-1!==l.indexOf(t.type)&&(c=e.querySelector(".sa-icon.sa-"+t.type),i.show(c));var u=r.getInput();switch(t.type){case"success":i.addClass(c,"animate"),i.addClass(c.querySelector(".sa-tip"),"animateSuccessTip"),i.addClass(c.querySelector(".sa-long"),"animateSuccessLong");break;case"error":i.addClass(c,"animateErrorIcon"),i.addClass(c.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":i.addClass(c,"pulseWarning"),i.addClass(c.querySelector(".sa-body"),"pulseWarningIns"),i.addClass(c.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":u.setAttribute("type",t.inputType),u.value=t.inputValue,u.setAttribute("placeholder",t.inputPlaceholder),i.addClass(e,"show-input"),setTimeout(function(){u.focus(),u.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof f)return f.v}if(t.imageUrl){var p=e.querySelector(".sa-icon.sa-custom");p.style.backgroundImage="url("+t.imageUrl+")",i.show(p);var h=80,g=80;if(t.imageSize){var m=t.imageSize.toString().split("x"),v=m[0],y=m[1];v&&y?(h=v,g=y):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+t.imageSize)}p.setAttribute("style",p.getAttribute("style")+"width:"+h+"px; height:"+g+"px")}e.setAttribute("data-has-cancel-button",t.showCancelButton),t.showCancelButton?c.style.display="inline-block":i.hide(c),e.setAttribute("data-has-confirm-button",t.showConfirmButton),t.showConfirmButton?u.style.display="inline-block":i.hide(u),t.cancelButtonText&&(c.innerHTML=i.escapeHtml(t.cancelButtonText)),t.confirmButtonText&&(u.innerHTML=i.escapeHtml(t.confirmButtonText)),t.confirmButtonColor&&(u.style.backgroundColor=t.confirmButtonColor,r.setFocusStyle(u,t.confirmButtonColor)),e.setAttribute("data-allow-outside-click",t.allowOutsideClick);var b=t.doneFunction?!0:!1;e.setAttribute("data-has-done-function",b),t.animation?"string"==typeof t.animation?e.setAttribute("data-animation",t.animation):e.setAttribute("data-animation","pop"):e.setAttribute("data-animation","none"),e.setAttribute("data-timer",t.timer)};o["default"]=l,e.exports=o["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(e,n,o){Object.defineProperty(o,"__esModule",{value:!0});var a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},r=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16):null},i=function(){return t.attachEvent&&!t.addEventListener},s=function(e){t.console&&t.console.log("SweetAlert: "+e)},l=function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;var n,o,a="#";for(o=0;3>o;o++)n=parseInt(t.substr(2*o,2),16),n=Math.round(Math.min(Math.max(0,n+n*e),255)).toString(16),a+=("00"+n).substr(n.length);return a};o.extend=a,o.hexToRgb=r,o.isIE8=i,o.logStr=s,o.colorLuminance=l},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document),angular.module("angularjs.bootstrap.tagsinput",[]).factory("tagsInput",["TagsInputConstants",function(t){function e(e){var n=e;n.dom.$container.unbind(),n.dom.$container.on("click",function(){n.dom.$tagInput.focus()}),n.dom.$tagInput.on("blur",function(){var t=$.Event("keydown");t.which=13,n.dom.$tagInput.trigger(t)}),n.dom.$tagInput.on("keydown",function(e){
var s=n.dom.$tagInput.val();switch(o(n.dom.$tagInput),s.length>0&&(p._.removePreviousTag=!1),e.which){case 8:if(0===s.length)if(p._.removePreviousTag===!0){var l=p.getLastEntry();n.removeTag(l.key)}else p._.removePreviousTag=!0;break;default:if($.inArray(e.which,t.CONFIRM_KEYS)>=0){if(0===s.length)return;for(var u=c(s),d=0;d<u.length;d++){var f=i(u[d],n.fn.corrector);if(!r(f,n.fn.matcher))return void a(n.dom.$tagInput);n.addTag(f)}n.dom.$tagInput.val(""),e.preventDefault()}}})}function n(t){var e=p.getEntry(t);null!=e&&e.dom.fadeOut(100).fadeIn(100)}function o(e){e.removeClass(t.ClassCss.INVALID_INPUT)}function a(e){e.addClass(t.ClassCss.INVALID_INPUT)}function r(t,e){if(0===f(t).length)return!1;var n=e({tag:t});return null==n&&(n=!0),n}function i(t,e){if(0===f(t).length)return"";var n=e({tag:t});return null==n&&(n=t),n}function s(e,n){var o=p.isMaxTagsExceeded();e.attr("readonly",o),o===!0?(n.addClass(t.ClassCss.TAGSINPUT_MAX_TAGS),e.addClass(t.ClassCss.TAGSINPUT_MAX_TAGS),e.attr("placeholder","")):(n.removeClass(t.ClassCss.TAGSINPUT_MAX_TAGS),e.removeClass(t.ClassCss.TAGSINPUT_MAX_TAGS),e.attr("placeholder",e.data("placeholder")))}function l(t,e){var n=t.getTagList();return{totalTags:n.length,tags:n,tag:e}}function c(t,e){var n,o=[];if(null==t)return[];n=""!==e?t.split(e):[t];for(var a=0;a<n.length;a++)o.push(f(n[a]));return o}function u(e){return null==e?t.DELIMITER:"false"===e?"":e}function d(t){return null==t?!1:"true"===t}function f(t){return null==t?"":t.replace(/^\s+|\s+$/g,"")}var p,h=function(n,o){this.prop={maxTags:parseInt(n.maxTags,10),maxLength:parseInt(n.maxLength,10),placeholder:n.placeholder,delimiter:u(n.delimiter),readOnly:d(n.readOnly)},this.fn={corrector:n.corrector,matcher:n.matcher,onTagsChanged:n.onTagsChanged,onTagsAdded:n.onTagsAdded,onTagsRemoved:n.onTagsRemoved,onTagsReset:n.onTagsReset},this.dom={},this.dom.$container=$(o),this.dom.$tagListContainer=$(o).find(t.Role.TAGS),this.dom.$tagTemplate=this.dom.$tagListContainer.find(t.Role.TAG).clone(),this.dom.$tagInput=this.dom.$container.find(t.Role.TAGSINPUT),this.dom.$tagInput.attr("placeholder",this.prop.placeholder),this.dom.$tagInput.data("placeholder",this.prop.placeholder),this.dom.$tagListContainer.find(t.Role.TAG).remove(),this.prop.readOnly&&this.dom.$tagInput.remove(),isNaN(this.prop.maxTags)&&(this.prop.maxTags=-1),isNaN(this.prop.maxLength)||this.dom.$tagInput.attr("maxlength",this.prop.maxLength),e(this)};h.prototype.addTag=function(e){var o=i(e,this.fn.corrector);if(!p.isMaxTagsExceeded()&&r(o,this.fn.matcher)){var a=this,c=p.getEntry(o);if(null==c){var u=$(this.dom.$tagTemplate[0]).clone();u.find(t.Role.TAG_VALUE).html(o),u.find(t.Role.TAG_REMOVE).data("item",o),u.on("click",t.Role.TAG_REMOVE,function(){a.removeTag($(this).data("item"))});var d=this.dom.$tagListContainer.find(t.Role.TAG);d.length>0?u.insertAfter(d.last()):this.dom.$tagListContainer.prepend(u),p.addEntry(o,u),s(this.dom.$tagInput,this.dom.$tagListContainer);var f=l(p,o);this.fn.onTagsAdded({data:f}),this.fn.onTagsChanged({data:f})}else n(o)}},h.prototype.addTags=function(t){if(t)for(var e=0;e<t.length;e++)this.addTag(t[e])},h.prototype.removeTag=function(t){if(p.contains(t)){p.removeEntry(t),s(this.dom.$tagInput,this.dom.$tagListContainer);var e=l(p,t);this.fn.onTagsRemoved({data:e}),this.fn.onTagsChanged({data:e})}},h.prototype.removeTags=function(t){if(t)for(var e=0;e<t.length;e++)this.removeTag(t[e])},h.prototype.clearTags=function(){p.reset(),s(this.dom.$tagInput,this.dom.$tagListContainer),this.fn.onTagsReset()};var g=function(t){this.options={maxTags:t},this._={entries:[],removePreviousTag:!1}};return g.prototype.addEntry=function(t,e){this._.entries.push({key:t,dom:e})},g.prototype.getEntry=function(t){for(var e,n=0;n<this._.entries.length;n++)if(e=this._.entries[n],e.key===t)return e;return null},g.prototype.getLastEntry=function(){return this._.entries[this._.entries.length-1]},g.prototype.removeEntry=function(t){for(var e=-1,n=0;n<this._.entries.length;n++)if(this._.entries[n].key===t){this._.entries[n].dom.remove(),e=n;break}e>-1&&this._.entries.splice(e,1)},g.prototype.contains=function(t){var e=this.getEntry(t);return null!=e},g.prototype.isMaxTagsExceeded=function(){return this.options.maxTags>0&&this._.entries.length>=this.options.maxTags},g.prototype.getTagList=function(){for(var t=[],e=0;e<this._.entries.length;e++)t.push(this._.entries[e].key);return t},g.prototype.reset=function(){for(var t=0;t<this._.entries.length;t++)this._.entries[t].dom.remove();this._.entries.splice(0,this._.entries.length),this._.removePreviousTag=!1},function(t,e){return p=new g(parseInt(t.maxTags,10)),new h(t,e)}}]).directive("tagsinput",["$templateCache","tagsInput","TagsInputConstants",function(t,e,n){return{replace:!0,template:function(e,o){var a=null==o.templateUrl?n.DEFAULT_TEMPLATE:o.templateUrl;return t.get(a)},scope:{tagsinputId:"=?",initTags:"=?",maxTags:"=?maxtags",maxLength:"=?maxlength",placeholder:"=?",delimiter:"@",readonly:"@",corrector:"&",matcher:"&",templateUrl:"@",onTagsChanged:"&onchanged",onTagsAdded:"&onadded",onTagsRemoved:"&onremoved",onTagsReset:"&onreset"},link:function(t,n){var o=null==t.tagsinputId?"":t.tagsinputId,a=e(t,n);null!=t.initTags&&angular.isArray(t.initTags)&&a.addTags(t.initTags),t.$on("tagsinput:add",function(t,e,n){var r=e;(null==n||n===o)&&(angular.isArray(e)||(r=[e]),a.addTags(r))}),t.$on("tagsinput:remove",function(t,e,n){var r=e;(null==n||n===o)&&(angular.isArray(e)||(r=[e]),a.removeTags(r))}),t.$on("tagsinput:clear",function(t,e){(null==e||e===o)&&a.clearTags()}),t.$on("$destroy",function(){a.clearTags()})}}}]).constant("TagsInputConstants",{DEFAULT_TEMPLATE:"angularjs/bootstrap/tagsinput/tagsinput.tpl.html",CONFIRM_KEYS:[13,9],DELIMITER:",",Role:{TAGS:"[data-role=tags]",TAG:"[data-role=tag]",TAG_VALUE:"[data-role=value]",TAG_REMOVE:"[data-role=remove]",TAGSINPUT:"[data-role=tagsinput]"},ClassCss:{TAGSINPUT_MAX_TAGS:"tagsinput-maxtags",INVALID_INPUT:"tagsinput-invalid"}}),angular.module("angularjs.bootstrap.tagsinput.template",["angularjs/bootstrap/tagsinput/tagsinput.tpl.html"]),angular.module("angularjs/bootstrap/tagsinput/tagsinput.tpl.html",[]).run(["$templateCache",function(t){t.put("angularjs/bootstrap/tagsinput/tagsinput.tpl.html",'<div class="angularjs-bootstrap-tagsinput">\n    <div data-role="tags">\n        <span data-role="tag" class="label label-info">\n            <span data-role="value"></span>\n            <span data-role="remove"></span>\n        </span>\n    </div>\n\n    <div class="tagsinput">\n        <input data-role="tagsinput" class="form-control" type="text">\n    </div>\n</div>')}]),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e={options:{optionClass:"",dropdownClass:"",autoinit:!1,callback:!1,dynamicOptLabel:"Add a new option..."},init:function(n){function o(o){if(!o.data("dropdownjs")&&o.is("select")){var a=o.attr("multiple"),r=o.attr("data-dynamic-opts"),i=t(),s=t("<div></div>");s.addClass("dropdownjs").addClass(n.dropdownStyle),s.data("select",o);var l=t("<input type=text readonly class=fakeinput>");t.material&&l.data("mdproc",!0),s.append(l);var c=t("<ul></ul>");c.data("select",o),s.append(c),l.attr("placeholder",o.attr("placeholder")),o.find("option").each(function(){var n=t(this);e._addOption(c,n)}),r&&(i=t("<li class=dropdownjs-add></li>"),i.append("<input>"),i.find("input").attr("placeholder",n.dynamicOptLabel),c.append(i));{s.find("li")}if(a)e._select(s,c.find(":selected"));else{var u;u=c.find(":selected").length?c.find(":selected").last():c.find("li").first(),e._select(s,u)}l.addClass(o[0].className),o.hide().attr("data-dropdownjs",!0),o.after(s),n.callback&&n.callback(s),c.on("click","li:not(.dropdownjs-add)",function(n){e._select(s,t(this)),o.change()}),c.on("keydown","li:not(.dropdownjs-add)",function(n){return 27===n.which?(t(".dropdownjs > ul > li").attr("tabindex",-1),l.removeClass("focus").blur()):32!==n.which||t(n.target).is("input")?void 0:(e._select(s,t(this)),!1)}),c.on("focus","li:not(.dropdownjs-add)",function(){o.is(":disabled")||l.addClass("focus")}),r&&r.length&&i.on("keydown",function(e){if(13===e.which){var n=t("<option>"),a=i.find("input").val();i.find("input").val(""),n.attr("value",a),n.text(a),o.append(n)}}),o.on("DOMNodeInserted",function(n){var o=t(n.target);o.val().length&&(e._addOption(c,o),c.find("li").not(".dropdownjs-add").attr("tabindex",0))}),l.on("click focus",function(e){if(e.stopPropagation(),!o.is(":disabled")){t(".dropdownjs > ul > li").attr("tabindex",-1),t(".dropdownjs > input").not(t(this)).removeClass("focus").blur(),t(".dropdownjs > ul > li").not(".dropdownjs-add").attr("tabindex",0);var n={top:t(this).offset().top-t(document).scrollTop(),left:t(this).offset().left-t(document).scrollLeft(),bottom:t(window).height()-(t(this).offset().top-t(document).scrollTop()),right:t(window).width()-(t(this).offset().left-t(document).scrollLeft())},a=n.bottom;200>a&&n.top>n.bottom?(a=n.top,c.attr("placement","top-left")):c.attr("placement","bottom-left"),t(this).next("ul").css("max-height",a-20),t(this).addClass("focus")}}),t(document).on("click",function(e){a&&t(e.target).parents(".dropdownjs").length||t(e.target).parents(".dropdownjs-add").length||t(e.target).is(".dropdownjs-add")||(t(".dropdownjs > ul > li").attr("tabindex",-1),l.removeClass("focus"))})}}n=n?t.extend(e.options,n):e.options,n.autoinit&&t(document).on("DOMNodeInserted",function(e){var a=t(e.target);a.is("select")&&a.is(n.autoinit)&&o(a)}),t(this).each(function(){o(t(this))})},select:function(n){var o=t(this).find('[value="'+n+'"]');e._select(t(this),o)},_select:function(e,n){if(!n.is(".dropdownjs-add")){var o=e.data("select"),a=e.find("input.fakeinput"),r=o.attr("multiple"),i=e.find("li");if(r){n.toggleClass("selected");var s=o.find('[value="'+n.attr("value")+'"]');s.prop("selected")?s.prop("selected",!0):s.prop("selected",!1);var l=[];i.each(function(){t(this).hasClass("selected")&&l.push(t(this).text())}),a.val(l.join(", "))}r||(i.not(n).removeClass("selected"),n.addClass("selected"),o.val(n.attr("value")),a.val(n.text())),t.material&&(a.val().trim()?o.removeClass("empty"):o.addClass("empty"))}},_addOption:function(e,n){var o=t("<li></li>");o.addClass(this.options.optionStyle),n.text()?o.text(n.text()):o.html("&nbsp;"),o.attr("value",n.val()),e.data("select").attr("data-dynamic-opts")&&(o.append("<span class=close></span>"),o.find(".close").on("click",function(){o.remove(),n.remove()})),n.prop("selected")&&o.attr("selected",!0),e.find(".dropdownjs-add").length?e.find(".dropdownjs-add").before(o):e.append(o)}};t.fn.dropdown=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"==typeof n|!n?e.init.apply(this,arguments):void t.error("Method "+n+" does not exists on jQuery.dropdown")}}),!function(t,e){e["true"]=t,function(e,n){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"object"==typeof t?module.exports=e():n.rangy=e()}(function(){function t(t,e){var n=typeof t[e];return n==w||!(n!=b||!t[e])||"unknown"==n}function e(t,e){return!(typeof t[e]!=b||!t[e])}function n(t,e){return typeof t[e]!=C}function o(t){return function(e,n){for(var o=n.length;o--;)if(!t(e,n[o]))return!1;return!0}}function a(t){return t&&N(t,S)&&k(t,x)}function r(t){return e(t,"body")?t.body:t.getElementsByTagName("body")[0]}function i(e){typeof console!=C&&t(console,"log")&&console.log(e)}function s(t,e){O&&e?alert(t):i(t)}function l(t){_.initialized=!0,_.supported=!1,s("Rangy is not supported in this environment. Reason: "+t,_.config.alertOnFail)}function c(t){s("Rangy warning: "+t,_.config.alertOnWarn)}function u(t){return t.message||t.description||String(t)}function d(){if(O&&!_.initialized){var e,n=!1,o=!1;t(document,"createRange")&&(e=document.createRange(),N(e,T)&&k(e,E)&&(n=!0));var s=r(document);if(!s||"body"!=s.nodeName.toLowerCase())return void l("No body element found");if(s&&t(s,"createTextRange")&&(e=s.createTextRange(),a(e)&&(o=!0)),!n&&!o)return void l("Neither Range nor TextRange are available");_.initialized=!0,_.features={implementsDomRange:n,implementsTextRange:o};var c,d;for(var f in A)(c=A[f])instanceof g&&c.init(c,_);for(var p=0,h=M.length;h>p;++p)try{M[p](_)}catch(m){d="Rangy init listener threw an exception. Continuing. Detail: "+u(m),i(d)}}}function f(t,e,n){n&&(t+=" in module "+n.name),_.warn("DEPRECATED: "+t+" is deprecated. Please use "+e+" instead.")}function p(t,e,n,o){t[e]=function(){return f(e,n,o),t[n].apply(t,D.toArray(arguments))}}function h(t){t=t||window,d();for(var e=0,n=H.length;n>e;++e)H[e](t)}function g(t,e,n){this.name=t,this.dependencies=e,this.initialized=!1,this.supported=!1,this.initializer=n}function m(t,e,n){var o=new g(t,e,function(e){if(!e.initialized){e.initialized=!0;try{n(_,e),e.supported=!0}catch(o){var a="Module '"+t+"' failed to load: "+u(o);i(a),o.stack&&i(o.stack)}}});return A[t]=o,o}function v(){}function y(){}var b="object",w="function",C="undefined",E=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],T=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],x=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],S=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],N=o(t),R=o(e),k=o(n),$=[].forEach?function(t,e){t.forEach(e)}:function(t,e){for(var n=0,o=t.length;o>n;++n)e(t[n],n)},A={},O=typeof window!=C&&typeof document!=C,D={isHostMethod:t,isHostObject:e,isHostProperty:n,areHostMethods:N,areHostObjects:R,areHostProperties:k,isTextRange:a,getBody:r,forEach:$},_={version:"1.3.0",initialized:!1,isBrowser:O,supported:!0,util:D,features:{},modules:A,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==C?!0:rangyAutoInitialize}};_.fail=l,_.warn=c;var L;({}).hasOwnProperty?(D.extend=L=function(t,e,n){var o,a;for(var r in e)e.hasOwnProperty(r)&&(o=t[r],a=e[r],n&&null!==o&&"object"==typeof o&&null!==a&&"object"==typeof a&&L(o,a,!0),t[r]=a);return e.hasOwnProperty("toString")&&(t.toString=e.toString),t},D.createOptions=function(t,e){var n={};return L(n,e),t&&L(n,t),n}):l("hasOwnProperty not supported"),O||l("Rangy can only run in a browser"),function(){var t;if(O){var e=document.createElement("div");e.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(e.childNodes,0)[0].nodeType&&(t=function(t){return n.call(t,0)})}catch(o){}}t||(t=function(t){for(var e=[],n=0,o=t.length;o>n;++n)e[n]=t[n];return e}),D.toArray=t}();var I;O&&(t(document,"addEventListener")?I=function(t,e,n){t.addEventListener(e,n,!1)}:t(document,"attachEvent")?I=function(t,e,n){t.attachEvent("on"+e,n)}:l("Document does not have required addEventListener or attachEvent method"),D.addListener=I);var M=[];D.deprecationNotice=f,D.createAliasForDeprecatedMethod=p,_.init=d,_.addInitListener=function(t){_.initialized?t(_):M.push(t)};var H=[];_.addShimListener=function(t){H.push(t)},O&&(_.shim=_.createMissingNativeApi=h,p(_,"createMissingNativeApi","shim")),g.prototype={init:function(){for(var t,e,n=this.dependencies||[],o=0,a=n.length;a>o;++o){if(e=n[o],t=A[e],!(t&&t instanceof g))throw new Error("required module '"+e+"' not found");if(t.init(),!t.supported)throw new Error("required module '"+e+"' not supported")}this.initializer(this)},fail:function(t){throw this.initialized=!0,this.supported=!1,new Error(t)},warn:function(t){_.warn("Module "+this.name+": "+t)},deprecationNotice:function(t,e){_.warn("DEPRECATED: "+t+" in module "+this.name+" is deprecated. Please use "+e+" instead")},createError:function(t){return new Error("Error in Rangy "+this.name+" module: "+t)}},_.createModule=function(t){var e,n;2==arguments.length?(e=arguments[1],n=[]):(e=arguments[2],n=arguments[1]);var o=m(t,n,e);_.initialized&&_.supported&&o.init()},_.createCoreModule=function(t,e,n){m(t,e,n)},_.RangePrototype=v,_.rangePrototype=new v,_.selectionPrototype=new y,_.createCoreModule("DomUtil",[],function(t,e){function n(t){var e;return typeof t.namespaceURI==O||null===(e=t.namespaceURI)||"http://www.w3.org/1999/xhtml"==e}function o(t){var e=t.parentNode;return 1==e.nodeType?e:null}function a(t){for(var e=0;t=t.previousSibling;)++e;return e}function r(t){switch(t.nodeType){case 7:case 10:return 0;case 3:case 8:return t.length;default:return t.childNodes.length}}function i(t,e){var n,o=[];for(n=t;n;n=n.parentNode)o.push(n);for(n=e;n;n=n.parentNode)if(M(o,n))return n;return null}function s(t,e,n){for(var o=n?e:e.parentNode;o;){if(o===t)return!0;o=o.parentNode}return!1}function l(t,e){return s(t,e,!0)}function c(t,e,n){for(var o,a=n?t:t.parentNode;a;){if(o=a.parentNode,o===e)return a;a=o}return null}function u(t){var e=t.nodeType;return 3==e||4==e||8==e}function d(t){if(!t)return!1;var e=t.nodeType;return 3==e||8==e}function f(t,e){var n=e.nextSibling,o=e.parentNode;return n?o.insertBefore(t,n):o.appendChild(t),t}function p(t,e,n){var o=t.cloneNode(!1);if(o.deleteData(0,e),t.deleteData(e,t.length-e),f(o,t),n)for(var r,i=0;r=n[i++];)r.node==t&&r.offset>e?(r.node=o,r.offset-=e):r.node==t.parentNode&&r.offset>a(t)&&++r.offset;return o}function h(t){if(9==t.nodeType)return t;if(typeof t.ownerDocument!=O)return t.ownerDocument;if(typeof t.document!=O)return t.document;if(t.parentNode)return h(t.parentNode);throw e.createError("getDocument: no document found for node")}function g(t){var n=h(t);if(typeof n.defaultView!=O)return n.defaultView;if(typeof n.parentWindow!=O)return n.parentWindow;throw e.createError("Cannot get a window object for node")}function m(t){if(typeof t.contentDocument!=O)return t.contentDocument;if(typeof t.contentWindow!=O)return t.contentWindow.document;throw e.createError("getIframeDocument: No Document object found for iframe element")}function v(t){if(typeof t.contentWindow!=O)return t.contentWindow;if(typeof t.contentDocument!=O)return t.contentDocument.defaultView;throw e.createError("getIframeWindow: No Window object found for iframe element")}function y(t){return t&&D.isHostMethod(t,"setTimeout")&&D.isHostObject(t,"document")}function b(t,e,n){var o;if(t?D.isHostProperty(t,"nodeType")?o=1==t.nodeType&&"iframe"==t.tagName.toLowerCase()?m(t):h(t):y(t)&&(o=t.document):o=document,!o)throw e.createError(n+"(): Parameter must be a Window object or DOM node");return o}function w(t){for(var e;e=t.parentNode;)t=e;return t}function C(t,n,o,r){var s,l,u,d,f;if(t==o)return n===r?0:r>n?-1:1;if(s=c(o,t,!0))return n<=a(s)?-1:1;if(s=c(t,o,!0))return a(s)<r?-1:1;if(l=i(t,o),!l)throw new Error("comparePoints error: nodes have no common ancestor");if(u=t===l?l:c(t,l,!0),d=o===l?l:c(o,l,!0),u===d)throw e.createError("comparePoints got to case 4 and childA and childB are the same!");for(f=l.firstChild;f;){if(f===u)return-1;if(f===d)return 1;f=f.nextSibling}}function E(t){var e;try{return e=t.parentNode,!1}catch(n){return!0}}function T(t){if(!t)return"[No node]";if(H&&E(t))return"[Broken node]";if(u(t))return'"'+t.data+'"';if(1==t.nodeType){var e=t.id?' id="'+t.id+'"':"";return"<"+t.nodeName+e+">[index:"+a(t)+",length:"+t.childNodes.length+"]["+(t.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return t.nodeName}function x(t){for(var e,n=h(t).createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n}function S(t,e,n){var o=_(t),a=t.createElement("div");a.contentEditable=""+!!n,e&&(a.innerHTML=e);var r=o.firstChild;return r?o.insertBefore(a,r):o.appendChild(a),a}function N(t){return t.parentNode.removeChild(t)}function R(t){this.root=t,this._next=t}function k(t){return new R(t)}function $(t,e){this.node=t,this.offset=e}function A(t){this.code=this[t],this.codeName=t,this.message="DOMException: "+this.codeName}var O="undefined",D=t.util,_=D.getBody;D.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||e.fail("document missing a Node creation method"),D.isHostMethod(document,"getElementsByTagName")||e.fail("document missing getElementsByTagName method");var L=document.createElement("div");D.areHostMethods(L,["insertBefore","appendChild","cloneNode"]||!D.areHostObjects(L,["previousSibling","nextSibling","childNodes","parentNode"]))||e.fail("Incomplete Element implementation"),D.isHostProperty(L,"innerHTML")||e.fail("Element is missing innerHTML property");var I=document.createTextNode("test");D.areHostMethods(I,["splitText","deleteData","insertData","appendData","cloneNode"]||!D.areHostObjects(L,["previousSibling","nextSibling","childNodes","parentNode"])||!D.areHostProperties(I,["data"]))||e.fail("Incomplete Text Node implementation");var M=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1},H=!1;!function(){var e=document.createElement("b");e.innerHTML="1";var n=e.firstChild;e.innerHTML="<br />",H=E(n),t.features.crashyTextNodes=H}();var B;typeof window.getComputedStyle!=O?B=function(t,e){return g(t).getComputedStyle(t,null)[e]}:typeof document.documentElement.currentStyle!=O?B=function(t,e){return t.currentStyle?t.currentStyle[e]:""}:e.fail("No means of obtaining computed style properties found"),R.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,e,n=this._current=this._next;if(this._current)if(t=n.firstChild)this._next=t;else{for(e=null;n!==this.root&&!(e=n.nextSibling);)n=n.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},$.prototype={equals:function(t){return!!t&&this.node===t.node&&this.offset==t.offset},inspect:function(){return"[DomPosition("+T(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},A.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},A.prototype.toString=function(){return this.message},t.dom={arrayContains:M,isHtmlNamespace:n,parentElement:o,getNodeIndex:a,getNodeLength:r,getCommonAncestor:i,isAncestorOf:s,isOrIsAncestorOf:l,getClosestAncestorIn:c,isCharacterDataNode:u,isTextOrCommentNode:d,insertAfter:f,splitDataNode:p,getDocument:h,getWindow:g,getIframeWindow:v,getIframeDocument:m,getBody:_,isWindow:y,getContentDocument:b,getRootContainer:w,comparePoints:C,isBrokenNode:E,inspectNode:T,getComputedStyleProperty:B,createTestElement:S,removeNode:N,fragmentFromNodeChildren:x,createIterator:k,DomPosition:$},t.DOMException=A}),_.createCoreModule("DomRange",["DomUtil"],function(t){function e(t,e){return 3!=t.nodeType&&(j(t,e.startContainer)||j(t,e.endContainer))}function n(t){return t.document||q(t.startContainer)}function o(t){return G(t.startContainer)}function a(t){return new M(t.parentNode,P(t))}function r(t){return new M(t.parentNode,P(t)+1)}function i(t,e,n){var o=11==t.nodeType?t.firstChild:t;return B(e)?n==e.length?L.insertAfter(t,e):e.parentNode.insertBefore(t,0==n?e:U(e,n)):n>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[n]),o}function s(t,e,o){if(x(t),x(e),n(e)!=n(t))throw new H("WRONG_DOCUMENT_ERR");var a=W(t.startContainer,t.startOffset,e.endContainer,e.endOffset),r=W(t.endContainer,t.endOffset,e.startContainer,e.startOffset);return o?0>=a&&r>=0:0>a&&r>0}function l(t){for(var e,o,a,r=n(t.range).createDocumentFragment();o=t.next();){if(e=t.isPartiallySelectedSubtree(),o=o.cloneNode(!e),e&&(a=t.getSubtreeIterator(),o.appendChild(l(a)),a.detach()),10==o.nodeType)throw new H("HIERARCHY_REQUEST_ERR");r.appendChild(o)}return r}function c(t,e,n){var o,a;n=n||{stop:!1};for(var r,i;r=t.next();)if(t.isPartiallySelectedSubtree()){if(e(r)===!1)return void(n.stop=!0);if(i=t.getSubtreeIterator(),c(i,e,n),i.detach(),n.stop)return}else for(o=L.createIterator(r);a=o.next();)if(e(a)===!1)return void(n.stop=!0)}function u(t){for(var e;t.next();)t.isPartiallySelectedSubtree()?(e=t.getSubtreeIterator(),u(e),e.detach()):t.remove()}function d(t){for(var e,o,a=n(t.range).createDocumentFragment();e=t.next();){if(t.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),o=t.getSubtreeIterator(),e.appendChild(d(o)),o.detach()):t.remove(),10==e.nodeType)throw new H("HIERARCHY_REQUEST_ERR");a.appendChild(e)}return a}function f(t,e,n){var o,a=!(!e||!e.length),r=!!n;a&&(o=new RegExp("^("+e.join("|")+")$"));var i=[];return c(new h(t,!1),function(e){if(!(a&&!o.test(e.nodeType)||r&&!n(e))){var s=t.startContainer;if(e!=s||!B(s)||t.startOffset!=s.length){var l=t.endContainer;e==l&&B(l)&&0==t.endOffset||i.push(e)}}}),i}function p(t){var e="undefined"==typeof t.getName?"Range":t.getName();return"["+e+"("+L.inspectNode(t.startContainer)+":"+t.startOffset+", "+L.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function h(t,e){if(this.range=t,this.clonePartiallySelectedTextNodes=e,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var n=t.commonAncestorContainer;this.sc===this.ec&&B(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||B(this.sc)?F(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||B(this.ec)?F(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function g(t){return function(e,n){for(var o,a=n?e:e.parentNode;a;){if(o=a.nodeType,V(t,o))return a;a=a.parentNode}return null}}function m(t,e){if(ot(t,e))throw new H("INVALID_NODE_TYPE_ERR")}function v(t,e){if(!V(e,t.nodeType))throw new H("INVALID_NODE_TYPE_ERR")}function y(t,e){if(0>e||e>(B(t)?t.length:t.childNodes.length))throw new H("INDEX_SIZE_ERR")}function b(t,e){if(et(t,!0)!==et(e,!0))throw new H("WRONG_DOCUMENT_ERR")}function w(t){if(nt(t,!0))throw new H("NO_MODIFICATION_ALLOWED_ERR")}function C(t,e){if(!t)throw new H(e)}function E(t,e){return e<=(B(t)?t.length:t.childNodes.length)}function T(t){return!!t.startContainer&&!!t.endContainer&&!(K&&(L.isBrokenNode(t.startContainer)||L.isBrokenNode(t.endContainer)))&&G(t.startContainer)==G(t.endContainer)&&E(t.startContainer,t.startOffset)&&E(t.endContainer,t.endOffset)}function x(t){if(!T(t))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+t.inspect()+")")}function S(t,e){x(t);var n=t.startContainer,o=t.startOffset,a=t.endContainer,r=t.endOffset,i=n===a;B(a)&&r>0&&r<a.length&&U(a,r,e),B(n)&&o>0&&o<n.length&&(n=U(n,o,e),i?(r-=o,a=n):a==n.parentNode&&r>=P(n)&&r++,o=0),t.setStartAndEnd(n,o,a,r)}function N(t){x(t);var e=t.commonAncestorContainer.parentNode.cloneNode(!1);return e.appendChild(t.cloneContents()),e.innerHTML}function R(t){t.START_TO_START=ct,t.START_TO_END=ut,t.END_TO_END=dt,t.END_TO_START=ft,t.NODE_BEFORE=pt,t.NODE_AFTER=ht,t.NODE_BEFORE_AND_AFTER=gt,t.NODE_INSIDE=mt}function k(t){R(t),R(t.prototype)}function $(t,e){return function(){x(this);var n,o,a=this.startContainer,i=this.startOffset,s=this.commonAncestorContainer,l=new h(this,!0);a!==s&&(n=F(a,s,!0),o=r(n),a=o.node,i=o.offset),c(l,w),l.reset();var u=t(l);return l.detach(),e(this,a,i,a,i),u}}function A(n,o){function i(t,e){return function(n){v(n,X),v(G(n),Y);var o=(t?a:r)(n);(e?s:l)(this,o.node,o.offset)}}function s(t,e,n){var a=t.endContainer,r=t.endOffset;(e!==t.startContainer||n!==t.startOffset)&&((G(e)!=G(a)||1==W(e,n,a,r))&&(a=e,r=n),o(t,e,n,a,r))}function l(t,e,n){var a=t.startContainer,r=t.startOffset;(e!==t.endContainer||n!==t.endOffset)&&((G(e)!=G(a)||-1==W(e,n,a,r))&&(a=e,r=n),o(t,a,r,e,n))}var c=function(){};c.prototype=t.rangePrototype,n.prototype=new c,I.extend(n.prototype,{setStart:function(t,e){m(t,!0),y(t,e),s(this,t,e)},setEnd:function(t,e){m(t,!0),y(t,e),l(this,t,e)},setStartAndEnd:function(){var t=arguments,e=t[0],n=t[1],a=e,r=n;switch(t.length){case 3:r=t[2];break;case 4:a=t[2],r=t[3]}o(this,e,n,a,r)},setBoundary:function(t,e,n){this["set"+(n?"Start":"End")](t,e)},setStartBefore:i(!0,!0),setStartAfter:i(!1,!0),setEndBefore:i(!0,!1),setEndAfter:i(!1,!1),collapse:function(t){x(this),t?o(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):o(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(t){m(t,!0),o(this,t,0,t,z(t))},selectNode:function(t){m(t,!1),v(t,X);var e=a(t),n=r(t);o(this,e.node,e.offset,n.node,n.offset)},extractContents:$(d,o),deleteContents:$(u,o),canSurroundContents:function(){x(this),w(this.startContainer),w(this.endContainer);var t=new h(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},splitBoundaries:function(){S(this)},splitBoundariesPreservingPositions:function(t){S(this,t)},normalizeBoundaries:function(){x(this);var t,e=this.startContainer,n=this.startOffset,a=this.endContainer,r=this.endOffset,i=function(t){var e=t.nextSibling;e&&e.nodeType==t.nodeType&&(a=t,r=t.length,t.appendData(e.data),Q(e))},s=function(t){var o=t.previousSibling;if(o&&o.nodeType==t.nodeType){e=t;var i=t.length;if(n=o.length,t.insertData(0,o.data),Q(o),e==a)r+=n,a=e;else if(a==t.parentNode){var s=P(t);r==s?(a=t,r=i):r>s&&r--}}},l=!0;if(B(a))r==a.length?i(a):0==r&&(t=a.previousSibling,t&&t.nodeType==a.nodeType&&(r=t.length,e==a&&(l=!1),t.appendData(a.data),Q(a),a=t));else{if(r>0){var c=a.childNodes[r-1];c&&B(c)&&i(c)}l=!this.collapsed}if(l){if(B(e))0==n?s(e):n==e.length&&(t=e.nextSibling,t&&t.nodeType==e.nodeType&&(a==t&&(a=e,r+=e.length),e.appendData(t.data),Q(t)));else if(n<e.childNodes.length){var u=e.childNodes[n];u&&B(u)&&s(u)}}else e=a,n=r;o(this,e,n,a,r)},collapseToPoint:function(t,e){m(t,!0),y(t,e),this.setStartAndEnd(t,e)}}),k(n)}function O(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:L.getCommonAncestor(t.startContainer,t.endContainer)}function D(t,e,n,o,a){t.startContainer=e,t.startOffset=n,t.endContainer=o,t.endOffset=a,t.document=L.getDocument(e),O(t)}function _(t){this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=0,this.document=t,O(this)}var L=t.dom,I=t.util,M=L.DomPosition,H=t.DOMException,B=L.isCharacterDataNode,P=L.getNodeIndex,j=L.isOrIsAncestorOf,q=L.getDocument,W=L.comparePoints,U=L.splitDataNode,F=L.getClosestAncestorIn,z=L.getNodeLength,V=L.arrayContains,G=L.getRootContainer,K=t.features.crashyTextNodes,Q=L.removeNode;h.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,B(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t,e,n=this._current;!B(n)||n!==this.sc&&n!==this.ec?n.parentNode&&Q(n):(t=n===this.sc?this.so:0,e=n===this.ec?this.eo:n.length,t!=e&&n.deleteData(t,e-t))},isPartiallySelectedSubtree:function(){var t=this._current;return e(t,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)t=this.range.cloneRange(),t.collapse(!1);else{t=new _(n(this.range));var e=this._current,o=e,a=0,r=e,i=z(e);j(e,this.sc)&&(o=this.sc,a=this.so),j(e,this.ec)&&(r=this.ec,i=this.eo),D(t,o,a,r,i)}return new h(t,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var X=[1,3,4,5,7,8,10],Y=[2,9,11],Z=[5,6,10,12],J=[1,3,4,5,7,8,10,11],tt=[1,3,4,5,7,8],et=g([9,11]),nt=g(Z),ot=g([6,10,12]),at=document.createElement("style"),rt=!1;try{at.innerHTML="<b>x</b>",rt=3==at.firstChild.nodeType}catch(it){}t.features.htmlParsingConforms=rt;var st=rt?function(t){var e=this.startContainer,n=q(e);if(!e)throw new H("INVALID_STATE_ERR");var o=null;return 1==e.nodeType?o=e:B(e)&&(o=L.parentElement(e)),
o=null===o||"HTML"==o.nodeName&&L.isHtmlNamespace(q(o).documentElement)&&L.isHtmlNamespace(o)?n.createElement("body"):o.cloneNode(!1),o.innerHTML=t,L.fragmentFromNodeChildren(o)}:function(t){var e=n(this),o=e.createElement("body");return o.innerHTML=t,L.fragmentFromNodeChildren(o)},lt=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ct=0,ut=1,dt=2,ft=3,pt=0,ht=1,gt=2,mt=3;I.extend(t.rangePrototype,{compareBoundaryPoints:function(t,e){x(this),b(this.startContainer,e.startContainer);var n,o,a,r,i=t==ft||t==ct?"start":"end",s=t==ut||t==ct?"start":"end";return n=this[i+"Container"],o=this[i+"Offset"],a=e[s+"Container"],r=e[s+"Offset"],W(n,o,a,r)},insertNode:function(t){if(x(this),v(t,J),w(this.startContainer),j(t,this.startContainer))throw new H("HIERARCHY_REQUEST_ERR");var e=i(t,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){x(this);var t,e;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&B(this.startContainer))return t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),e=n(this).createDocumentFragment(),e.appendChild(t),e;var o=new h(this,!0);return t=l(o),o.detach(),t},canSurroundContents:function(){x(this),w(this.startContainer),w(this.endContainer);var t=new h(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},surroundContents:function(t){if(v(t,tt),!this.canSurroundContents())throw new H("INVALID_STATE_ERR");var e=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);i(t,this.startContainer,this.startOffset),t.appendChild(e),this.selectNode(t)},cloneRange:function(){x(this);for(var t,e=new _(n(this)),o=lt.length;o--;)t=lt[o],e[t]=this[t];return e},toString:function(){x(this);var t=this.startContainer;if(t===this.endContainer&&B(t))return 3==t.nodeType||4==t.nodeType?t.data.slice(this.startOffset,this.endOffset):"";var e=[],n=new h(this,!0);return c(n,function(t){(3==t.nodeType||4==t.nodeType)&&e.push(t.data)}),n.detach(),e.join("")},compareNode:function(t){x(this);var e=t.parentNode,n=P(t);if(!e)throw new H("NOT_FOUND_ERR");var o=this.comparePoint(e,n),a=this.comparePoint(e,n+1);return 0>o?a>0?gt:pt:a>0?ht:mt},comparePoint:function(t,e){return x(this),C(t,"HIERARCHY_REQUEST_ERR"),b(t,this.startContainer),W(t,e,this.startContainer,this.startOffset)<0?-1:W(t,e,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:st,toHtml:function(){return N(this)},intersectsNode:function(t,e){if(x(this),G(t)!=o(this))return!1;var n=t.parentNode,a=P(t);if(!n)return!0;var r=W(n,a,this.endContainer,this.endOffset),i=W(n,a+1,this.startContainer,this.startOffset);return e?0>=r&&i>=0:0>r&&i>0},isPointInRange:function(t,e){return x(this),C(t,"HIERARCHY_REQUEST_ERR"),b(t,this.startContainer),W(t,e,this.startContainer,this.startOffset)>=0&&W(t,e,this.endContainer,this.endOffset)<=0},intersectsRange:function(t){return s(this,t,!1)},intersectsOrTouchesRange:function(t){return s(this,t,!0)},intersection:function(t){if(this.intersectsRange(t)){var e=W(this.startContainer,this.startOffset,t.startContainer,t.startOffset),n=W(this.endContainer,this.endOffset,t.endContainer,t.endOffset),o=this.cloneRange();return-1==e&&o.setStart(t.startContainer,t.startOffset),1==n&&o.setEnd(t.endContainer,t.endOffset),o}return null},union:function(t){if(this.intersectsOrTouchesRange(t)){var e=this.cloneRange();return-1==W(t.startContainer,t.startOffset,this.startContainer,this.startOffset)&&e.setStart(t.startContainer,t.startOffset),1==W(t.endContainer,t.endOffset,this.endContainer,this.endOffset)&&e.setEnd(t.endContainer,t.endOffset),e}throw new H("Ranges do not intersect")},containsNode:function(t,e){return e?this.intersectsNode(t,!1):this.compareNode(t)==mt},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,z(t))<=0},containsRange:function(t){var e=this.intersection(t);return null!==e&&t.equals(e)},containsNodeText:function(t){var e=this.cloneRange();e.selectNode(t);var n=e.getNodes([3]);if(n.length>0){e.setStart(n[0],0);var o=n.pop();return e.setEnd(o,o.length),this.containsRange(e)}return this.containsNodeContents(t)},getNodes:function(t,e){return x(this),f(this,t,e)},getDocument:function(){return n(this)},collapseBefore:function(t){this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){this.setStartAfter(t),this.collapse(!0)},getBookmark:function(e){var o=n(this),a=t.createRange(o);e=e||L.getBody(o),a.selectNodeContents(e);var r=this.intersection(a),i=0,s=0;return r&&(a.setEnd(r.startContainer,r.startOffset),i=a.toString().length,s=i+r.toString().length),{start:i,end:s,containerNode:e}},moveToBookmark:function(t){var e=t.containerNode,n=0;this.setStart(e,0),this.collapse(!0);for(var o,a,r,i,s=[e],l=!1,c=!1;!c&&(o=s.pop());)if(3==o.nodeType)a=n+o.length,!l&&t.start>=n&&t.start<=a&&(this.setStart(o,t.start-n),l=!0),l&&t.end>=n&&t.end<=a&&(this.setEnd(o,t.end-n),c=!0),n=a;else for(i=o.childNodes,r=i.length;r--;)s.push(i[r])},getName:function(){return"DomRange"},equals:function(t){return _.rangesEqual(this,t)},isValid:function(){return T(this)},inspect:function(){return p(this)},detach:function(){}}),A(_,D),I.extend(_,{rangeProperties:lt,RangeIterator:h,copyComparisonConstants:k,createPrototypeRange:A,inspect:p,toHtml:N,getRangeDocument:n,rangesEqual:function(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset}}),t.DomRange=_}),_.createCoreModule("WrappedRange",["DomRange"],function(t,e){var n,o,a=t.dom,r=t.util,i=a.DomPosition,s=t.DomRange,l=a.getBody,c=a.getContentDocument,u=a.isCharacterDataNode;if(t.features.implementsDomRange&&!function(){function o(t){for(var e,n=f.length;n--;)e=f[n],t[e]=t.nativeRange[e];t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset}function i(t,e,n,o,a){var r=t.startContainer!==e||t.startOffset!=n,i=t.endContainer!==o||t.endOffset!=a,s=!t.equals(t.nativeRange);(r||i||s)&&(t.setEnd(o,a),t.setStart(e,n))}var u,d,f=s.rangeProperties;n=function(t){if(!t)throw e.createError("WrappedRange: Range must be specified");this.nativeRange=t,o(this)},s.createPrototypeRange(n,i),u=n.prototype,u.selectNode=function(t){this.nativeRange.selectNode(t),o(this)},u.cloneContents=function(){return this.nativeRange.cloneContents()},u.surroundContents=function(t){this.nativeRange.surroundContents(t),o(this)},u.collapse=function(t){this.nativeRange.collapse(t),o(this)},u.cloneRange=function(){return new n(this.nativeRange.cloneRange())},u.refresh=function(){o(this)},u.toString=function(){return this.nativeRange.toString()};var p=document.createTextNode("test");l(document).appendChild(p);var h=document.createRange();h.setStart(p,0),h.setEnd(p,0);try{h.setStart(p,1),u.setStart=function(t,e){this.nativeRange.setStart(t,e),o(this)},u.setEnd=function(t,e){this.nativeRange.setEnd(t,e),o(this)},d=function(t){return function(e){this.nativeRange[t](e),o(this)}}}catch(g){u.setStart=function(t,e){try{this.nativeRange.setStart(t,e)}catch(n){this.nativeRange.setEnd(t,e),this.nativeRange.setStart(t,e)}o(this)},u.setEnd=function(t,e){try{this.nativeRange.setEnd(t,e)}catch(n){this.nativeRange.setStart(t,e),this.nativeRange.setEnd(t,e)}o(this)},d=function(t,e){return function(n){try{this.nativeRange[t](n)}catch(a){this.nativeRange[e](n),this.nativeRange[t](n)}o(this)}}}u.setStartBefore=d("setStartBefore","setEndBefore"),u.setStartAfter=d("setStartAfter","setEndAfter"),u.setEndBefore=d("setEndBefore","setStartBefore"),u.setEndAfter=d("setEndAfter","setStartAfter"),u.selectNodeContents=function(t){this.setStartAndEnd(t,0,a.getNodeLength(t))},h.selectNodeContents(p),h.setEnd(p,3);var m=document.createRange();m.selectNodeContents(p),m.setEnd(p,4),m.setStart(p,2),u.compareBoundaryPoints=-1==h.compareBoundaryPoints(h.START_TO_END,m)&&1==h.compareBoundaryPoints(h.END_TO_START,m)?function(t,e){return e=e.nativeRange||e,t==e.START_TO_END?t=e.END_TO_START:t==e.END_TO_START&&(t=e.START_TO_END),this.nativeRange.compareBoundaryPoints(t,e)}:function(t,e){return this.nativeRange.compareBoundaryPoints(t,e.nativeRange||e)};var v=document.createElement("div");v.innerHTML="123";var y=v.firstChild,b=l(document);b.appendChild(v),h.setStart(y,1),h.setEnd(y,2),h.deleteContents(),"13"==y.data&&(u.deleteContents=function(){this.nativeRange.deleteContents(),o(this)},u.extractContents=function(){var t=this.nativeRange.extractContents();return o(this),t}),b.removeChild(v),b=null,r.isHostMethod(h,"createContextualFragment")&&(u.createContextualFragment=function(t){return this.nativeRange.createContextualFragment(t)}),l(document).removeChild(p),u.getName=function(){return"WrappedRange"},t.WrappedRange=n,t.createNativeRange=function(t){return t=c(t,e,"createNativeRange"),t.createRange()}}(),t.features.implementsTextRange){var d=function(t){var e=t.parentElement(),n=t.duplicate();n.collapse(!0);var o=n.parentElement();n=t.duplicate(),n.collapse(!1);var r=n.parentElement(),i=o==r?o:a.getCommonAncestor(o,r);return i==e?i:a.getCommonAncestor(e,i)},f=function(t){return 0==t.compareEndPoints("StartToEnd",t)},p=function(t,e,n,o,r){var s=t.duplicate();s.collapse(n);var l=s.parentElement();if(a.isOrIsAncestorOf(e,l)||(l=e),!l.canHaveHTML){var c=new i(l.parentNode,a.getNodeIndex(l));return{boundaryPosition:c,nodeInfo:{nodeIndex:c.offset,containerElement:c.node}}}var d=a.getDocument(l).createElement("span");d.parentNode&&a.removeNode(d);for(var f,p,h,g,m,v=n?"StartToStart":"StartToEnd",y=r&&r.containerElement==l?r.nodeIndex:0,b=l.childNodes.length,w=b,C=w;C==b?l.appendChild(d):l.insertBefore(d,l.childNodes[C]),s.moveToElementText(d),f=s.compareEndPoints(v,t),0!=f&&y!=w;){if(-1==f){if(w==y+1)break;y=C}else w=w==y+1?y:C;C=Math.floor((y+w)/2),l.removeChild(d)}if(m=d.nextSibling,-1==f&&m&&u(m)){s.setEndPoint(n?"EndToStart":"EndToEnd",t);var E;if(/[\r\n]/.test(m.data)){var T=s.duplicate(),x=T.text.replace(/\r\n/g,"\r").length;for(E=T.moveStart("character",x);-1==(f=T.compareEndPoints("StartToEnd",T));)E++,T.moveStart("character",1)}else E=s.text.length;g=new i(m,E)}else p=(o||!n)&&d.previousSibling,h=(o||n)&&d.nextSibling,g=h&&u(h)?new i(h,0):p&&u(p)?new i(p,p.data.length):new i(l,a.getNodeIndex(d));return a.removeNode(d),{boundaryPosition:g,nodeInfo:{nodeIndex:C,containerElement:l}}},h=function(t,e){var n,o,r,i,s=t.offset,c=a.getDocument(t.node),d=l(c).createTextRange(),f=u(t.node);return f?(n=t.node,o=n.parentNode):(i=t.node.childNodes,n=s<i.length?i[s]:null,o=t.node),r=c.createElement("span"),r.innerHTML="&#feff;",n?o.insertBefore(r,n):o.appendChild(r),d.moveToElementText(r),d.collapse(!e),o.removeChild(r),f&&d[e?"moveStart":"moveEnd"]("character",s),d};o=function(t){this.textRange=t,this.refresh()},o.prototype=new s(document),o.prototype.refresh=function(){var t,e,n,o=d(this.textRange);f(this.textRange)?e=t=p(this.textRange,o,!0,!0).boundaryPosition:(n=p(this.textRange,o,!0,!1),t=n.boundaryPosition,e=p(this.textRange,o,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(t.node,t.offset),this.setEnd(e.node,e.offset)},o.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(o);var g=function(t){if(t.collapsed)return h(new i(t.startContainer,t.startOffset),!0);var e=h(new i(t.startContainer,t.startOffset),!0),n=h(new i(t.endContainer,t.endOffset),!1),o=l(s.getRangeDocument(t)).createTextRange();return o.setEndPoint("StartToStart",e),o.setEndPoint("EndToEnd",n),o};if(o.rangeToTextRange=g,o.prototype.toTextRange=function(){return g(this)},t.WrappedTextRange=o,!t.features.implementsDomRange||t.config.preferTextRange){var m=function(t){return t("return this;")()}(Function);"undefined"==typeof m.Range&&(m.Range=o),t.createNativeRange=function(t){return t=c(t,e,"createNativeRange"),l(t).createTextRange()},t.WrappedRange=o}}t.createRange=function(n){return n=c(n,e,"createRange"),new t.WrappedRange(t.createNativeRange(n))},t.createRangyRange=function(t){return t=c(t,e,"createRangyRange"),new s(t)},r.createAliasForDeprecatedMethod(t,"createIframeRange","createRange"),r.createAliasForDeprecatedMethod(t,"createIframeRangyRange","createRangyRange"),t.addShimListener(function(e){var n=e.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return t.createRange(n)}),n=e=null})}),_.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(t,e){function n(t){return"string"==typeof t?/^backward(s)?$/i.test(t):!!t}function o(t,n){if(t){if(k.isWindow(t))return t;if(t instanceof v)return t.win;var o=k.getContentDocument(t,e,n);return k.getWindow(o)}return window}function a(t){return o(t,"getWinSelection").getSelection()}function r(t){return o(t,"getDocSelection").document.selection}function i(t){var e=!1;return t.anchorNode&&(e=1==k.comparePoints(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)),e}function s(t,e,n){var o=n?"end":"start",a=n?"start":"end";t.anchorNode=e[o+"Container"],t.anchorOffset=e[o+"Offset"],t.focusNode=e[a+"Container"],t.focusOffset=e[a+"Offset"]}function l(t){var e=t.nativeSelection;t.anchorNode=e.anchorNode,t.anchorOffset=e.anchorOffset,t.focusNode=e.focusNode,t.focusOffset=e.focusOffset}function c(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0}function u(e){var n;return e instanceof O?(n=t.createNativeRange(e.getDocument()),n.setEnd(e.endContainer,e.endOffset),n.setStart(e.startContainer,e.startOffset)):e instanceof D?n=e.nativeRange:I.implementsDomRange&&e instanceof k.getWindow(e.startContainer).Range&&(n=e),n}function d(t){if(!t.length||1!=t[0].nodeType)return!1;for(var e=1,n=t.length;n>e;++e)if(!k.isAncestorOf(t[0],t[e]))return!1;return!0}function f(t){var n=t.getNodes();if(!d(n))throw e.createError("getSingleElementFromRange: range "+t.inspect()+" did not consist of a single element");return n[0]}function p(t){return!!t&&"undefined"!=typeof t.text}function h(t,e){var n=new D(e);t._ranges=[n],s(t,n,!1),t.rangeCount=1,t.isCollapsed=n.collapsed}function g(e){if(e._ranges.length=0,"None"==e.docSelection.type)c(e);else{var n=e.docSelection.createRange();if(p(n))h(e,n);else{e.rangeCount=n.length;for(var o,a=H(n.item(0)),r=0;r<e.rangeCount;++r)o=t.createRange(a),o.selectNode(n.item(r)),e._ranges.push(o);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,s(e,e._ranges[e.rangeCount-1],!1)}}}function m(t,n){for(var o=t.docSelection.createRange(),a=f(n),r=H(o.item(0)),i=B(r).createControlRange(),s=0,l=o.length;l>s;++s)i.add(o.item(s));try{i.add(a)}catch(c){throw e.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}i.select(),g(t)}function v(t,e,n){this.nativeSelection=t,this.docSelection=e,this._ranges=[],this.win=n,this.refresh()}function y(t){t.win=t.anchorNode=t.focusNode=t._ranges=null,t.rangeCount=t.anchorOffset=t.focusOffset=0,t.detached=!0}function b(t,e){for(var n,o,a=et.length;a--;)if(n=et[a],o=n.selection,"deleteAll"==e)y(o);else if(n.win==t)return"delete"==e?(et.splice(a,1),!0):o;return"deleteAll"==e&&(et.length=0),null}function w(t,n){for(var o,a=H(n[0].startContainer),r=B(a).createControlRange(),i=0,s=n.length;s>i;++i){o=f(n[i]);try{r.add(o)}catch(l){throw e.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select(),g(t)}function C(t,e){if(t.win.document!=H(e))throw new _("WRONG_DOCUMENT_ERR")}function E(e){return function(n,o){var a;this.rangeCount?(a=this.getRangeAt(0),a["set"+(e?"Start":"End")](n,o)):(a=t.createRange(this.win.document),a.setStartAndEnd(n,o)),this.setSingleRange(a,this.isBackward())}}function T(t){var e=[],n=new L(t.anchorNode,t.anchorOffset),o=new L(t.focusNode,t.focusOffset),a="function"==typeof t.getName?t.getName():"Selection";if("undefined"!=typeof t.rangeCount)for(var r=0,i=t.rangeCount;i>r;++r)e[r]=O.inspect(t.getRangeAt(r));return"["+a+"(Ranges: "+e.join(", ")+")(anchor: "+n.inspect()+", focus: "+o.inspect()+"]"}t.config.checkSelectionRanges=!0;var x,S,N="boolean",R="number",k=t.dom,$=t.util,A=$.isHostMethod,O=t.DomRange,D=t.WrappedRange,_=t.DOMException,L=k.DomPosition,I=t.features,M="Control",H=k.getDocument,B=k.getBody,P=O.rangesEqual,j=A(window,"getSelection"),q=$.isHostObject(document,"selection");I.implementsWinGetSelection=j,I.implementsDocSelection=q;var W=q&&(!j||t.config.preferTextRange);if(W)x=r,t.isSelectionValid=function(t){var e=o(t,"isSelectionValid").document,n=e.selection;return"None"!=n.type||H(n.createRange().parentElement())==e};else{if(!j)return e.fail("Neither document.selection or window.getSelection() detected."),!1;x=a,t.isSelectionValid=function(){return!0}}t.getNativeSelection=x;var U=x();if(!U)return e.fail("Native selection was null (possibly issue 138?)"),!1;var F=t.createNativeRange(document),z=B(document),V=$.areHostProperties(U,["anchorNode","focusNode","anchorOffset","focusOffset"]);I.selectionHasAnchorAndFocus=V;var G=A(U,"extend");I.selectionHasExtend=G;var K=typeof U.rangeCount==R;I.selectionHasRangeCount=K;var Q=!1,X=!0,Y=G?function(e,n){var o=O.getRangeDocument(n),a=t.createRange(o);a.collapseToPoint(n.endContainer,n.endOffset),e.addRange(u(a)),e.extend(n.startContainer,n.startOffset)}:null;$.areHostMethods(U,["addRange","getRangeAt","removeAllRanges"])&&typeof U.rangeCount==R&&I.implementsDomRange&&!function(){var e=window.getSelection();if(e){for(var n=e.rangeCount,o=n>1,a=[],r=i(e),s=0;n>s;++s)a[s]=e.getRangeAt(s);var l=k.createTestElement(document,"",!1),c=l.appendChild(document.createTextNode("")),u=document.createRange();if(u.setStart(c,1),u.collapse(!0),e.removeAllRanges(),e.addRange(u),X=1==e.rangeCount,e.removeAllRanges(),!o){var d=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(d&&parseInt(d[1])>=36)Q=!1;else{var f=u.cloneRange();u.setStart(c,0),f.setEnd(c,3),f.setStart(c,2),e.addRange(u),e.addRange(f),Q=2==e.rangeCount}}for(k.removeNode(l),e.removeAllRanges(),s=0;n>s;++s)0==s&&r?Y?Y(e,a[s]):(t.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),e.addRange(a[s])):e.addRange(a[s])}}(),I.selectionSupportsMultipleRanges=Q,I.collapsedNonEditableSelectionsSupported=X;var Z,J=!1;z&&A(z,"createControlRange")&&(Z=z.createControlRange(),$.areHostProperties(Z,["item","add"])&&(J=!0)),I.implementsControlRange=J,S=V?function(t){return t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset}:function(t){return t.rangeCount?t.getRangeAt(t.rangeCount-1).collapsed:!1};var tt;A(U,"getRangeAt")?tt=function(t,e){try{return t.getRangeAt(e)}catch(n){return null}}:V&&(tt=function(e){var n=H(e.anchorNode),o=t.createRange(n);return o.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),o.collapsed!==this.isCollapsed&&o.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),o}),v.prototype=t.selectionPrototype;var et=[],nt=function(t){if(t&&t instanceof v)return t.refresh(),t;t=o(t,"getNativeSelection");var e=b(t),n=x(t),a=q?r(t):null;return e?(e.nativeSelection=n,e.docSelection=a,e.refresh()):(e=new v(n,a,t),et.push({win:t,selection:e})),e};t.getSelection=nt,$.createAliasForDeprecatedMethod(t,"getIframeSelection","getSelection");var ot=v.prototype;if(!W&&V&&$.areHostMethods(U,["removeAllRanges","addRange"])){ot.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),c(this)};var at=function(t,e){Y(t.nativeSelection,e),t.refresh()};ot.addRange=K?function(e,o){if(J&&q&&this.docSelection.type==M)m(this,e);else if(n(o)&&G)at(this,e);else{var a;Q?a=this.rangeCount:(this.removeAllRanges(),a=0);var r=u(e).cloneRange();try{this.nativeSelection.addRange(r)}catch(i){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==a+1){if(t.config.checkSelectionRanges){var l=tt(this.nativeSelection,this.rangeCount-1);l&&!P(l,e)&&(e=new D(l))}this._ranges[this.rangeCount-1]=e,s(this,e,st(this.nativeSelection)),this.isCollapsed=S(this)}else this.refresh()}}:function(t,e){n(e)&&G?at(this,t):(this.nativeSelection.addRange(u(t)),this.refresh())},ot.setRanges=function(t){if(J&&q&&t.length>1)w(this,t);else{this.removeAllRanges();for(var e=0,n=t.length;n>e;++e)this.addRange(t[e])}}}else{if(!(A(U,"empty")&&A(F,"select")&&J&&W))return e.fail("No means of selecting a Range or TextRange was found"),!1;ot.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var t;if(this.anchorNode)t=H(this.anchorNode);else if(this.docSelection.type==M){var e=this.docSelection.createRange();e.length&&(t=H(e.item(0)))}if(t){var n=B(t).createTextRange();n.select(),this.docSelection.empty()}}}catch(o){}c(this)},ot.addRange=function(e){this.docSelection.type==M?m(this,e):(t.WrappedTextRange.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,e,!1))},ot.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?w(this,t):e&&this.addRange(t[0])}}ot.getRangeAt=function(t){if(0>t||t>=this.rangeCount)throw new _("INDEX_SIZE_ERR");return this._ranges[t].cloneRange()};var rt;if(W)rt=function(e){var n;t.isSelectionValid(e.win)?n=e.docSelection.createRange():(n=B(e.win.document).createTextRange(),n.collapse(!0)),e.docSelection.type==M?g(e):p(n)?h(e,n):c(e)};else if(A(U,"getRangeAt")&&typeof U.rangeCount==R)rt=function(e){if(J&&q&&e.docSelection.type==M)g(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var n=0,o=e.rangeCount;o>n;++n)e._ranges[n]=new t.WrappedRange(e.nativeSelection.getRangeAt(n));s(e,e._ranges[e.rangeCount-1],st(e.nativeSelection)),e.isCollapsed=S(e)}else c(e)};else{if(!V||typeof U.isCollapsed!=N||typeof F.collapsed!=N||!I.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;rt=function(t){var e,n=t.nativeSelection;n.anchorNode?(e=tt(n,0),t._ranges=[e],t.rangeCount=1,l(t),t.isCollapsed=S(t)):c(t)}}ot.refresh=function(t){var e=t?this._ranges.slice(0):null,n=this.anchorNode,o=this.anchorOffset;if(rt(this),t){var a=e.length;if(a!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=o)return!0;for(;a--;)if(!P(e[a],this._ranges[a]))return!0;return!1}};var it=function(t,e){var n=t.getAllRanges();t.removeAllRanges();for(var o=0,a=n.length;a>o;++o)P(e,n[o])||t.addRange(n[o]);t.rangeCount||c(t)};ot.removeRange=J&&q?function(t){if(this.docSelection.type==M){for(var e,n=this.docSelection.createRange(),o=f(t),a=H(n.item(0)),r=B(a).createControlRange(),i=!1,s=0,l=n.length;l>s;++s)e=n.item(s),e!==o||i?r.add(n.item(s)):i=!0;r.select(),g(this)}else it(this,t)}:function(t){it(this,t)};var st;!W&&V&&I.implementsDomRange?(st=i,ot.isBackward=function(){return st(this)}):st=ot.isBackward=function(){return!1},ot.isBackwards=ot.isBackward,ot.toString=function(){for(var t=[],e=0,n=this.rangeCount;n>e;++e)t[e]=""+this._ranges[e];return t.join("")},ot.collapse=function(e,n){C(this,e);var o=t.createRange(e);o.collapseToPoint(e,n),this.setSingleRange(o),this.isCollapsed=!0},ot.collapseToStart=function(){if(!this.rangeCount)throw new _("INVALID_STATE_ERR");var t=this._ranges[0];this.collapse(t.startContainer,t.startOffset)},ot.collapseToEnd=function(){if(!this.rangeCount)throw new _("INVALID_STATE_ERR");var t=this._ranges[this.rangeCount-1];this.collapse(t.endContainer,t.endOffset)},ot.selectAllChildren=function(e){C(this,e);var n=t.createRange(e);n.selectNodeContents(e),this.setSingleRange(n)},ot.deleteFromDocument=function(){if(J&&q&&this.docSelection.type==M){for(var t,e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),k.removeNode(t);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var o=0,a=n.length;a>o;++o)n[o].deleteContents();this.addRange(n[a-1])}}},ot.eachRange=function(t,e){for(var n=0,o=this._ranges.length;o>n;++n)if(t(this.getRangeAt(n)))return e},ot.getAllRanges=function(){var t=[];return this.eachRange(function(e){t.push(e)}),t},ot.setSingleRange=function(t,e){this.removeAllRanges(),this.addRange(t,e)},ot.callMethodOnEachRange=function(t,e){var n=[];return this.eachRange(function(o){n.push(o[t].apply(o,e||[]))}),n},ot.setStart=E(!0),ot.setEnd=E(!1),t.rangePrototype.select=function(t){nt(this.getDocument()).setSingleRange(this,t)},ot.changeEachRange=function(t){var e=[],n=this.isBackward();this.eachRange(function(n){t(n),e.push(n)}),this.removeAllRanges(),n&&1==e.length?this.addRange(e[0],"backward"):this.setRanges(e)},ot.containsNode=function(t,e){return this.eachRange(function(n){return n.containsNode(t,e)},!0)||!1},ot.getBookmark=function(t){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[t])}},ot.moveToBookmark=function(e){for(var n,o,a=[],r=0;n=e.rangeBookmarks[r++];)o=t.createRange(this.win),o.moveToBookmark(n),a.push(o);e.backward?this.setSingleRange(a[0],"backward"):this.setRanges(a)},ot.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},ot.restoreRanges=function(t){this.removeAllRanges();for(var e,n=0;e=t.ranges[n];++n)this.addRange(e,t.backward&&0==n)},ot.toHtml=function(){var t=[];return this.eachRange(function(e){t.push(O.toHtml(e))}),t.join("")},I.implementsTextRange&&(ot.getNativeTextRange=function(){var n;if(n=this.docSelection){var o=n.createRange();if(p(o))return o;throw e.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return t.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw e.createError("getNativeTextRange: selection contains no range")}),ot.getName=function(){return"WrappedSelection"},ot.inspect=function(){return T(this)},ot.detach=function(){b(this.win,"delete"),y(this)},v.detachAll=function(){b(null,"deleteAll")},v.inspect=T,v.isDirectionBackward=n,t.Selection=v,t.selectionPrototype=ot,t.addShimListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return nt(t)}),t=null})});var B=!1,P=function(){B||(B=!0,!_.initialized&&_.config.autoInitialize&&d())};return O&&("complete"==document.readyState?P():(t(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",P,!1),I(window,"load",P))),_},this),function(e,n){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof t?module.exports=e(require("rangy")):e(n.rangy)}(function(t){return t.createModule("SaveRestore",["WrappedRange"],function(t,e){function n(t,e){return(e||document).getElementById(t)}function o(t,e){var n,o="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),a=h.getDocument(t.startContainer),r=t.cloneRange();return r.collapse(e),n=a.createElement("span"),n.id=o,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(a.createTextNode(v)),r.insertNode(n),n}function a(t,o,a,r){var i=n(a,t);i?(o[r?"setStartBefore":"setEndBefore"](i),g(i)):e.warn("Marker element has been removed. Cannot restore selection.")}function r(t,e){return e.compareBoundaryPoints(t.START_TO_START,t)}function i(e,n){var a,r,i=t.DomRange.getRangeDocument(e),s=e.toString(),l=m(n);return e.collapsed?(r=o(e,!1),{document:i,markerId:r.id,collapsed:!0}):(r=o(e,!1),a=o(e,!0),{document:i,startMarkerId:a.id,endMarkerId:r.id,collapsed:!1,backward:l,toString:function(){return"original text: '"+s+"', new text: '"+e.toString()+"'"}})}function s(o,r){var i=o.document;"undefined"==typeof r&&(r=!0);var s=t.createRange(i);if(o.collapsed){var l=n(o.markerId,i);if(l){l.style.display="inline";var c=l.previousSibling;c&&3==c.nodeType?(g(l),s.collapseToPoint(c,c.length)):(s.collapseBefore(l),g(l))}else e.warn("Marker element has been removed. Cannot restore selection.")}else a(i,s,o.startMarkerId,!0),a(i,s,o.endMarkerId,!1);return r&&s.normalizeBoundaries(),s}function l(e,o){var a,s,l=[],c=m(o);e=e.slice(0),e.sort(r);for(var u=0,d=e.length;d>u;++u)l[u]=i(e[u],c);for(u=d-1;u>=0;--u)a=e[u],s=t.DomRange.getRangeDocument(a),a.collapsed?a.collapseAfter(n(l[u].markerId,s)):(a.setEndBefore(n(l[u].endMarkerId,s)),a.setStartAfter(n(l[u].startMarkerId,s)));return l}function c(n){if(!t.isSelectionValid(n))return e.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var o=t.getSelection(n),a=o.getAllRanges(),r=1==a.length&&o.isBackward(),i=l(a,r);return r?o.setSingleRange(a[0],r):o.setRanges(a),{win:n,rangeInfos:i,restored:!1}}function u(t){for(var e=[],n=t.length,o=n-1;o>=0;o--)e[o]=s(t[o],!0);return e}function d(e,n){if(!e.restored){var o=e.rangeInfos,a=t.getSelection(e.win),r=u(o),i=o.length;1==i&&n&&t.features.selectionHasExtend&&o[0].backward?(a.removeAllRanges(),a.addRange(r[0],!0)):a.setRanges(r),e.restored=!0}}function f(t,e){var o=n(e,t);o&&g(o)}function p(t){for(var e,n=t.rangeInfos,o=0,a=n.length;a>o;++o)e=n[o],e.collapsed?f(t.doc,e.markerId):(f(t.doc,e.startMarkerId),f(t.doc,e.endMarkerId))}var h=t.dom,g=h.removeNode,m=t.Selection.isDirectionBackward,v="";t.util.extend(t,{saveRange:i,restoreRange:s,saveRanges:l,restoreRanges:u,saveSelection:c,restoreSelection:d,removeMarkerElement:f,removeMarkers:p})}),t},this)}({},function(){return this}()),!function(t,e){e["true"]=t,function(t,e){"use strict";function n(){this.$get=["$$sanitizeUri",function(t){return function(e){var n=[];return r(e,u(n,function(e,n){return!/^unsafe/.test(t(e,n))})),n.join("")}}]}function o(t){var n=[],o=u(n,e.noop);return o.chars(t),n.join("")}function a(t){var e,n={},o=t.split(",");for(e=0;e<o.length;e++)n[o[e]]=!0;return n}function r(t,n){function o(t,o,r,s){if(o=e.lowercase(o),N[o])for(;u.last()&&R[u.last()];)a("",u.last());S[o]&&u.last()==o&&a("",o),s=E[o]||!!s,s||u.push(o);var l={};r.replace(h,function(t,e,n,o,a){var r=n||o||a||"";l[e]=i(r)}),n.start&&n.start(o,l,s)}function a(t,o){var a,r=0;if(o=e.lowercase(o))for(r=u.length-1;r>=0&&u[r]!=o;r--);if(r>=0){for(a=u.length-1;a>=r;a--)n.end&&n.end(u[a]);u.length=r}}"string"!=typeof t&&(t=null===t||"undefined"==typeof t?"":""+t);var r,s,l,c,u=[],w=t;for(u.last=function(){return u[u.length-1]};t;){if(c="",s=!0,u.last()&&$[u.last()]?(t=t.replace(new RegExp("([^]*)<\\s*\\/\\s*"+u.last()+"[^>]*>","i"),function(t,e){return e=e.replace(v,"$1").replace(b,"$1"),n.chars&&n.chars(i(e)),""}),a("",u.last())):(0===t.indexOf("<!--")?(r=t.indexOf("--",4),r>=0&&t.lastIndexOf("-->",r)===r&&(n.comment&&n.comment(t.substring(4,r)),t=t.substring(r+3),s=!1)):y.test(t)?(l=t.match(y),l&&(t=t.replace(l[0],""),s=!1)):m.test(t)?(l=t.match(p),l&&(t=t.substring(l[0].length),l[0].replace(p,a),s=!1)):g.test(t)&&(l=t.match(f),l?(l[4]&&(t=t.substring(l[0].length),l[0].replace(f,o)),s=!1):(c+="<",t=t.substring(1))),s&&(r=t.indexOf("<"),c+=0>r?t:t.substring(0,r),t=0>r?"":t.substring(r),n.chars&&n.chars(i(c)))),t==w)throw d("badparse","The sanitizer was unable to parse the following block of html: {0}",t);w=t}a()}function i(t){if(!t)return"";var e=M.exec(t),n=e[1],o=e[3],a=e[2];return a&&(I.innerHTML=a.replace(/</g,"&lt;"),a="textContent"in I?I.textContent:I.innerText),n+a+o}function s(t){return t.replace(/&/g,"&amp;").replace(w,function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return"&#"+(1024*(e-55296)+(n-56320)+65536)+";"}).replace(C,function(t){var e=t.charCodeAt(0);return 159>=e||173==e||e>=1536&&1540>=e||1807==e||6068==e||6069==e||e>=8204&&8207>=e||e>=8232&&8239>=e||e>=8288&&8303>=e||65279==e||e>=65520&&65535>=e?"&#"+e+";":t}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(t){var n="",o=t.split(";");return e.forEach(o,function(t){var o=t.split(":");if(2==o.length){var a=H(e.lowercase(o[0])),t=H(e.lowercase(o[1]));(("color"===a||"background-color"===a)&&(t.match(/^rgb\([0-9%,\. ]*\)$/i)||t.match(/^rgba\([0-9%,\. ]*\)$/i)||t.match(/^hsl\([0-9%,\. ]*\)$/i)||t.match(/^hsla\([0-9%,\. ]*\)$/i)||t.match(/^#[0-9a-f]{3,6}$/i)||t.match(/^[a-z]*$/i))||"text-align"===a&&("left"===t||"right"===t||"center"===t||"justify"===t)||"float"===a&&("left"===t||"right"===t||"none"===t)||("width"===a||"height"===a)&&t.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===a&&t.match(/^ltr|rtl|initial|inherit$/))&&(n+=a+": "+t+";");

}}),n}function c(t,e,n,o){return"img"===t&&e["ta-insert-video"]&&("ta-insert-video"===n||"allowfullscreen"===n||"frameborder"===n||"contenteditable"===n&&"false"===o)?!0:!1}function u(t,n){var o=!1,a=e.bind(t,t.push);return{start:function(t,r,i){t=e.lowercase(t),!o&&$[t]&&(o=t),o||A[t]!==!0||(a("<"),a(t),e.forEach(r,function(o,i){var u=e.lowercase(i),d="img"===t&&"src"===u||"background"===u;("style"===u&&""!==(o=l(o))||c(t,r,u,o)||L[u]===!0&&(O[u]!==!0||n(o,d)))&&(a(" "),a(i),a('="'),a(s(o)),a('"'))}),a(i?"/>":">"))},end:function(t){t=e.lowercase(t),o||A[t]!==!0||(a("</"),a(t),a(">")),t==o&&(o=!1)},chars:function(t){o||a(s(t))}}}var d=e.$$minErr("$sanitize"),f=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,p=/^<\/\s*([\w:-]+)[^>]*>/,h=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,g=/^</,m=/^<\//,v=/<!--(.*?)-->/g,y=/<!DOCTYPE([^>]*?)>/i,b=/<!\[CDATA\[(.*?)]]>/g,w=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C=/([^\#-~| |!])/g,E=a("area,br,col,hr,img,wbr"),T=a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=a("rp,rt"),S=e.extend({},x,T),N=e.extend({},T,a("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),R=e.extend({},x,a("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),k=a("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),$=a("script,style"),A=e.extend({},E,N,R,S,k),O=a("background,cite,href,longdesc,src,usemap,xlink:href"),D=a("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),_=a("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),L=e.extend({},O,_,D),I=document.createElement("pre"),M=/^(\s*)([\s\S]*?)(\s*)$/,H=function(){return String.prototype.trim?function(t){return e.isString(t)?t.trim():t}:function(t){return e.isString(t)?t.replace(/^\s\s*/,"").replace(/\s\s*$/,""):t}}();e.module("ngSanitize",[]).provider("$sanitize",n),e.module("ngSanitize").filter("linky",["$sanitize",function(t){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,a=/^mailto:/;return function(r,i){function s(t){t&&p.push(o(t))}function l(t,n){p.push("<a "),e.isDefined(i)&&p.push('target="',i,'" '),p.push('href="',t.replace(/"/g,"&quot;"),'">'),s(n),p.push("</a>")}if(!r)return r;for(var c,u,d,f=r,p=[];c=f.match(n);)u=c[0],c[2]||c[4]||(u=(c[3]?"http://":"mailto:")+u),d=c.index,s(f.substr(0,d)),l(u,c[0].replace(a,"")),f=f.substring(d+c[0].length);return s(f),t(p.join(""))}}])}(window,window.angular)}({},function(){return this}()),!function(t,e){e["true"]=t,angular.module("textAngularSetup",[]).value("taOptions",{toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(){},htmlEditorSetup:function(){}},defaultFileDropHandler:function(t,e){var n=new FileReader;return"image"===t.type.substring(0,5)?(n.onload=function(){""!==n.result&&e("insertImage",n.result,!0)},n.readAsDataURL(t),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(t){var e=angular.element("<iframe></iframe>"),n=t.prop("attributes");angular.forEach(n,function(t){e.attr(t.name,t.value)}),e.attr("src",e.attr("ta-insert-video")),t.replaceWith(e)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).run(["taRegisterTool","$window","taTranslations","taSelection",function(t,e,n,o){t("html",{iconclass:"fa fa-code",tooltiptext:n.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var a=function(t){return function(){return this.$editor().queryFormatBlockState(t)}},r=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(e){t(e.toLowerCase(),{buttontext:e.toUpperCase(),tooltiptext:n.heading.tooltip+e.charAt(1),action:r,activeState:a(e.toLowerCase())})}),t("p",{buttontext:"P",tooltiptext:n.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),t("pre",{buttontext:"pre",tooltiptext:n.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),t("ul",{iconclass:"fa fa-list-ul",tooltiptext:n.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),t("ol",{iconclass:"fa fa-list-ol",tooltiptext:n.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),t("quote",{iconclass:"fa fa-quote-right",tooltiptext:n.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),t("undo",{iconclass:"fa fa-undo",tooltiptext:n.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),t("redo",{iconclass:"fa fa-repeat",tooltiptext:n.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),t("bold",{iconclass:"fa fa-bold",tooltiptext:n.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),t("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:n.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(t){var e=!1;return t&&(e="left"===t.css("text-align")||"left"===t.attr("align")||"right"!==t.css("text-align")&&"center"!==t.css("text-align")&&"justify"!==t.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),e=e||this.$editor().queryCommandState("justifyLeft")}}),t("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:n.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(t){var e=!1;return t&&(e="right"===t.css("text-align")),e=e||this.$editor().queryCommandState("justifyRight")}}),t("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:n.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(t){var e=!1;return t&&(e="center"===t.css("text-align")),e=e||this.$editor().queryCommandState("justifyCenter")}}),t("indent",{iconclass:"fa fa-indent",tooltiptext:n.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),t("outdent",{iconclass:"fa fa-outdent",tooltiptext:n.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1}}),t("italics",{iconclass:"fa fa-italic",tooltiptext:n.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),t("underline",{iconclass:"fa fa-underline",tooltiptext:n.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),t("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:n.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),t("clear",{iconclass:"fa fa-ban",tooltiptext:n.clear.tooltip,action:function(t,e){var n;this.$editor().wrapSelection("removeFormat",null);var a=angular.element(o.getSelectionElement()),r=function(t){t=angular.element(t);var e=t;angular.forEach(t.children(),function(t){var n=angular.element("<p></p>");n.html(angular.element(t).html()),e.after(n),e=n}),t.remove()};if(angular.forEach(a.find("ul"),r),angular.forEach(a.find("ol"),r),"li"===a[0].tagName.toLowerCase()){var i=a[0].parentNode.childNodes,s=[],l=[],c=!1;for(n=0;n<i.length;n++)i[n]===a[0]?c=!0:c?l.push(i[n]):s.push(i[n]);var u=angular.element(a[0].parentNode),d=angular.element("<p></p>");if(d.html(angular.element(a[0]).html()),0===s.length||0===l.length)0===l.length?u.after(d):u[0].parentNode.insertBefore(d[0],u[0]),0===s.length&&0===l.length?u.remove():angular.element(a[0]).remove();else{var f=angular.element("<"+u[0].tagName+"></"+u[0].tagName+">"),p=angular.element("<"+u[0].tagName+"></"+u[0].tagName+">");for(n=0;n<s.length;n++)f.append(angular.element(s[n]));for(n=0;n<l.length;n++)p.append(angular.element(l[n]));u.after(p),u.after(d),u.after(f),u.remove()}o.setSelectionToElementEnd(d[0])}var h=this.$editor(),g=function(t){t=angular.element(t),t[0]!==h.displayElements.text[0]&&t.removeAttr("class"),angular.forEach(t.children(),g)};angular.forEach(a,g),"li"!==a[0].tagName.toLowerCase()&&"ol"!==a[0].tagName.toLowerCase()&&"ul"!==a[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),e()}});var i=function(t,e,n){var o=function(){n.updateTaBindtaTextElement(),n.hidePopover()};t.preventDefault(),n.displayElements.popover.css("width","375px");var a=n.displayElements.popoverContainer;a.empty();var r=angular.element('<div class="btn-group" style="padding-right: 6px;">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');i.on("click",function(t){t.preventDefault(),e.css({width:"100%",height:""}),o()});var s=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');s.on("click",function(t){t.preventDefault(),e.css({width:"50%",height:""}),o()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');l.on("click",function(t){t.preventDefault(),e.css({width:"25%",height:""}),o()});var c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');c.on("click",function(t){t.preventDefault(),e.css({width:"",height:""}),o()}),r.append(i),r.append(s),r.append(l),r.append(c),a.append(r),r=angular.element('<div class="btn-group" style="padding-right: 6px;">');var u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');u.on("click",function(t){t.preventDefault(),e.css("float","left"),e.css("cssFloat","left"),e.css("styleFloat","left"),o()});var d=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');d.on("click",function(t){t.preventDefault(),e.css("float","right"),e.css("cssFloat","right"),e.css("styleFloat","right"),o()});var f=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');f.on("click",function(t){t.preventDefault(),e.css("float",""),e.css("cssFloat",""),e.css("styleFloat",""),o()}),r.append(u),r.append(f),r.append(d),a.append(r),r=angular.element('<div class="btn-group">');var p=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');p.on("click",function(t){t.preventDefault(),e.remove(),o()}),r.append(p),a.append(r),n.showPopover(e),n.showResizeOverlay(e)};t("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:n.insertImage.tooltip,action:function(){var t;return t=e.prompt(n.insertImage.dialogPrompt,"http://"),t&&""!==t&&"http://"!==t?this.$editor().wrapSelection("insertImage",t,!0):void 0},onElementSelect:{element:"img",action:i}}),t("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:n.insertVideo.tooltip,action:function(){var t;if(t=e.prompt(n.insertVideo.dialogPrompt,"https://"),t&&""!==t&&"https://"!==t){var o=t.match(/(\?|&)v=[^&]*/);if(o&&o.length>0){var a="https://www.youtube.com/embed/"+o[0].substring(3),r='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+o[0].substring(3)+'/hqdefault.jpg" ta-insert-video="'+a+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",r,!0)}}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:i}}),t("insertLink",{tooltiptext:n.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var t;return t=e.prompt(n.insertLink.dialogPrompt,"http://"),t&&""!==t&&"http://"!==t?this.$editor().wrapSelection("createLink",t,!0):void 0},activeState:function(t){return t?"A"===t[0].tagName:!1},onElementSelect:{element:"a",action:function(t,o,a){t.preventDefault(),a.displayElements.popover.css("width","436px");var r=a.displayElements.popoverContainer;r.empty(),r.css("line-height","28px");var i=angular.element('<a href="'+o.attr("href")+'" target="_blank">'+o.attr("href")+"</a>");i.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),r.append(i);var s=angular.element('<div class="btn-group pull-right">'),l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+n.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');l.on("click",function(t){t.preventDefault();var r=e.prompt(n.insertLink.dialogPrompt,o.attr("href"));r&&""!==r&&"http://"!==r&&(o.attr("href",r),a.updateTaBindtaTextElement()),a.hidePopover()}),s.append(l);var c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+n.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');c.on("click",function(t){t.preventDefault(),o.replaceWith(o.contents()),a.updateTaBindtaTextElement(),a.hidePopover()}),s.append(c);var u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+n.editLink.targetToggle.buttontext+"</button>");"_blank"===o.attr("target")&&u.addClass("active"),u.on("click",function(t){t.preventDefault(),o.attr("target","_blank"===o.attr("target")?"":"_blank"),u.toggleClass("active"),a.updateTaBindtaTextElement()}),s.append(u),r.append(s),a.showPopover(o)}}}),t("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var t=this.$editor().displayElements.text,e=t[0].innerHTML||"",n=0;return""!==e.replace(/\s*<[^>]*?>\s*/g,"")&&(n=e.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=n,this.$editor().wordcount=n,!1}}),t("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var t=this.$editor().displayElements.text,e=t[0].innerText||t[0].textContent,n=e.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=n,this.$editor().charcount=n,!1}})}]),function(){"use strict";function t(t){try{return 0!==angular.element(t).length}catch(e){return!1}}function e(e,n){if(!e||""===e||v.hasOwnProperty(e))throw"textAngular Error: A unique name is required for a Tool Definition";if(n.display&&(""===n.display||!t(n.display))||!n.display&&!n.buttontext&&!n.iconclass)throw'textAngular Error: Tool Definition for "'+e+'" does not have a valid display/iconclass/buttontext value';v[e]=n}var n={ie:function(){for(var t,e=3,n=document.createElement("div"),o=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",o[0];);return e>4?e:t}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},o=!1;n.webkit&&(document.addEventListener("mousedown",function(t){var e=t||window.event,n=e.target;if(o&&null!==n){for(var a=!1,r=n;null!==r&&"html"!==r.tagName.toLowerCase()&&!a;)a="true"===r.contentEditable,r=r.parentNode;a||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),n.focus(),n.select&&n.select())}o=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" unselectable="on" tabIndex="-1">'))}));var a=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,r=/^(ul|li|ol)$/i,i=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var s,l,c,u,d,f;if(n.ie>8||void 0===n.ie){for(var p=document.styleSheets,h=0;h<p.length;h++)if((0===p[h].media.length||p[h].media.mediaText.match(/(all|screen)/gi))&&p[h].href&&p[h].href.match(/textangular\.(min\.|)css/gi)){s=p[h];break}s||(s=function(){var t=document.createElement("style");return n.webkit&&t.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(t),t.sheet}()),l=function(t,e){return u(s,t,e)},u=function(t,e,n){var o,a;return t.cssRules?o=Math.max(t.cssRules.length-1,0):t.rules&&(o=Math.max(t.rules.length-1,0)),t.insertRule?t.insertRule(e+"{"+n+"}",o):t.addRule(e,n,o),s.rules?a=s.rules[o]:s.cssRules&&(a=s.cssRules[o]),a},f=function(t,e){var n,o;for(n=0;n<e.length;n++)if(e[n].cssText===t.cssText){o=n;break}return o},c=function(t){d(s,t)},d=function(t,e){var n=t.cssRules||t.rules;if(n){var o=f(e,n);t.removeRule?t.removeRule(o):t.deleteRule(o)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(t){return t?""===t?void 0===n.ie?"div":n.ie<=8?"P":"p":n.ie<=8?t.toUpperCase():t:n.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(t,e){return function(n){var o=angular.element("<div></div>");return o[0].innerHTML=n,angular.forEach(t,function(t){var n=[];t.selector&&""!==t.selector?n=o.find(t.selector):t.customAttribute&&""!==t.customAttribute&&(n=e.getByAttribute(o,t.customAttribute)),angular.forEach(n,function(e){e=angular.element(e),t.selector&&""!==t.selector&&t.customAttribute&&""!==t.customAttribute?void 0!==e.attr(t.customAttribute)&&t.renderLogic(e):t.renderLogic(e)})}),o[0].innerHTML}}]).factory("taFixChrome",function(){var t=function(t){if(!t||!angular.isString(t)||t.length<=0)return t;for(var e,n,o,a=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,r="",i=0;e=a.exec(t);)n=e[3]||e[4],n&&n.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(n=n.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi,""),o="<"+e[1].trim(),n.trim().length>0&&(o+=" style="+e[2].substring(0,1)+n+e[2].substring(0,1)),o+=e[5].trim()+">",r+=t.substring(i,e.index)+o,i=e.index+e[0].length);return r+=t.substring(i),i>0?r.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):t};return t}).factory("taSanitize",["$sanitize",function(t){function e(t,e){for(var n,o=0,a=0,r=/<[^>]*>/gi;n=r.exec(t);)if(a=n.index,"/"===n[0].substr(1,1)){if(0===o)break;o--}else o++;return e+t.substring(0,a)+angular.element(e)[0].outerHTML.substring(e.length)+t.substring(a)}function n(t){if(!t||!angular.isString(t)||t.length<=0)return t;for(var o,r,i,s,l,u,d=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",p="",h=0;r=d.exec(t);){s=r[3]||r[4];var g=new RegExp(c,"i");if(angular.isString(s)&&g.test(s)){l="";for(var m=new RegExp(c,"ig");i=m.exec(s);)for(o=0;o<a.length;o++)i[2*o+2]&&(l+="<"+a[o].tag+">");u=n(t.substring(h,r.index)),p+=f.length>0?e(u,f):u,s=s.replace(new RegExp(c,"ig"),""),p+="<"+r[1].trim(),s.length>0&&(p+=' style="'+s+'"'),p+=r[5]+">",h=r.index+r[0].length,f=l}}return p+=f.length>0?e(t.substring(h),f):t.substring(h)}function o(t){if(!t||!angular.isString(t)||t.length<=0)return t;for(var e,n=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,o="",a=0;e=n.exec(t);){o+=t.substring(a,e.index),a=e.index+e[0].length;var r="<"+e[1]+e[5];/style=("([^"]+)"|'([^']+)')/gi.test(r)?r=r.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(e[3]||e[4])+';"'):r+=' style="text-align:'+(e[3]||e[4])+';"',r+=">",o+=r}return o+t.substring(a)}for(var a=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],r=[],i=0;i<a.length;i++){for(var s="("+a[i].property+":\\s*(",l=0;l<a[i].values.length;l++)l>0&&(s+="|"),s+=a[i].values[l];s+=");)",r.push(s)}var c="("+r.join("|")+")";return function(e,a,r){if(!r)try{e=n(e)}catch(i){}e=o(e);var s;try{s=t(e),r&&(s=e)}catch(i){s=a||""}var l,c=s.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),u=s.replace(/(&#(9|10);)*/gi,""),d=/<pre[^>]*>.*?<\/pre[^>]*>/gi,f=0,p=0;for(s="";null!==(l=d.exec(u))&&f<c.length;)s+=u.substring(p,l.index)+c[f],p=l.index+l[0].length,f++;return s+u.substring(p)}}]).factory("taToolExecuteAction",["$q","$log",function(t,e){return function(n){void 0!==n&&(this.$editor=function(){return n});var o,a=t.defer(),r=a.promise,i=this.$editor();try{o=this.action(a,i.startAction()),r["finally"](function(){i.endAction.call(i)})}catch(s){e.error(s)}(o||void 0===o)&&a.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(t,e,n){var o=function(e,n){var o,a,r=e.find("li");for(a=r.length-1;a>=0;a--)o=angular.element("<"+n+">"+r[a].innerHTML+"</"+n+">"),e.after(o);e.remove(),t.setSelectionToElementEnd(o[0])},i=function(e){/(<br(|\/)>)$/i.test(e.innerHTML.trim())?t.setSelectionBeforeElement(angular.element(e).find("br")[0]):t.setSelectionToElementEnd(e)},s=function(t,e){var n=angular.element("<"+e+">"+t[0].innerHTML+"</"+e+">");t.after(n),t.remove(),i(n.find("li")[0])},l=function(t,n,o){for(var a="",r=0;r<t.length;r++)a+="<"+e("li")+">"+t[r].innerHTML+"</"+e("li")+">";var s=angular.element("<"+o+">"+a+"</"+o+">");n.after(s),n.remove(),i(s.find("li")[0])};return function(i,c){return i=e(i),function(u,d,f,p){var h,g,m,v,y,b,w,C=angular.element("<"+i+">");try{w=t.getSelectionElement()}catch(E){}var T=angular.element(w);if(void 0!==w){var x=w.tagName.toLowerCase();if("insertorderedlist"===u.toLowerCase()||"insertunorderedlist"===u.toLowerCase()){var S=e("insertorderedlist"===u.toLowerCase()?"ol":"ul");if(x===S)return o(T,i);if("li"===x&&T.parent()[0].tagName.toLowerCase()===S&&1===T.parent().children().length)return o(T.parent(),i);if("li"===x&&T.parent()[0].tagName.toLowerCase()!==S&&1===T.parent().children().length)return s(T.parent(),S);if(x.match(a)&&!T.hasClass("ta-bind")){if("ol"===x||"ul"===x)return s(T,S);var N=!1;return angular.forEach(T.children(),function(t){t.tagName.match(a)&&(N=!0)}),N?l(T.children(),T,S):l([angular.element("<div>"+w.innerHTML+"</div>")[0]],T,S)}if(x.match(a)){if(v=t.getOnlySelectedElements(),0===v.length)g=angular.element("<"+S+"><li>"+w.innerHTML+"</li></"+S+">"),T.html(""),T.append(g);else{if(1===v.length&&("ol"===v[0].tagName.toLowerCase()||"ul"===v[0].tagName.toLowerCase()))return v[0].tagName.toLowerCase()===S?o(angular.element(v[0]),i):s(angular.element(v[0]),S);m="";var R=[];for(h=0;h<v.length;h++)if(3!==v[h].nodeType){var k=angular.element(v[h]);if("li"===v[h].tagName.toLowerCase())continue;m+="ol"===v[h].tagName.toLowerCase()||"ul"===v[h].tagName.toLowerCase()?k[0].innerHTML:"span"!==v[h].tagName.toLowerCase()||"ol"!==v[h].childNodes[0].tagName.toLowerCase()&&"ul"!==v[h].childNodes[0].tagName.toLowerCase()?"<"+e("li")+">"+k[0].innerHTML+"</"+e("li")+">":k[0].childNodes[0].innerHTML,R.unshift(k)}g=angular.element("<"+S+">"+m+"</"+S+">"),R.pop().replaceWith(g),angular.forEach(R,function(t){t.remove()})}return void t.setSelectionToElementEnd(g[0])}}else{if("formatblock"===u.toLowerCase()){for(b=f.toLowerCase().replace(/[<>]/gi,""),"default"===b.trim()&&(b=i,f="<"+i+">"),g="li"===x?T.parent():T;!g[0].tagName||!g[0].tagName.match(a)&&!g.parent().attr("contenteditable");)g=g.parent(),x=(g[0].tagName||"").toLowerCase();if(x===b){v=g.children();var $=!1;for(h=0;h<v.length;h++)$=$||v[h].tagName.match(a);$?(g.after(v),y=g.next(),g.remove(),g=y):(C.append(g[0].childNodes),g.after(C),g.remove(),g=C)}else if(g.parent()[0].tagName.toLowerCase()!==b||g.parent().hasClass("ta-bind"))if(x.match(r))g.wrap(f);else{for(v=t.getOnlySelectedElements(),0===v.length&&(v=[g[0]]),h=0;h<v.length;h++)if(3===v[h].nodeType||!v[h].tagName.match(a))for(;3===v[h].nodeType||!v[h].tagName||!v[h].tagName.match(a);)v[h]=v[h].parentNode;if(angular.element(v[0]).hasClass("ta-bind"))g=angular.element(f),g[0].innerHTML=v[0].innerHTML,v[0].innerHTML=g[0].outerHTML;else if("blockquote"===b){for(m="",h=0;h<v.length;h++)m+=v[h].outerHTML;for(g=angular.element(f),g[0].innerHTML=m,v[0].parentNode.insertBefore(g[0],v[0]),h=v.length-1;h>=0;h--)v[h].parentNode&&v[h].parentNode.removeChild(v[h])}else for(h=0;h<v.length;h++)g=angular.element(f),g[0].innerHTML=v[h].innerHTML,v[h].parentNode.insertBefore(g[0],v[h]),v[h].parentNode.removeChild(v[h])}else{var A=g.parent(),O=A.contents();for(h=0;h<O.length;h++)A.parent().hasClass("ta-bind")&&3===O[h].nodeType&&(C=angular.element("<"+i+">"),C[0].innerHTML=O[h].outerHTML,O[h]=C[0]),A.parent()[0].insertBefore(O[h],A[0]);A.remove()}return void t.setSelectionToElementEnd(g[0])}if("createlink"===u.toLowerCase()){var D='<a href="'+f+'" target="'+(p.a.target?p.a.target:"")+'">',_="</a>",L=t.getSelection();if(L.collapsed)t.insertHtml(D+f+_,c);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var I=angular.element(D+_)[0];rangy.getSelection().getRangeAt(0).surroundContents(I)}return}if("inserthtml"===u.toLowerCase())return void t.insertHtml(f,c)}}try{n[0].execCommand(u,d,f)}catch(E){}}}}]).service("taSelection",["$window","$document","taDOM",function(t,e,n){var o=e[0],r=t.rangy,s=function(t,e){return t.tagName&&t.tagName.match(/^br$/i)&&0===e&&!t.previousSibling?{element:t.parentNode,offset:0}:{element:t,offset:e}},l={getSelection:function(){var t=r.getSelection().getRangeAt(0),e=t.commonAncestorContainer,n={start:s(t.startContainer,t.startOffset),end:s(t.endContainer,t.endOffset),collapsed:t.collapsed};return e=3===e.nodeType?e.parentNode:e,n.container=e.parentNode===n.start.element||e.parentNode===n.end.element?e.parentNode:e,n},getOnlySelectedElements:function(){var t=r.getSelection().getRangeAt(0),e=t.commonAncestorContainer;return e=3===e.nodeType?e.parentNode:e,t.getNodes([1],function(t){return t.parentNode===e})},getSelectionElement:function(){return l.getSelection().container},setSelection:function(t,e,n){var o=r.createRange();o.setStart(t,e),o.setEnd(t,n),r.getSelection().setSingleRange(o)},setSelectionBeforeElement:function(t){var e=r.createRange();e.selectNode(t),e.collapse(!0),r.getSelection().setSingleRange(e)},setSelectionAfterElement:function(t){var e=r.createRange();e.selectNode(t),e.collapse(!1),r.getSelection().setSingleRange(e)},setSelectionToElementStart:function(t){var e=r.createRange();e.selectNodeContents(t),e.collapse(!0),r.getSelection().setSingleRange(e)},setSelectionToElementEnd:function(t){var e=r.createRange();e.selectNodeContents(t),e.collapse(!1),t.childNodes&&t.childNodes[t.childNodes.length-1]&&"br"===t.childNodes[t.childNodes.length-1].nodeName&&(e.startOffset=e.endOffset=e.startOffset-1),r.getSelection().setSingleRange(e)},insertHtml:function(t,e){var s,c,u,d,f,p,h,g=angular.element("<div>"+t+"</div>"),m=r.getSelection().getRangeAt(0),v=o.createDocumentFragment(),y=g[0].childNodes,b=!0;if(y.length>0){for(d=[],u=0;u<y.length;u++)"p"===y[u].nodeName.toLowerCase()&&""===y[u].innerHTML.trim()||3===y[u].nodeType&&""===y[u].nodeValue.trim()||(b=b&&!a.test(y[u].nodeName),d.push(y[u]));for(var w=0;w<d.length;w++)p=v.appendChild(d[w]);!b&&m.collapsed&&/^(|<br(|\/)>)$/i.test(m.startContainer.innerHTML)&&m.selectNode(m.startContainer)}else b=!0,p=v=o.createTextNode(t);if(b)m.deleteContents();
else if(m.collapsed&&m.startContainer!==e)if(m.startContainer.innerHTML&&m.startContainer.innerHTML.match(/^<[^>]*>$/i))s=m.startContainer,1===m.startOffset?(m.setStartAfter(s),m.setEndAfter(s)):(m.setStartBefore(s),m.setEndBefore(s));else{if(3===m.startContainer.nodeType&&m.startContainer.parentNode!==e)for(s=m.startContainer.parentNode,c=s.cloneNode(),n.splitNodes(s.childNodes,s,c,m.startContainer,m.startOffset);!i.test(s.nodeName);){angular.element(s).after(c),s=s.parentNode;var C=c;c=s.cloneNode(),n.splitNodes(s.childNodes,s,c,C)}else s=m.startContainer,c=s.cloneNode(),n.splitNodes(s.childNodes,s,c,void 0,void 0,m.startOffset);if(angular.element(s).after(c),m.setStartAfter(s),m.setEndAfter(s),/^(|<br(|\/)>)$/i.test(s.innerHTML.trim())&&(m.setStartBefore(s),m.setEndBefore(s),angular.element(s).remove()),/^(|<br(|\/)>)$/i.test(c.innerHTML.trim())&&angular.element(c).remove(),"li"===s.nodeName.toLowerCase()){for(h=o.createDocumentFragment(),f=0;f<v.childNodes.length;f++)g=angular.element("<li>"),n.transferChildNodes(v.childNodes[f],g[0]),n.transferNodeAttributes(v.childNodes[f],g[0]),h.appendChild(g[0]);v=h,p&&(p=v.childNodes[v.childNodes.length-1],p=p.childNodes[p.childNodes.length-1])}}else m.deleteContents();m.insertNode(v),p&&l.setSelectionToElementEnd(p)}};return l}]).service("taDOM",function(){var t={getByAttribute:function(e,n){var o=[],a=e.children();return a.length&&angular.forEach(a,function(e){o=o.concat(t.getByAttribute(angular.element(e),n))}),void 0!==e.attr(n)&&o.push(e),o},transferChildNodes:function(t,e){for(e.innerHTML="";t.childNodes.length>0;)e.appendChild(t.childNodes[0]);return e},splitNodes:function(e,n,o,a,r,i){if(!a&&isNaN(i))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var s=document.createDocumentFragment(),l=document.createDocumentFragment(),c=0;e.length>0&&(isNaN(i)||i!==c)&&e[0]!==a;)s.appendChild(e[0]),c++;for(!isNaN(r)&&r>=0&&e[0]&&(s.appendChild(document.createTextNode(e[0].nodeValue.substring(0,r))),e[0].nodeValue=e[0].nodeValue.substring(r));e.length>0;)l.appendChild(e[0]);t.transferChildNodes(s,n),t.transferChildNodes(l,o)},transferNodeAttributes:function(t,e){for(var n=0;n<t.attributes.length;n++)e.setAttribute(t.attributes[n].name,t.attributes[n].value);return e}};return t}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(t,e,n,o){var a=parseInt(t.$eval(n.taMaxText));if(isNaN(a))throw"Max text must be an integer";n.$observe("taMaxText",function(t){if(a=parseInt(t),isNaN(a))throw"Max text must be an integer";o.$dirty&&o.$validate()}),o.$validators.taMaxText=function(t){var e=angular.element("<div/>");return e.html(t),e.text().length<=a}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(t,e,n,o){var a=parseInt(t.$eval(n.taMinText));if(isNaN(a))throw"Min text must be an integer";n.$observe("taMinText",function(t){if(a=parseInt(t),isNaN(a))throw"Min text must be an integer";o.$dirty&&o.$validate()}),o.$validators.taMinText=function(t){var e=angular.element("<div/>");return e.html(t),!e.text().length||e.text().length>=a}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var t=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(e){return function(n){if(!n)return!0;var o,a=/(^[^<]|>)[^<]/i.exec(n);return a?o=a.index:(n=n.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),o=n.indexOf(">")),n=n.trim().substring(o,o+100),/^[^<>]+$/i.test(n)?!1:0===n.length||n===e||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(n)?!0:/>\s*[^\s<]/i.test(n)||t.test(n)?!1:!0}}}]).directive("taButton",[function(){return{link:function(t,e){e.attr("unselectable","on"),e.on("mousedown",function(t,e){return e&&angular.extend(t,e),t.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM",function(t,e,r,s,u,d,f,p,h,m,v,y,b){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(d,w,C,E){var T,x,S,N,R=E[0],k=E[1]||{},$=void 0!==w.attr("contenteditable")&&w.attr("contenteditable"),A=$||"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase(),O=!1,D=!1,_=!1,L=C.taUnsafeSanitizer||m.disableSanitizer,I=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,M=/^(8|13|32|46|59|61|107|109|186|187|188|189|190|191|192|219|220|221|222)$/i;void 0===C.taDefaultWrap&&(C.taDefaultWrap="p"),""===C.taDefaultWrap?(S="",N=void 0===n.ie?"<div><br></div>":n.ie>=11?"<p><br></p>":n.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(S=void 0===n.ie||n.ie>=11?"<"+C.taDefaultWrap+"><br></"+C.taDefaultWrap+">":n.ie<=8?"<"+C.taDefaultWrap.toUpperCase()+"></"+C.taDefaultWrap.toUpperCase()+">":"<"+C.taDefaultWrap+"></"+C.taDefaultWrap+">",N=void 0===n.ie||n.ie>=11?"<"+C.taDefaultWrap+"><br></"+C.taDefaultWrap+">":n.ie<=8?"<"+C.taDefaultWrap.toUpperCase()+">&nbsp;</"+C.taDefaultWrap.toUpperCase()+">":"<"+C.taDefaultWrap+">&nbsp;</"+C.taDefaultWrap+">"),k.$options||(k.$options={});var H=v(N),B=function(t){if(H(t))return t;var e=angular.element("<div>"+t+"</div>");if(0===e.children().length)t="<"+C.taDefaultWrap+">"+t+"</"+C.taDefaultWrap+">";else{var n,o=e[0].childNodes,r=!1;for(n=0;n<o.length&&!(r=o[n].nodeName.toLowerCase().match(a));n++);if(r)for(t="",n=0;n<o.length;n++)if(o[n].nodeName.toLowerCase().match(a))t+=o[n].outerHTML;else{var i=o[n].outerHTML||o[n].nodeValue;t+=""!==i.trim()?"<"+C.taDefaultWrap+">"+i+"</"+C.taDefaultWrap+">":i}else t="<"+C.taDefaultWrap+">"+t+"</"+C.taDefaultWrap+">"}return t};C.taPaste&&(x=y(C.taPaste)),w.addClass("ta-bind");var P;d["$undoManager"+(C.id||"")]=R.$undoManager={_stack:[],_index:0,_max:1e3,push:function(t){return"undefined"==typeof t||null===t||"undefined"!=typeof this.current()&&null!==this.current()&&t===this.current()?t:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(t),P&&e.cancel(P),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,t)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(t){return 0>t||t>this._stack.length-1?void 0:(this._index=t,this.current())},current:function(){return this._stack[this._index]}};var j,q=d["$undoTaBind"+(C.id||"")]=function(){if(!O&&$){var t=R.$undoManager.undo();"undefined"!=typeof t&&null!==t&&(nt(t),F(t,!1),j&&e.cancel(j),j=e(function(){w[0].focus(),f.setSelectionToElementEnd(w[0])},1))}},W=d["$redoTaBind"+(C.id||"")]=function(){if(!O&&$){var t=R.$undoManager.redo();"undefined"!=typeof t&&null!==t&&(nt(t),F(t,!1),j&&e.cancel(j),j=e(function(){w[0].focus(),f.setSelectionToElementEnd(w[0])},1))}},U=function(){if($)return w[0].innerHTML;if(A)return w.val();throw"textAngular Error: attempting to update non-editable taBind"},F=function(t,e,n){_=n||!1,("undefined"==typeof e||null===e)&&(e=!0&&$),("undefined"==typeof t||null===t)&&(t=U()),H(t)?(""!==R.$viewValue&&R.$setViewValue(""),e&&""!==R.$undoManager.current()&&R.$undoManager.push("")):(et(),R.$viewValue!==t&&(R.$setViewValue(t),e&&R.$undoManager.push(t))),R.$render()};d["updateTaBind"+(C.id||"")]=function(){O||F(void 0,void 0,!0)};var z=function(e){return R.$oldViewValue=t(u(e),R.$oldViewValue,L)};if(w.attr("required")&&(R.$validators.required=function(t,e){return!H(t||e)}),R.$parsers.push(z),R.$parsers.unshift(B),R.$formatters.push(z),R.$formatters.unshift(B),R.$formatters.unshift(function(t){return R.$undoManager.push(t||"")}),A)if(d.events={},$){var V=!1,G=function(n){if(n&&n.trim().length){if(n.match(/class=["']*Mso(Normal|List)/i)){var o=n.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);o=o?o[1]:n,o=o.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var a=angular.element("<div>"+o+"</div>"),r=angular.element("<div></div>"),i={element:null,lastIndent:[],lastLi:null,isUl:!1};i.lastIndent.peek=function(){var t=this.length;return t>0?this[t-1]:void 0};for(var s=function(t){i.isUl=t,i.element=angular.element(t?"<ul>":"<ol>"),i.lastIndent=[],i.lastIndent.peek=function(){var t=this.length;return t>0?this[t-1]:void 0},i.lastLevelMatch=null},l=0;l<=a[0].childNodes.length;l++)if(a[0].childNodes[l]&&"#text"!==a[0].childNodes[l].nodeName&&"p"===a[0].childNodes[l].tagName.toLowerCase()){var c=angular.element(a[0].childNodes[l]),u=(c.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(u){if(c[0].childNodes.length<2||c[0].childNodes[1].childNodes.length<1)continue;var p="bullet"===u[1].toLowerCase()||"number"!==u[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(c[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(c[0].childNodes[1].childNodes[0].innerHTML)),h=(c.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),g=parseFloat(h?h[1]:0),m=(c.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(m&&m[2]&&(g=parseInt(m[2])),m&&(!i.lastLevelMatch||m[1]!==i.lastLevelMatch[1])||!u[3]||"first"===u[3].toLowerCase()||null===i.lastIndent.peek()||i.isUl!==p&&i.lastIndent.peek()===g)s(p),r.append(i.element);else if(null!=i.lastIndent.peek()&&i.lastIndent.peek()<g)i.element=angular.element(p?"<ul>":"<ol>"),i.lastLi.append(i.element);else if(null!=i.lastIndent.peek()&&i.lastIndent.peek()>g){for(;null!=i.lastIndent.peek()&&i.lastIndent.peek()>g;)if("li"!==i.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(i.element.parent()[0].tagName.toLowerCase()))break;i.element=i.element.parent(),i.lastIndent.pop()}else i.element=i.element.parent();i.isUl="ul"===i.element[0].tagName.toLowerCase(),p!==i.isUl&&(s(p),r.append(i.element))}i.lastLevelMatch=m,g!==i.lastIndent.peek()&&i.lastIndent.push(g),i.lastLi=angular.element("<li>"),i.element.append(i.lastLi),i.lastLi.html(c.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),c.remove()}else s(!1),r.append(c)}var v=function(t){t=angular.element(t);for(var e=t[0].childNodes.length-1;e>=0;e--)t.after(t[0].childNodes[e]);t.remove()};angular.forEach(r.find("span"),function(t){t.removeAttribute("lang"),t.attributes.length<=0&&v(t)}),angular.forEach(r.find("font"),v),n=r.html()}else{if(n=n.replace(/<(|\/)meta[^>]*?>/gi,""),n.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(n.match(/<[^>]*?(text-angular)[^>]*?>/)){var y=angular.element("<div>"+n+"</div>");y.find("textarea").remove();for(var C=b.getByAttribute(y,"ta-bind"),E=0;E<C.length;E++){for(var T=C[E][0].parentNode.parentNode,S=0;S<C[E][0].childNodes.length;S++)T.parentNode.insertBefore(C[E][0].childNodes[S],T);T.parentNode.removeChild(T)}n=y.html().replace('<br class="Apple-interchange-newline">',"")}}else n.match(/^<span/)&&(n=n.replace(/<(|\/)span[^>]*?>/gi,""));n=n.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(n)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(n)===!1&&(n=n.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),x&&(n=x(d,{$html:n})||n),n=t(n,"",L),f.insertHtml(n,w[0]),e(function(){R.$setViewValue(U()),V=!1,w.removeClass("processing-paste")},0)}else V=!1,w.removeClass("processing-paste")};w.on("paste",d.events.paste=function(t,n){if(n&&angular.extend(t,n),O||V)return t.stopPropagation(),t.preventDefault(),!1;V=!0,w.addClass("processing-paste");var o,a=(t.originalEvent||t).clipboardData;if(a&&a.getData&&a.types.length>0){for(var i="",l=0;l<a.types.length;l++)i+=" "+a.types[l];return/text\/html/i.test(i)?o=a.getData("text/html"):/text\/plain/i.test(i)&&(o=a.getData("text/plain")),G(o),t.stopPropagation(),t.preventDefault(),!1}var c=r.rangy.saveSelection(),u=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');s.find("body").append(u),u[0].focus(),e(function(){r.rangy.restoreSelection(c),G(u[0].innerHTML),w[0].focus(),u.remove()},0)}),w.on("cut",d.events.cut=function(t){O?t.preventDefault():e(function(){R.$setViewValue(U())},0)}),w.on("keydown",d.events.keydown=function(t,e){if(e&&angular.extend(t,e),!O)if(t.altKey||!t.metaKey&&!t.ctrlKey){if(13===t.keyCode&&!t.shiftKey){var n,o=f.getSelectionElement();if(!o.tagName.match(i))return;var a=angular.element(S);if(/^<br(|\/)>$/i.test(o.innerHTML.trim())&&"blockquote"===o.parentNode.tagName.toLowerCase()&&!o.nextSibling){n=angular.element(o);var r=n.parent();r.after(a),n.remove(),0===r.children().length&&r.remove(),f.setSelectionToElementStart(a[0]),t.preventDefault()}else/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(o.innerHTML.trim())&&"blockquote"===o.tagName.toLowerCase()&&(n=angular.element(o),n.after(a),n.remove(),f.setSelectionToElementStart(a[0]),t.preventDefault())}}else 90!==t.keyCode||t.shiftKey?(90===t.keyCode&&t.shiftKey||89===t.keyCode&&!t.shiftKey)&&(W(),t.preventDefault()):(q(),t.preventDefault())});var K;if(w.on("keyup",d.events.keyup=function(t,n){if(n&&angular.extend(t,n),9===t.keyCode){var o=f.getSelection();return void(o.start.element===w[0]&&w.children().length&&f.setSelectionToElementStart(w.children()[0]))}if(P&&e.cancel(P),!O&&!I.test(t.keyCode)){if(""!==S&&13===t.keyCode&&!t.shiftKey){for(var a=f.getSelectionElement();!a.tagName.match(i)&&a!==w[0];)a=a.parentNode;if(a.tagName.toLowerCase()!==C.taDefaultWrap&&"li"!==a.tagName.toLowerCase()&&(""===a.innerHTML.trim()||"<br>"===a.innerHTML.trim())){var s=angular.element(S);angular.element(a).replaceWith(s),f.setSelectionToElementStart(s[0])}}var l=U();if(""!==S&&""===l.trim())nt(S),f.setSelectionToElementStart(w.children()[0]);else if("<"!==l.substring(0,1)&&""!==C.taDefaultWrap){var c=r.rangy.saveSelection();l=U(),l="<"+C.taDefaultWrap+">"+l+"</"+C.taDefaultWrap+">",nt(l),r.rangy.restoreSelection(c)}var u=T!==t.keyCode&&M.test(t.keyCode);K&&e.cancel(K),K=e(function(){F(l,u,!0)},k.$options.debounce||400),u||(P=e(function(){R.$undoManager.push(l)},250)),T=t.keyCode}}),w.on("blur",d.events.blur=function(){D=!1,O?(_=!0,R.$render()):F(void 0,void 0,!0)}),C.placeholder&&(n.ie>8||void 0===n.ie)){var Q;if(!C.id)throw"textAngular Error: An unique ID is required for placeholders to work";Q=l("#"+C.id+".placeholder-text:before",'content: "'+C.placeholder+'"'),d.$on("$destroy",function(){c(Q)})}w.on("focus",d.events.focus=function(){D=!0,w.removeClass("placeholder-text")}),w.on("mouseup",d.events.mouseup=function(){var t=f.getSelection();t.start.element===w[0]&&w.children().length&&f.setSelectionToElementStart(w.children()[0])}),w.on("mousedown",d.events.mousedown=function(t,e){e&&angular.extend(t,e),t.stopPropagation()})}else{w.on("change blur",d.events.change=d.events.blur=function(){O||R.$setViewValue(U())}),w.on("keydown",d.events.keydown=function(t,e){if(e&&angular.extend(t,e),9===t.keyCode){var n=this.selectionStart,o=this.selectionEnd,a=w.val();if(t.shiftKey){var r=a.lastIndexOf("\n",n),i=a.lastIndexOf("	",n);-1!==i&&i>=r&&(w.val(a.substring(0,i)+a.substring(i+1)),this.selectionStart=this.selectionEnd=n-1)}else w.val(a.substring(0,n)+"	"+a.substring(o)),this.selectionStart=this.selectionEnd=n+1;t.preventDefault()}});var X=function(t,e){for(var n="",o=0;e>o;o++)n+=t;return n},Y=function(t,e){var n="",o=t.childNodes;e++,n+=X("	",e-1)+t.outerHTML.substring(0,t.outerHTML.indexOf("<li"));for(var a=0;a<o.length;a++)o[a].outerHTML&&(n+="ul"===o[a].nodeName.toLowerCase()||"ol"===o[a].nodeName.toLowerCase()?"\n"+Y(o[a],e):"\n"+X("	",e)+o[a].outerHTML);return n+="\n"+X("	",e-1)+t.outerHTML.substring(t.outerHTML.lastIndexOf("<"))};R.$formatters.unshift(function(t){var e=angular.element("<div>"+t+"</div>")[0].childNodes;if(e.length>0){t="";for(var n=0;n<e.length;n++)e[n].outerHTML&&(t.length>0&&(t+="\n"),t+="ul"===e[n].nodeName.toLowerCase()||"ol"===e[n].nodeName.toLowerCase()?""+Y(e[n],0):""+e[n].outerHTML)}return t})}var Z,J=function(t){return d.$emit("ta-element-select",this),t.preventDefault(),!1},tt=function(t,n){if(n&&angular.extend(t,n),!g&&!O){g=!0;var o;o=t.originalEvent?t.originalEvent.dataTransfer:t.dataTransfer,d.$emit("ta-drop-event",this,t,o),e(function(){g=!1,F(void 0,void 0,!0)},100)}},et=d["reApplyOnSelectorHandlers"+(C.id||"")]=function(){O||angular.forEach(p,function(t){w.find(t).off("click",J).on("click",J)})},nt=function(t){w[0].innerHTML=t},ot=!1;R.$render=function(){if(!ot){ot=!0;var t=R.$viewValue||"";_||($&&D&&(w.removeClass("placeholder-text"),Z&&e.cancel(Z),Z=e(function(){D||(w[0].focus(),f.setSelectionToElementEnd(w.children()[w.children().length-1])),Z=void 0},1)),$?(nt(C.placeholder?""===t?S:t:""===t?S:t),O?w.off("drop",tt):(et(),w.on("drop",tt))):"textarea"!==w[0].tagName.toLowerCase()&&"input"!==w[0].tagName.toLowerCase()?nt(h(t)):w.val(t)),$&&C.placeholder&&(""===t?D?w.removeClass("placeholder-text"):w.addClass("placeholder-text"):w.removeClass("placeholder-text")),ot=_=!1}},C.taReadonly&&(O=d.$eval(C.taReadonly),O?(w.addClass("ta-readonly"),("textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase())&&w.attr("disabled","disabled"),void 0!==w.attr("contenteditable")&&w.attr("contenteditable")&&w.removeAttr("contenteditable")):(w.removeClass("ta-readonly"),"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase()?w.removeAttr("disabled"):$&&w.attr("contenteditable","true")),d.$watch(C.taReadonly,function(t,e){e!==t&&(t?(w.addClass("ta-readonly"),("textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase())&&w.attr("disabled","disabled"),void 0!==w.attr("contenteditable")&&w.attr("contenteditable")&&w.removeAttr("contenteditable"),angular.forEach(p,function(t){w.find(t).on("click",J)}),w.off("drop",tt)):(w.removeClass("ta-readonly"),"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase()?w.removeAttr("disabled"):$&&w.attr("contenteditable","true"),angular.forEach(p,function(t){w.find(t).off("click",J)}),w.on("drop",tt)),O=t)})),$&&!O&&(angular.forEach(p,function(t){w.find(t).on("click",J)}),w.on("drop",tt),w.on("blur",function(){n.webkit&&(o=!0)}))}}}]);var g=!1,m=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]),v={};m.constant("taRegisterTool",e),m.value("taTools",v),m.config([function(){angular.forEach(v,function(t,e){delete v[e]})}]),m.run([function(){if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}]),m.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(t,e,n,o,a,r,i,s,l,c,u,d){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(f,p,h,g){var m,v,y,b,w,C,E,T,x,S,N,R=h.serial?h.serial:Math.floor(1e16*Math.random());f._name=h.name?h.name:"textAngularEditor"+R;var k=function(t,n,o){e(function(){var e=function(){t.off(n,e),o.apply(this,arguments)};t.on(n,e)},100)};if(x=a(h.taDefaultWrap),angular.extend(f,angular.copy(n),{wrapSelection:function(t,e,n){"undo"===t.toLowerCase()?f["$undoTaBindtaTextElement"+R]():"redo"===t.toLowerCase()?f["$redoTaBindtaTextElement"+R]():(x(t,!1,e,f.defaultTagAttributes),n&&f["reApplyOnSelectorHandlerstaTextElement"+R](),f.displayElements.text[0].focus())},showHtml:f.$eval(h.taShowHtml)||!1}),h.taFocussedClass&&(f.classes.focussed=h.taFocussedClass),h.taTextEditorClass&&(f.classes.textEditor=h.taTextEditorClass),h.taHtmlEditorClass&&(f.classes.htmlEditor=h.taHtmlEditorClass),h.taDefaultTagAttributes)try{angular.extend(f.defaultTagAttributes,angular.fromJson(h.taDefaultTagAttributes))}catch($){c.error($)}h.taTextEditorSetup&&(f.setup.textEditorSetup=f.$parent.$eval(h.taTextEditorSetup)),h.taHtmlEditorSetup&&(f.setup.htmlEditorSetup=f.$parent.$eval(h.taHtmlEditorSetup)),f.fileDropHandler=h.taFileDrop?f.$parent.$eval(h.taFileDrop):f.defaultFileDropHandler,E=p[0].innerHTML,p[0].innerHTML="",f.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},f.displayElements.popover.append(f.displayElements.popoverArrow),f.displayElements.popover.append(f.displayElements.popoverContainer),f.displayElements.scrollWindow.append(f.displayElements.popover),f.displayElements.popover.on("mousedown",function(t,e){return e&&angular.extend(t,e),t.preventDefault(),!1}),f.showPopover=function(t){f.displayElements.popover.css("display","block"),f.reflowPopover(t),l.addClass(f.displayElements.popover,"in"),k(s.find("body"),"click keyup",function(){f.hidePopover()})},f.reflowPopover=function(t){f.displayElements.text[0].offsetHeight-51>t[0].offsetTop?(f.displayElements.popover.css("top",t[0].offsetTop+t[0].offsetHeight+f.displayElements.scrollWindow[0].scrollTop+"px"),f.displayElements.popover.removeClass("top").addClass("bottom")):(f.displayElements.popover.css("top",t[0].offsetTop-54+f.displayElements.scrollWindow[0].scrollTop+"px"),f.displayElements.popover.removeClass("bottom").addClass("top"));var e=f.displayElements.text[0].offsetWidth-f.displayElements.popover[0].offsetWidth,n=t[0].offsetLeft+t[0].offsetWidth/2-f.displayElements.popover[0].offsetWidth/2;f.displayElements.popover.css("left",Math.max(0,Math.min(e,n))+"px"),f.displayElements.popoverArrow.css("margin-left",Math.min(n,Math.max(0,n-e))-11+"px")},f.hidePopover=function(){var t=function(){f.displayElements.popover.css("display",""),f.displayElements.popoverContainer.attr("style",""),f.displayElements.popoverContainer.attr("class","popover-content")};u.when(l.removeClass(f.displayElements.popover,"in",t)).then(t)},f.displayElements.resize.overlay.append(f.displayElements.resize.background),angular.forEach(f.displayElements.resize.anchors,function(t){f.displayElements.resize.overlay.append(t)}),f.displayElements.resize.overlay.append(f.displayElements.resize.info),f.displayElements.scrollWindow.append(f.displayElements.resize.overlay),f.reflowResizeOverlay=function(t){t=angular.element(t)[0],f.displayElements.resize.overlay.css({display:"block",left:t.offsetLeft-5+"px",top:t.offsetTop-5+"px",width:t.offsetWidth+10+"px",height:t.offsetHeight+10+"px"}),f.displayElements.resize.info.text(t.offsetWidth+" x "+t.offsetHeight)},f.showResizeOverlay=function(t){var e=s.find("body");S=function(n){var o={width:parseInt(t.attr("width")),height:parseInt(t.attr("height")),x:n.clientX,y:n.clientY};(void 0===o.width||isNaN(o.width))&&(o.width=t[0].offsetWidth),(void 0===o.height||isNaN(o.height))&&(o.height=t[0].offsetHeight),f.hidePopover();var a=o.height/o.width,r=function(e){var n={x:Math.max(0,o.width+(e.clientX-o.x)),y:Math.max(0,o.height+(e.clientY-o.y))};if(e.shiftKey){var r=n.y/n.x;n.x=a>r?n.x:n.y/a,n.y=a>r?n.x*a:n.y}var i=angular.element(t);i.attr("height",Math.max(0,n.y)),i.attr("width",Math.max(0,n.x)),f.reflowResizeOverlay(t)};e.on("mousemove",r),k(e,"mouseup",function(n){n.preventDefault(),n.stopPropagation(),e.off("mousemove",r),f.showPopover(t)}),n.stopPropagation(),n.preventDefault()},f.displayElements.resize.anchors[3].on("mousedown",S),f.reflowResizeOverlay(t),k(e,"click",function(){f.hideResizeOverlay()})},f.hideResizeOverlay=function(){f.displayElements.resize.anchors[3].off("mousedown",S),f.displayElements.resize.overlay.css("display","")},f.setup.htmlEditorSetup(f.displayElements.html),f.setup.textEditorSetup(f.displayElements.text),f.displayElements.html.attr({id:"taHtmlElement"+R,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":p.attr("ng-model-options")}),f.displayElements.text.attr({id:"taTextElement"+R,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":p.attr("ng-model-options")}),f.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),h.taDefaultWrap&&f.displayElements.text.attr("ta-default-wrap",h.taDefaultWrap),h.taUnsafeSanitizer&&(f.displayElements.text.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer),f.displayElements.html.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer)),f.displayElements.scrollWindow.append(f.displayElements.text),p.append(f.displayElements.scrollWindow),p.append(f.displayElements.html),f.displayElements.forminput.attr("name",f._name),p.append(f.displayElements.forminput),h.tabindex&&(p.removeAttr("tabindex"),f.displayElements.text.attr("tabindex",h.tabindex),f.displayElements.html.attr("tabindex",h.tabindex)),h.placeholder&&(f.displayElements.text.attr("placeholder",h.placeholder),f.displayElements.html.attr("placeholder",h.placeholder)),h.taDisabled&&(f.displayElements.text.attr("ta-readonly","disabled"),f.displayElements.html.attr("ta-readonly","disabled"),f.disabled=f.$parent.$eval(h.taDisabled),f.$parent.$watch(h.taDisabled,function(t){f.disabled=t,f.disabled?p.addClass(f.classes.disabled):p.removeClass(f.classes.disabled)})),h.taPaste&&(f._pasteHandler=function(t){return d(h.taPaste)(f.$parent,{$html:t})},f.displayElements.text.attr("ta-paste","_pasteHandler($html)")),t(f.displayElements.scrollWindow)(f),t(f.displayElements.html)(f),f.updateTaBindtaTextElement=f["updateTaBindtaTextElement"+R],f.updateTaBindtaHtmlElement=f["updateTaBindtaHtmlElement"+R],p.addClass("ta-root"),f.displayElements.scrollWindow.addClass("ta-text ta-editor "+f.classes.textEditor),f.displayElements.html.addClass("ta-html ta-editor "+f.classes.htmlEditor),f._actionRunning=!1;var A=!1;if(f.startAction=function(){return f._actionRunning=!0,A=i.rangy.saveSelection(),function(){A&&i.rangy.restoreSelection(A)}},f.endAction=function(){f._actionRunning=!1,A&&(f.showHtml?f.displayElements.html[0].focus():f.displayElements.text[0].focus(),i.rangy.restoreSelection(A),i.rangy.removeMarkers(A)),A=!1,f.updateSelectedStyles(),f.showHtml||f["updateTaBindtaTextElement"+R]()},w=function(){f.focussed=!0,p.addClass(f.classes.focussed),T.focus(),p.triggerHandler("focus")},f.displayElements.html.on("focus",w),f.displayElements.text.on("focus",w),C=function(t){return f._actionRunning||s[0].activeElement===f.displayElements.html[0]||s[0].activeElement===f.displayElements.text[0]||(p.removeClass(f.classes.focussed),T.unfocus(),e(function(){f._bUpdateSelectedStyles=!1,p.triggerHandler("blur"),f.focussed=!1},0)),t.preventDefault(),!1},f.displayElements.html.on("blur",C),f.displayElements.text.on("blur",C),f.displayElements.text.on("paste",function(t){p.triggerHandler("paste",t)}),f.queryFormatBlockState=function(t){return!f.showHtml&&t.toLowerCase()===s[0].queryCommandValue("formatBlock").toLowerCase()},f.queryCommandState=function(t){return f.showHtml?"":s[0].queryCommandState(t)},f.switchView=function(){f.showHtml=!f.showHtml,l.enabled(!1,f.displayElements.html),l.enabled(!1,f.displayElements.text),f.showHtml?e(function(){return l.enabled(!0,f.displayElements.html),l.enabled(!0,f.displayElements.text),f.displayElements.html[0].focus()},100):e(function(){return l.enabled(!0,f.displayElements.html),l.enabled(!0,f.displayElements.text),f.displayElements.text[0].focus()},100)},h.ngModel){var O=!0;g.$render=function(){if(O){O=!1;var t=f.$parent.$eval(h.ngModel);void 0!==t&&null!==t||!E||""===E||g.$setViewValue(E)}f.displayElements.forminput.val(g.$viewValue),f.html=g.$viewValue||""},p.attr("required")&&(g.$validators.required=function(t,e){var n=t||e;return!(!n||""===n.trim())})}else f.displayElements.forminput.val(E),f.html=E;if(f.$watch("html",function(t,e){t!==e&&(h.ngModel&&g.$viewValue!==t&&g.$setViewValue(t),f.displayElements.forminput.val(t))}),h.taTargetToolbars)T=r.registerEditor(f._name,f,h.taTargetToolbars.split(","));else{var D=angular.element('<div text-angular-toolbar name="textAngularToolbar'+R+'">');h.taToolbar&&D.attr("ta-toolbar",h.taToolbar),h.taToolbarClass&&D.attr("ta-toolbar-class",h.taToolbarClass),h.taToolbarGroupClass&&D.attr("ta-toolbar-group-class",h.taToolbarGroupClass),h.taToolbarButtonClass&&D.attr("ta-toolbar-button-class",h.taToolbarButtonClass),h.taToolbarActiveButtonClass&&D.attr("ta-toolbar-active-button-class",h.taToolbarActiveButtonClass),h.taFocussedClass&&D.attr("ta-focussed-class",h.taFocussedClass),p.prepend(D),t(D)(f.$parent),T=r.registerEditor(f._name,f,["textAngularToolbar"+R])}f.$on("$destroy",function(){r.unregisterEditor(f._name)}),f.$on("ta-element-select",function(t,e){T.triggerElementSelect(t,e)&&f["reApplyOnSelectorHandlerstaTextElement"+R]()}),f.$on("ta-drop-event",function(t,n,o,a){f.displayElements.text[0].focus(),a&&a.files&&a.files.length>0?(angular.forEach(a.files,function(t){try{u.when(f.fileDropHandler(t,f.wrapSelection)||f.fileDropHandler!==f.defaultFileDropHandler&&u.when(f.defaultFileDropHandler(t,f.wrapSelection))).then(function(){f["updateTaBindtaTextElement"+R]()})}catch(e){c.error(e)}}),o.preventDefault(),o.stopPropagation()):e(function(){f["updateTaBindtaTextElement"+R]()},0)}),f._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){f._bUpdateSelectedStyles=!1,f.focussed=!1}),f.updateSelectedStyles=function(){var t;N&&e.cancel(N),void 0!==(t=o.getSelectionElement())&&t.parentNode!==f.displayElements.text[0]?T.updateSelectedStyles(angular.element(t)):T.updateSelectedStyles(),f._bUpdateSelectedStyles&&(N=e(f.updateSelectedStyles,200))},m=function(){return f.focussed?void(f._bUpdateSelectedStyles||(f._bUpdateSelectedStyles=!0,f.$apply(function(){f.updateSelectedStyles()}))):void(f._bUpdateSelectedStyles=!1)},f.displayElements.html.on("keydown",m),f.displayElements.text.on("keydown",m),v=function(){f._bUpdateSelectedStyles=!1},f.displayElements.html.on("keyup",v),f.displayElements.text.on("keyup",v),y=function(t,e){e&&angular.extend(t,e),f.$apply(function(){return T.sendKeyCommand(t)?(f._bUpdateSelectedStyles||f.updateSelectedStyles(),t.preventDefault(),!1):void 0})},f.displayElements.html.on("keypress",y),f.displayElements.text.on("keypress",y),b=function(){f._bUpdateSelectedStyles=!1,f.$apply(function(){f.updateSelectedStyles()})},f.displayElements.html.on("mouseup",b),f.displayElements.text.on("mouseup",b)}}}]),m.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(t,e,n){var o={},a={};return{registerEditor:function(n,r,i){if(!n||""===n)throw"textAngular Error: An editor requires a name";if(!r)throw"textAngular Error: An editor requires a scope";if(a[n])throw'textAngular Error: An Editor with name "'+n+'" already exists';var s=[];return angular.forEach(i,function(t){o[t]&&s.push(o[t])}),a[n]={scope:r,toolbars:i,_registerToolbar:function(t){this.toolbars.indexOf(t.name)>=0&&s.push(t)},editorFunctions:{disable:function(){angular.forEach(s,function(t){t.disabled=!0})},enable:function(){angular.forEach(s,function(t){t.disabled=!1})},focus:function(){angular.forEach(s,function(t){t._parent=r,t.disabled=!1,t.focussed=!0,r.focussed=!0})},
unfocus:function(){angular.forEach(s,function(t){t.disabled=!0,t.focussed=!1}),r.focussed=!1},updateSelectedStyles:function(t){angular.forEach(s,function(e){angular.forEach(e.tools,function(n){n.activeState&&(e._parent=r,n.active=n.activeState(t))})})},sendKeyCommand:function(n){var o=!1;return(n.ctrlKey||n.metaKey)&&angular.forEach(e,function(e,a){if(e.commandKeyCode&&e.commandKeyCode===n.which)for(var i=0;i<s.length;i++)if(void 0!==s[i].tools[a]){t.call(s[i].tools[a],r),o=!0;break}}),o},triggerElementSelect:function(t,n){var o=function(t,e){for(var n=!0,o=0;o<e.length;o++)n=n&&t.attr(e[o]);return n},a=[],i={},l=!1;n=angular.element(n);var c=!1;if(angular.forEach(e,function(t,e){t.onElementSelect&&t.onElementSelect.element&&t.onElementSelect.element.toLowerCase()===n[0].tagName.toLowerCase()&&(!t.onElementSelect.filter||t.onElementSelect.filter(n))&&(c=c||angular.isArray(t.onElementSelect.onlyWithAttrs)&&o(n,t.onElementSelect.onlyWithAttrs),(!t.onElementSelect.onlyWithAttrs||o(n,t.onElementSelect.onlyWithAttrs))&&(i[e]=t))}),c?(angular.forEach(i,function(t,e){t.onElementSelect.onlyWithAttrs&&o(n,t.onElementSelect.onlyWithAttrs)&&a.push({name:e,tool:t})}),a.sort(function(t,e){return e.tool.onElementSelect.onlyWithAttrs.length-t.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(i,function(t,e){a.push({name:e,tool:t})}),a.length>0)for(var u=0;u<a.length;u++){for(var d=a[u].tool,f=a[u].name,p=0;p<s.length;p++)if(void 0!==s[p].tools[f]){d.onElementSelect.action.call(s[p].tools[f],t,n,r),l=!0;break}if(l)break}return l}}},a[n].editorFunctions},retrieveEditor:function(t){return a[t]},unregisterEditor:function(t){delete a[t]},registerToolbar:function(t){if(!t)throw"textAngular Error: A toolbar requires a scope";if(!t.name||""===t.name)throw"textAngular Error: A toolbar requires a name";if(o[t.name])throw'textAngular Error: A toolbar with name "'+t.name+'" already exists';o[t.name]=t,angular.forEach(a,function(e){e._registerToolbar(t)})},retrieveToolbar:function(t){return o[t]},retrieveToolbarsViaEditor:function(t){var e=[],n=this;return angular.forEach(this.retrieveEditor(t).toolbars,function(t){e.push(n.retrieveToolbar(t))}),e},unregisterToolbar:function(t){delete o[t]},updateToolsDisplay:function(t){var e=this;angular.forEach(t,function(t,n){e.updateToolDisplay(n,t)})},resetToolsDisplay:function(){var t=this;angular.forEach(e,function(e,n){t.resetToolDisplay(n)})},updateToolDisplay:function(t,e){var n=this;angular.forEach(o,function(o,a){n.updateToolbarToolDisplay(a,t,e)})},resetToolDisplay:function(t){var e=this;angular.forEach(o,function(n,o){e.resetToolbarToolDisplay(o,t)})},updateToolbarToolDisplay:function(t,e,n){if(!o[t])throw'textAngular Error: No Toolbar with name "'+t+'" exists';o[t].updateToolDisplay(e,n)},resetToolbarToolDisplay:function(t,n){if(!o[t])throw'textAngular Error: No Toolbar with name "'+t+'" exists';o[t].updateToolDisplay(n,e[n],!0)},removeTool:function(t){delete e[t],angular.forEach(o,function(e){delete e.tools[t];for(var n=0;n<e.toolbar.length;n++){for(var o,a=0;a<e.toolbar[n].length;a++){if(e.toolbar[n][a]===t){o={group:n,index:a};break}if(void 0!==o)break}void 0!==o&&(e.toolbar[o.group].slice(o.index,1),e._$element.children().eq(o.group).children().eq(o.index).remove())}})},addTool:function(t,e,a,r){n(t,e),angular.forEach(o,function(n){n.addTool(t,e,a,r)})},addToolToToolbar:function(t,e,a,r,i){n(t,e),o[a].addTool(t,e,r,i)},refreshEditor:function(t){if(!a[t])throw'textAngular Error: No Editor with name "'+t+'" exists';a[t].scope.updateTaBindtaTextElement(),a[t].scope.$$phase||a[t].scope.$digest()}}}]),m.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(t,e,n,o,a,r){return{scope:{name:"@"},restrict:"EA",link:function(i,s,l){if(!i.name||""===i.name)throw"textAngular Error: A toolbar requires a name";angular.extend(i,angular.copy(n)),l.taToolbar&&(i.toolbar=i.$parent.$eval(l.taToolbar)),l.taToolbarClass&&(i.classes.toolbar=l.taToolbarClass),l.taToolbarGroupClass&&(i.classes.toolbarGroup=l.taToolbarGroupClass),l.taToolbarButtonClass&&(i.classes.toolbarButton=l.taToolbarButtonClass),l.taToolbarActiveButtonClass&&(i.classes.toolbarButtonActive=l.taToolbarActiveButtonClass),l.taFocussedClass&&(i.classes.focussed=l.taFocussedClass),i.disabled=!0,i.focussed=!1,i._$element=s,s[0].innerHTML="",s.addClass("ta-toolbar "+i.classes.toolbar),i.$watch("focussed",function(){i.focussed?s.addClass(i.classes.focussed):s.removeClass(i.classes.focussed)});var c=function(e,n){var o;if(o=angular.element(e&&e.display?e.display:"<button type='button'>"),o.addClass(e&&e["class"]?e["class"]:i.classes.toolbarButton),o.attr("name",n.name),o.attr("ta-button","ta-button"),o.attr("ng-disabled","isDisabled()"),o.attr("tabindex","-1"),o.attr("ng-click","executeAction()"),o.attr("ng-class","displayActiveToolClass(active)"),e&&e.tooltiptext&&o.attr("title",e.tooltiptext),e&&!e.display&&!n._display&&(o[0].innerHTML="",e.buttontext&&(o[0].innerHTML=e.buttontext),e.iconclass)){var a=angular.element("<i>"),r=o[0].innerHTML;a.addClass(e.iconclass),o[0].innerHTML="",o.append(a),r&&""!==r&&o.append("&nbsp;"+r)}return n._lastToolDefinition=angular.copy(e),t(o)(n)};i.tools={},i._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var u={$window:r,$editor:function(){return i._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(t){return t?i.classes.toolbarButtonActive:""},executeAction:a};angular.forEach(i.toolbar,function(t){var e=angular.element("<div>");e.addClass(i.classes.toolbarGroup),angular.forEach(t,function(t){i.tools[t]=angular.extend(i.$new(!0),o[t],u,{name:t}),i.tools[t].$element=c(o[t],i.tools[t]),e.append(i.tools[t].$element)}),s.append(e)}),i.updateToolDisplay=function(t,e,n){var o=i.tools[t];if(o){if(o._lastToolDefinition&&!n&&(e=angular.extend({},o._lastToolDefinition,e)),null===e.buttontext&&null===e.iconclass&&null===e.display)throw'textAngular Error: Tool Definition for updating "'+t+'" does not have a valid display/iconclass/buttontext value';null===e.buttontext&&delete e.buttontext,null===e.iconclass&&delete e.iconclass,null===e.display&&delete e.display;var a=c(e,o);o.$element.replaceWith(a),o.$element=a}},i.addTool=function(t,e,n,a){i.tools[t]=angular.extend(i.$new(!0),o[t],u,{name:t}),i.tools[t].$element=c(o[t],i.tools[t]);var r;void 0===n&&(n=i.toolbar.length-1),r=angular.element(s.children()[n]),void 0===a?(r.append(i.tools[t].$element),i.toolbar[n][i.toolbar[n].length-1]=t):(r.children().eq(a).after(i.tools[t].$element),i.toolbar[n][a]=t)},e.registerToolbar(i),i.$on("$destroy",function(){e.unregisterToolbar(i.name)})}}}])}()}({},function(){return this}()),function(){var t,e,n,o,a,r,i;o=function(t,e){var n,o,a,r;r=[];for(o in e.prototype)try{a=e.prototype[o],r.push(null==t[o]&&"function"!=typeof a?t[o]=a:void 0)}catch(i){n=i}return r},t={},null==t.options&&(t.options={}),n={checks:{xhr:{url:function(){return"/favicon.ico?_="+Math.floor(1e9*Math.random())},timeout:5e3},image:{url:function(){return"/favicon.ico?_="+Math.floor(1e9*Math.random())}},active:"xhr"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0},a=function(t,e){var n,o,a,r,i,s;for(n=t,r=e.split("."),o=i=0,s=r.length;s>i&&(a=r[o],n=n[a],"object"==typeof n);o=++i);return o===r.length-1?n:void 0},t.getOption=function(e){var o,r;return o=null!=(r=a(t.options,e))?r:a(n,e),"function"==typeof o?o():o},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(t.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return t.confirmDown()},!1),t.state="up",t.markUp=function(){return t.trigger("confirmed-up"),"up"!==t.state?(t.state="up",t.trigger("up")):void 0},t.markDown=function(){return t.trigger("confirmed-down"),"down"!==t.state?(t.state="down",t.trigger("down")):void 0},r={},t.on=function(e,n,o){var a,i,s,l,c;if(i=e.split(" "),i.length>1){for(c=[],s=0,l=i.length;l>s;s++)a=i[s],c.push(t.on(a,n,o));return c}return null==r[e]&&(r[e]=[]),r[e].push([o,n])},t.off=function(t,e){var n,o,a,i,s;if(null!=r[t]){if(e){for(o=0,s=[];o<r[t].length;)i=r[t][o],n=i[0],a=i[1],s.push(a===e?r[t].splice(o,1):o++);return s}return r[t]=[]}},t.trigger=function(t){var e,n,o,a,i,s,l;if(null!=r[t]){for(i=r[t],l=[],o=0,a=i.length;a>o;o++)s=i[o],e=s[0],n=s[1],l.push(n.call(e));return l}},e=function(t,e,n){var o,a,r,i,s;return o=function(){return t.status&&t.status<12e3?e():n()},null===t.onprogress?(a=t.onerror,t.onerror=function(){return n(),"function"==typeof a?a.apply(null,arguments):void 0},s=t.ontimeout,t.ontimeout=function(){return n(),"function"==typeof s?s.apply(null,arguments):void 0},r=t.onload,t.onload=function(){return o(),"function"==typeof r?r.apply(null,arguments):void 0}):(i=t.onreadystatechange,t.onreadystatechange=function(){return 4===t.readyState?o():0===t.readyState&&n(),"function"==typeof i?i.apply(null,arguments):void 0})},t.checks={},t.checks.xhr=function(){var n,o;o=new XMLHttpRequest,o.offline=!1,o.open("HEAD",t.getOption("checks.xhr.url"),!0),null!=o.timeout&&(o.timeout=t.getOption("checks.xhr.timeout")),e(o,t.markUp,t.markDown);try{o.send()}catch(a){n=a,t.markDown()}return o},t.checks.image=function(){var e;return e=document.createElement("img"),e.onerror=t.markDown,e.onload=t.markUp,void(e.src=t.getOption("checks.image.url"))},t.checks.down=t.markDown,t.checks.up=t.markUp,t.check=function(){return t.trigger("checking"),t.checks[t.getOption("checks.active")]()},t.confirmUp=t.confirmDown=t.check,t.onXHR=function(t){var e,n,a;return e=function(e,n){var o;return o=e.open,e.open=function(a,r,i,s,l){return t({type:a,url:r,async:i,flags:n,user:s,password:l,xhr:e}),o.apply(e,arguments)}},a=window.XMLHttpRequest,window.XMLHttpRequest=function(t){var n,o,r;return n=new a(t),e(n,t),r=n.setRequestHeader,n.headers={},n.setRequestHeader=function(t,e){return n.headers[t]=e,r.call(n,t,e)},o=n.overrideMimeType,n.overrideMimeType=function(t){return n.mimeType=t,o.call(n,t)},n},o(window.XMLHttpRequest,a),null!=window.XDomainRequest?(n=window.XDomainRequest,window.XDomainRequest=function(){var t;return t=new n,e(t),t},o(window.XDomainRequest,n)):void 0},i=function(){return t.getOption("interceptRequests")&&t.onXHR(function(n){var o;return o=n.xhr,o.offline!==!1?e(o,t.confirmUp,t.confirmDown):void 0}),t.getOption("checkOnLoad")?t.check():void 0},setTimeout(i,0),window.Offline=t}.call(this),function(){var t,e,n,o,a,r,i,s,l;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");o=Offline.reconnect={},r=null,a=function(){var t;return null!=o.state&&"inactive"!==o.state&&Offline.trigger("reconnect:stopped"),o.state="inactive",o.remaining=o.delay=null!=(t=Offline.getOption("reconnect.initialDelay"))?t:3},e=function(){var t,e;return t=null!=(e=Offline.getOption("reconnect.delay"))?e:Math.min(Math.ceil(1.5*o.delay),3600),o.remaining=o.delay=t},i=function(){return"connecting"!==o.state?(o.remaining-=1,Offline.trigger("reconnect:tick"),0===o.remaining?s():void 0):void 0},s=function(){return"waiting"===o.state?(Offline.trigger("reconnect:connecting"),o.state="connecting",Offline.check()):void 0},t=function(){return Offline.getOption("reconnect")?(a(),o.state="waiting",Offline.trigger("reconnect:started"),r=setInterval(i,1e3)):void 0},l=function(){return null!=r&&clearInterval(r),a()},n=function(){return Offline.getOption("reconnect")&&"connecting"===o.state?(Offline.trigger("reconnect:failure"),o.state="waiting",e()):void 0},o.tryNow=s,a(),Offline.on("down",t),Offline.on("confirmed-down",n),Offline.on("up",l)}.call(this),function(){var t,e,n,o,a,r;if(!window.Offline)throw new Error("Requests module brought in without offline.js");n=[],r=!1,o=function(t){return Offline.trigger("requests:capture"),"down"!==Offline.state&&(r=!0),n.push(t)},a=function(t){var e,n,o,a,r,i,s,l,c;l=t.xhr,r=t.url,a=t.type,i=t.user,o=t.password,e=t.body,l.abort(),l.open(a,r,!0,i,o),c=l.headers;for(n in c)s=c[n],l.setRequestHeader(n,s);return l.mimeType&&l.overrideMimeType(l.mimeType),l.send(e)},t=function(){return n=[]},e=function(){var e,o,r,i,s,l;for(Offline.trigger("requests:flush"),r={},s=0,l=n.length;l>s;s++)o=n[s],i=o.url.replace(/(\?|&)_=[0-9]+/,function(t,e){return"?"===e?e:""}),r[""+o.type.toUpperCase()+" - "+i]=o;for(e in r)o=r[e],a(o);return t()},setTimeout(function(){return Offline.getOption("requests")!==!1?(Offline.on("confirmed-up",function(){return r?(r=!1,t()):void 0}),Offline.on("up",e),Offline.on("down",function(){return r=!1}),Offline.onXHR(function(t){var e,n,a,r,i;return a=t.xhr,e=t.async,a.offline!==!1&&(n=function(){return o(t)},i=a.send,a.send=function(e){return t.body=e,i.apply(a,arguments)},e)?null===a.onprogress?(a.addEventListener("error",n,!1),a.addEventListener("timeout",n,!1)):(r=a.onreadystatechange,a.onreadystatechange=function(){return 0===a.readyState?n():4===a.readyState&&(0===a.status||a.status>=12e3)&&n(),"function"==typeof r?r.apply(null,arguments):void 0}):void 0}),Offline.requests={flush:e,clear:t}):void 0},0)}.call(this),function(){var t,e,n,o,a;if(!Offline)throw new Error("Offline simulate brought in without offline.js");for(a=["up","down"],n=0,o=a.length;o>n;n++)t=a[n],(document.querySelector("script[data-simulate='"+t+"']")||localStorage.OFFLINE_SIMULATE===t)&&(null==Offline.options&&(Offline.options={}),null==(e=Offline.options).checks&&(e.checks={}),Offline.options.checks.active=t)}.call(this),function(){var t,e,n,o,a,r,i,s,l,c,u,d,f;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");e='<div class="offline-ui"><div class="offline-ui-content"></div></div>',t='<a href class="offline-ui-retry"></a>',a=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.children[0]},r=o=null,n=function(t){return c(t),r.className+=" "+t},c=function(t){return r.className=r.className.replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," ")},s={},i=function(t,e){return n(t),null!=s[t]&&clearTimeout(s[t]),s[t]=setTimeout(function(){return c(t),delete s[t]},1e3*e)},d=function(t){var e,n,o,a;o={day:86400,hour:3600,minute:60,second:1};for(n in o)if(e=o[n],t>=e)return a=Math.floor(t/e),[a,n];return["now",""]},u=function(){var i,s;return r=a(e),document.body.appendChild(r),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(r.appendChild(a(t)),i=r.querySelector(".offline-ui-retry"),s=function(t){return t.preventDefault(),Offline.reconnect.tryNow()},null!=i.addEventListener?i.addEventListener("click",s,!1):i.attachEvent("click",s)),n("offline-ui-"+Offline.state),o=r.querySelector(".offline-ui-content")},l=function(){return u(),Offline.on("up",function(){return c("offline-ui-down"),n("offline-ui-up"),i("offline-ui-up-2s",2),i("offline-ui-up-5s",5)}),Offline.on("down",function(){return c("offline-ui-up"),n("offline-ui-down"),i("offline-ui-down-2s",2),i("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return n("offline-ui-connecting"),c("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){var t,e,a;return n("offline-ui-waiting"),c("offline-ui-connecting"),a=d(Offline.reconnect.remaining),t=a[0],e=a[1],o.setAttribute("data-retry-in-value",t),o.setAttribute("data-retry-in-unit",e)}),Offline.on("reconnect:stopped",function(){return c("offline-ui-connecting offline-ui-waiting"),o.setAttribute("data-retry-in-value",null),o.setAttribute("data-retry-in-unit",null)}),Offline.on("reconnect:failure",function(){return i("offline-ui-reconnect-failed-2s",2),i("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return i("offline-ui-reconnect-succeeded-2s",2),i("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?l():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",l,!1):(f=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&l(),"function"==typeof f?f.apply(null,arguments):void 0})}.call(this);